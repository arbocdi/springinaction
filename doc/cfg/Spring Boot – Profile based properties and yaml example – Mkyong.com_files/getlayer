"use strict";function cboladebug(){Cbola.Env.DEBUG=!0,localStorage.setItem("cbolaDebug","1")}function rcboladebug(){Cbola.Env.DEBUG=!1,localStorage.setItem("cbolaDebug","0")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if(window.Cbola=window.Cbola||{},window.Cbola=window.Cbola||{},Cbola.BrowserTests={},Cbola.isObsoleteBrowser=function(){function e(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/gi.test(r)&&-1===r.search("PC")}function t(){var e=r.match(/Chrom(e|ium)\/([0-9]+)\./);return!!e&&parseInt(e[2],10)}function i(){return r.indexOf("Edge")>-1}function o(){var e=r.match("[A|a]ndroid[ |/]([0-9|.]+)"),t=!1;if(null!==e)try{t=!!e&&parseInt(e[1],10)}catch(e){t=1}return t>=1}function n(){return void 0===window["AudioNode"]}var r=window.navigator.userAgent,a=r.indexOf("MSIE ");if(a>0){return parseInt(r.substring(a+5,r.indexOf(".",a)))<=9}var s=t();return!!(!i()&&s&&s<50)||!!(e()&&o()&&n())},Cbola.isBrowserSupported=!Cbola.isObsoleteBrowser(),!Cbola.isBrowserSupported){console.log("Cbola:: deprecated browser detected");var proxyEl=document.getElementById("carambola_proxy");if(proxyEl){var proxySrcAttr=proxyEl.getAttribute("src"),proxyElParams=proxySrcAttr?proxySrcAttr.split("?"):[];if(proxyElParams.length>1){proxyElParams=proxyElParams[1];var scriptEl=window.document.createElement("script");scriptEl.src="//route.carambo.la/getHelp?"+proxyElParams,scriptEl.type="text/javascript",document.head.appendChild(scriptEl)}}}!function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function n(e){this.map={},e instanceof n?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function r(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function s(e){var t=new FileReader,i=a(t);return t.readAsArrayBuffer(e),i}function l(e){var t=new FileReader,i=a(t);return t.readAsText(e),i}function d(e){for(var t=new Uint8Array(e),i=new Array(t.length),o=0;o<t.length;o++)i[o]=String.fromCharCode(t[o]);return i.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&w(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!v(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?r(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(u)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(e){var t=e.toUpperCase();return C.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var i=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new n(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new n(t.headers)),this.method=m(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function u(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),o=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(n))}}),t}function b(e){var t=new n;return e.split(/\r?\n/).forEach(function(e){var i=e.split(":"),o=i.shift().trim();if(o){var n=i.join(":").trim();t.append(o,n)}}),t}function f(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new n(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(e){return e&&DataView.prototype.isPrototypeOf(e)},v=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};n.prototype.append=function(e,o){e=t(e),o=i(o);var n=this.map[e];this.map[e]=n?n+","+o:o},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(e,o){this.map[t(e)]=i(o)},n.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},n.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),o(e)},n.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},n.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),o(e)},y.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var C=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},f.error=function(){var e=new f(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];f.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new f(null,{status:t,headers:{location:e}})},e.Headers=n,e.Request=p,e.Response=f,e.fetch=function(e,t){return new Promise(function(i,o){var n=new p(e,t),r=new XMLHttpRequest;r.onload=function(){var e={status:r.status,statusText:r.statusText,headers:b(r.getAllResponseHeaders()||"")};e.url="responseURL"in r?r.responseURL:e.headers.get("X-Request-URL");var t="response"in r?r.response:r.responseText;i(new f(t,e))},r.onerror=function(){o(new TypeError("Network request failed"))},r.ontimeout=function(){o(new TypeError("Network request failed"))},r.open(n.method,n.url,!0),"include"===n.credentials&&(r.withCredentials=!0),"responseType"in r&&y.blob&&(r.responseType="blob"),n.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),r.send(void 0===n._bodyInit?null:n._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),function(e){function t(){}function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function n(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0,o._immediateFn(function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null===i)return void(1===e._state?r:a)(t.promise,e._value);var o;try{o=i(e._value)}catch(e){return void a(t.promise,e)}r(t.promise,o)})}function r(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void s(e);if("function"==typeof n)return void d(i(n,t),e)}e._state=1,e._value=t,s(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;t<i;t++)n(e,e._deferreds[t]);e._deferreds=null}function l(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function d(e,t){var i=!1;try{e(function(e){i||(i=!0,r(t,e))},function(e){i||(i=!0,a(t,e))})}catch(e){if(i)return;i=!0,a(t,e)}}var c=setTimeout;o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,i){var o=new this.constructor(t);return n(this,new l(e,i,o)),o},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,i){function o(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(r,e)},i)}t[r]=a,0==--n&&e(t)}catch(e){i(e)}}if(0===t.length)return e([]);for(var n=t.length,r=0;r<t.length;r++)o(r,t[r])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,i){i(e)})},o.race=function(e){return new o(function(t,i){for(var o=0,n=e.length;o<n;o++)e[o].then(t,i)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=o:e.Promise||(e.Promise=o)}(this),Cbola.tmp_=window._,function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function i(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function o(e,t,i,o){for(var n=-1,r=null==e?0:e.length;++n<r;){var a=e[n];t(o,a,i(a),e)}return o}function n(e,t){for(var i=-1,o=null==e?0:e.length;++i<o&&!1!==t(e[i],i,e););return e}function r(e,t){for(var i=-1,o=null==e?0:e.length,n=0,r=[];++i<o;){var a=e[i];t(a,i,e)&&(r[n++]=a)}return r}function a(e,t){return!(null==e||!e.length)&&-1<p(e,t,0)}function s(e,t,i){for(var o=-1,n=null==e?0:e.length;++o<n;)if(i(t,e[o]))return!0;return!1}function l(e,t){for(var i=-1,o=null==e?0:e.length,n=Array(o);++i<o;)n[i]=t(e[i],i,e);return n}function d(e,t){for(var i=-1,o=t.length,n=e.length;++i<o;)e[n+i]=t[i];return e}function c(e,t,i,o){var n=-1,r=null==e?0:e.length;for(o&&r&&(i=e[++n]);++n<r;)i=t(i,e[n],n,e);return i}function h(e,t){for(var i=-1,o=null==e?0:e.length;++i<o;)if(t(e[i],i,e))return!0;return!1}function m(e,t,i,o){var n=e.length;for(i+=o?1:-1;o?i--:++i<n;)if(t(e[i],i,e))return i;return-1}function p(e,t,i){if(t===t)e:{--i;for(var o=e.length;++i<o;)if(e[i]===t){e=i;break e}e=-1}else e=m(e,u,i);return e}function u(e){return e!==e}function b(e){return function(t){return null==t?di:t[e]}}function f(e){return function(t){return null==e?di:e[t]}}function y(e,t,i,o,n){return n(e,function(e,n,r){i=o?(o=!1,e):t(i,e,n,r)}),i}function g(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].c;return e}function w(e,t){for(var i=-1,o=Array(e);++i<e;)o[i]=t(i);return o}function v(e){return function(t){return e(t)}}function C(e,t){return l(t,function(t){return e[t]})}function _(e,t){return e.has(t)}function I(e){return"\\"+$i[e]}function x(e){var t=-1,i=Array(e.size);return e.forEach(function(e,o){i[++t]=[o,e]}),i}function E(e,t){return function(i){return e(t(i))}}function S(e,t){for(var i=-1,o=e.length,n=0,r=[];++i<o;){var a=e[i];a!==t&&"__lodash_placeholder__"!==a||(e[i]="__lodash_placeholder__",r[n++]=i)}return r}function T(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function k(e){if(Gi.test(e)){for(var t=qi.lastIndex=0;qi.test(e);)++t;e=t}else e=ho(e);return e}function A(e){return Gi.test(e)?e.match(qi)||[]:e.split("")}function L(e){if(Rt(e)&&!Bn(e)&&!(e instanceof N)){if(e instanceof P)return e;if(go.call(e,"__wrapped__"))return bt(e)}return new P(e)}function O(){}function P(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=di}function N(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function B(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function D(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function M(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function R(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new M;++t<i;)this.add(e[t])}function F(e){this.size=(this.__data__=new D(e)).size}function V(e,t){var i,o=Bn(e),n=!o&&Nn(e),r=!o&&!n&&Dn(e),a=!o&&!n&&!r&&Rn(e),n=(o=o||n||r||a)?w(e.length,String):[],s=n.length;for(i in e)!t&&!go.call(e,i)||o&&("length"==i||r&&("offset"==i||"parent"==i)||a&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||nt(i,s))||n.push(i);return n}function z(e,t,i){var o=e[t];go.call(e,t)&&Lt(o,i)&&(i!==di||t in e)||q(e,t,i)}function U(e,t){for(var i=e.length;i--;)if(Lt(e[i][0],t))return i;return-1}function j(e,t,i,o){return hn(e,function(e,n,r){t(o,e,i(e),r)}),o}function W(e,t){return e&&Oe(t,Zt(t),e)}function H(e,t){return e&&Oe(t,Kt(t),e)}function q(e,t,i){"__proto__"==t&&Do?Do(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function X(e,t,i,o,r,a){var s,l=1&t,d=2&t,c=4&t;if(i&&(s=r?i(e,o,r,a):i(e)),s!==di)return s;if(!Mt(e))return e;if(o=Bn(e)){if(s=et(e),!l)return Le(e,s)}else{var h=wn(e),m="[object Function]"==h||"[object GeneratorFunction]"==h;if(Dn(e))return Se(e,l);if("[object Object]"==h||"[object Arguments]"==h||m&&!r){if(s=d||m?{}:tt(e),!l)return d?Ne(e,H(s,e)):Pe(e,W(s,e))}else{if(!Ki[h])return r?e:{};s=it(e,h,X,l)}}if(a||(a=new F),r=a.get(e))return r;a.set(e,s);var d=c?d?Ge:Xe:d?Kt:Zt,p=o?di:d(e);return n(p||e,function(o,n){p&&(n=o,o=e[n]),z(s,n,X(o,t,i,n,e,a))}),s}function G(e,t,i,o){var n=-1,r=a,d=!0,c=e.length,h=[],m=t.length;if(!c)return h;i&&(t=l(t,v(i))),o?(r=s,d=!1):200<=t.length&&(r=_,d=!1,t=new R(t));e:for(;++n<c;){var p=e[n],u=null==i?p:i(p),p=o||0!==p?p:0;if(d&&u===u){for(var b=m;b--;)if(t[b]===u)continue e;h.push(p)}else r(t,u,o)||h.push(p)}return h}function Y(e,t){var i=[];return hn(e,function(e,o,n){t(e,o,n)&&i.push(e)}),i}function Z(e,t,i,o,n){var r=-1,a=e.length;for(i||(i=ot),n||(n=[]);++r<a;){var s=e[r];0<t&&i(s)?1<t?Z(s,t-1,i,o,n):d(n,s):o||(n[n.length]=s)}return n}function K(e,t){return e&&mn(e,t,Zt)}function Q(e,t){return r(t,function(t){return Bt(e[t])})}function $(e,t){t=xe(t,e);for(var i=0,o=t.length;null!=e&&i<o;)e=e[mt(t[i++])];return i&&i==o?e:di}function J(e,t,i){return t=t(e),Bn(e)?t:d(t,i(e))}function ee(e){if(null==e)return e===di?"[object Undefined]":"[object Null]";if(Bo&&Bo in Object(e)){var t=go.call(e,Bo),i=e[Bo];try{e[Bo]=di;var o=!0}catch(e){}var n=vo.call(e);o&&(t?e[Bo]=i:delete e[Bo]),e=n}else e=vo.call(e);return e}function te(e,t){return null!=e&&go.call(e,t)}function ie(e,t){return null!=e&&t in Object(e)}function oe(e){return Rt(e)&&"[object Arguments]"==ee(e)}function ne(e,t,i,o,n){if(e===t)return!0;if(null==e||null==t||!Rt(e)&&!Rt(t))return e!==e&&t!==t;e:{var r=Bn(e),a=Bn(t),s=r?"[object Array]":wn(e),l=a?"[object Array]":wn(t),s="[object Arguments]"==s?"[object Object]":s,l="[object Arguments]"==l?"[object Object]":l,d="[object Object]"==s,a="[object Object]"==l;if((l=s==l)&&Dn(e)){if(!Dn(t)){t=!1;break e}r=!0,d=!1}if(l&&!d)n||(n=new F),t=r||Rn(e)?He(e,t,i,o,ne,n):qe(e,t,s,i,o,ne,n);else{if(!(1&i)&&(r=d&&go.call(e,"__wrapped__"),s=a&&go.call(t,"__wrapped__"),r||s)){e=r?e.value():e,t=s?t.value():t,n||(n=new F),t=ne(e,t,i,o,n);break e}if(l)t:if(n||(n=new F),r=1&i,s=Xe(e),a=s.length,l=Xe(t).length,a==l||r){for(d=a;d--;){var c=s[d];if(!(r?c in t:go.call(t,c))){t=!1;break t}}if((l=n.get(e))&&n.get(t))t=l==t;else{l=!0,n.set(e,t),n.set(t,e);for(var h=r;++d<a;){var c=s[d],m=e[c],p=t[c];if(o)var u=r?o(p,m,c,t,e,n):o(m,p,c,e,t,n);if(u===di?m!==p&&!ne(m,p,i,o,n):!u){l=!1;break}h||(h="constructor"==c)}l&&!h&&(i=e.constructor,o=t.constructor,i!=o&&"constructor"in e&&"constructor"in t&&!("function"==typeof i&&i instanceof i&&"function"==typeof o&&o instanceof o)&&(l=!1)),n.delete(e),n.delete(t),t=l}}else t=!1;else t=!1}}return t}function re(e,t,i,o){var n=i.length,r=n,a=!o;if(null==e)return!r;for(e=Object(e);n--;){var s=i[n];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++n<r;){var s=i[n],l=s[0],d=e[l],c=s[1];if(a&&s[2]){if(d===di&&!(l in e))return!1}else{if(s=new F,o)var h=o(d,c,l,e,t,s);if(h===di?!ne(c,d,3,o,s):!h)return!1}}return!0}function ae(e){return Rt(e)&&"[object RegExp]"==ee(e)}function se(e){return Rt(e)&&Dt(e.length)&&!!Zi[ee(e)]}function le(e){return"function"==typeof e?e:null==e?ii:"object"==typeof e?Bn(e)?me(e[0],e[1]):he(e):ai(e)}function de(e){if(!st(e))return Uo(e);var t,i=[];for(t in Object(e))go.call(e,t)&&"constructor"!=t&&i.push(t);return i}function ce(e,t){var i=-1,o=Ot(e)?Array(e.length):[];return hn(e,function(e,n,r){o[++i]=t(e,n,r)}),o}function he(e){var t=Qe(e);return 1==t.length&&t[0][2]?lt(t[0][0],t[0][1]):function(i){return i===e||re(i,e,t)}}function me(e,t){return at(e)&&t===t&&!Mt(t)?lt(mt(e),t):function(i){var o=Gt(i,e);return o===di&&o===t?Yt(i,e):ne(t,o,3)}}function pe(e,t,i){var o=-1;return t=l(t.length?t:[ii],v(Ze())),e=ce(e,function(e,i,n){return{a:l(t,function(t){return t(e)}),b:++o,c:e}}),g(e,function(e,t){var o;e:{o=-1;for(var n=e.a,r=t.a,a=n.length,s=i.length;++o<a;){var l;t:{l=n[o];var d=r[o];if(l!==d){var c=l!==di,h=null===l,m=l===l,p=Ut(l),u=d!==di,b=null===d,f=d===d,y=Ut(d);if(!b&&!y&&!p&&l>d||p&&u&&f&&!b&&!y||h&&u&&f||!c&&f||!m){l=1;break t}if(!h&&!p&&!y&&l<d||y&&c&&m&&!h&&!p||b&&c&&m||!u&&m||!f){l=-1;break t}}l=0}if(l){if(o>=s){o=l;break e}o=l*("desc"==i[o]?-1:1);break e}}o=e.b-t.b}return o})}function ue(e){return function(t){return $(t,e)}}function be(e,t){var i="";if(!e||1>t||9007199254740991<t)return i;do{t%2&&(i+=e),(t=Ro(t/2))&&(e+=e)}while(t);return i}function fe(e,t){return Cn(dt(e,t,ii),e+"")}function ye(e,t,i,o){if(!Mt(e))return e;t=xe(t,e);for(var n=-1,r=t.length,a=r-1,s=e;null!=s&&++n<r;){var l=mt(t[n]),d=i;if(n!=a){var c=s[l],d=o?o(c,l,s):di;d===di&&(d=Mt(c)?c:nt(t[n+1])?[]:{})}z(s,l,d),s=s[l]}return e}function ge(e,t,i){var o=-1,n=e.length;for(0>t&&(t=-t>n?0:n+t),i=i>n?n:i,0>i&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0,i=Array(n);++o<n;)i[o]=e[o+t];return i}function we(e,t){var i;return hn(e,function(e,o,n){return!(i=t(e,o,n))}),!!i}function ve(e){if("string"==typeof e)return e;if(Bn(e))return l(e,ve)+"";if(Ut(e))return dn?dn.call(e):"";var t=e+"";return"0"==t&&1/e==-ci?"-0":t}function Ce(e,t,i){var o=-1,n=a,r=e.length,l=!0,d=[],c=d;if(i)l=!1,n=s;else if(200<=r){if(n=t?null:bn(e))return T(n);l=!1,n=_,c=new R}else c=t?[]:d;e:for(;++o<r;){var h=e[o],m=t?t(h):h,h=i||0!==h?h:0;if(l&&m===m){for(var p=c.length;p--;)if(c[p]===m)continue e;t&&c.push(m),d.push(h)}else n(c,m,i)||(c!==d&&c.push(m),d.push(h))}return d}function _e(e,t){return t=xe(t,e),null==(e=2>t.length?e:$(e,ge(t,0,-1)))||delete e[mt(wt(t))]}function Ie(e,t){var i=e;return i instanceof N&&(i=i.value()),c(t,function(e,t){return t.func.apply(t.thisArg,d([e],t.args))},i)}function xe(e,t){return Bn(e)?e:at(e,t)?[e]:_n(Xt(e))}function Ee(e,t,i){var o=e.length;return i=i===di?o:i,!t&&i>=o?e:ge(e,t,i)}function Se(e,t){if(t)return e.slice();var i=e.length,i=To?To(i):new e.constructor(i);return e.copy(i),i}function Te(e){var t=new e.constructor(e.byteLength);return new So(t).set(new So(e)),t}function ke(e,t,i,o){var n=-1,r=e.length,a=i.length,s=-1,l=t.length,d=jo(r-a,0),c=Array(l+d);for(o=!o;++s<l;)c[s]=t[s];for(;++n<a;)(o||n<r)&&(c[i[n]]=e[n]);for(;d--;)c[s++]=e[n++];return c}function Ae(e,t,i,o){var n=-1,r=e.length,a=-1,s=i.length,l=-1,d=t.length,c=jo(r-s,0),h=Array(c+d);for(o=!o;++n<c;)h[n]=e[n];for(c=n;++l<d;)h[c+l]=t[l];for(;++a<s;)(o||n<r)&&(h[c+i[a]]=e[n++]);return h}function Le(e,t){var i=-1,o=e.length;for(t||(t=Array(o));++i<o;)t[i]=e[i];return t}function Oe(e,t,i,o){var n=!i;i||(i={});for(var r=-1,a=t.length;++r<a;){var s=t[r],l=o?o(i[s],e[s],s,i,e):di;l===di&&(l=e[s]),n?q(i,s,l):z(i,s,l)}return i}function Pe(e,t){return Oe(e,yn(e),t)}function Ne(e,t){return Oe(e,gn(e),t)}function Be(e){return fe(function(t,i){var o=-1,n=i.length,r=1<n?i[n-1]:di,a=2<n?i[2]:di,r=3<e.length&&"function"==typeof r?(n--,r):di;for(a&&rt(i[0],i[1],a)&&(r=3>n?di:r,n=1),t=Object(t);++o<n;)(a=i[o])&&e(t,a,o,r);return t})}function De(e,t,i){function o(){return(this&&this!==oo&&this instanceof o?r:e).apply(n?i:this,arguments)}var n=1&t,r=Re(e);return o}function Me(e){return function(t){return c(ei(Jt(t).replace(Wi,"")),e,"")}}function Re(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=cn(e.prototype),t=e.apply(i,t);return Mt(t)?t:i}}function Fe(e,t,o){function n(){for(var a=arguments.length,s=Array(a),l=a,d=Ye(n);l--;)s[l]=arguments[l];return l=3>a&&s[0]!==d&&s[a-1]!==d?[]:S(s,d),a-=l.length,a<o?Ue(e,t,Ve,n.placeholder,di,s,l,di,di,o-a):i(this&&this!==oo&&this instanceof n?r:e,this,s)}var r=Re(e);return n}function Ve(e,t,i,o,n,r,a,s,l,d){function c(){for(var y=arguments.length,g=Array(y),w=y;w--;)g[w]=arguments[w];if(u){var v,C=Ye(c),w=g.length;for(v=0;w--;)g[w]===C&&++v}if(o&&(g=ke(g,o,n,u)),r&&(g=Ae(g,r,a,u)),y-=v,u&&y<d)return C=S(g,C),Ue(e,t,Ve,c.placeholder,i,g,C,s,l,d-y);if(C=m?i:this,w=p?C[e]:e,y=g.length,s){v=g.length;for(var _=Wo(s.length,v),I=Le(g);_--;){var x=s[_];g[_]=nt(x,v)?I[x]:di}}else b&&1<y&&g.reverse();return h&&l<y&&(g.length=l),this&&this!==oo&&this instanceof c&&(w=f||Re(w)),w.apply(C,g)}var h=128&t,m=1&t,p=2&t,u=24&t,b=512&t,f=p?di:Re(e);return c}function ze(e,t,o,n){function r(){for(var t=-1,l=arguments.length,d=-1,c=n.length,h=Array(c+l),m=this&&this!==oo&&this instanceof r?s:e;++d<c;)h[d]=n[d];for(;l--;)h[d++]=arguments[++t];return i(m,a?o:this,h)}var a=1&t,s=Re(e);return r}function Ue(e,t,i,o,n,r,a,s,l,d){var c=8&t,h=c?a:di;a=c?di:a;var m=c?r:di;r=c?di:r,t=(t|(c?32:64))&~(c?64:32),4&t||(t&=-4),n=[e,t,n,m,h,r,a,s,l,d],i=i.apply(di,n);e:for(s=e.name+"",l=en[s],d=go.call(en,s)?l.length:0;d--;)if(c=l[d],null==(h=c.func)||h==e){s=c.name;break e}return l=L[s],"function"==typeof l&&s in N.prototype?e===l?s=!0:(s=fn(l),s=!!s&&e===s[0]):s=!1,s&&vn(i,n),i.placeholder=o,ct(i,e,t)}function je(e){var t=Math[e];return function(e,i){if(e=qt(e),i=null==i?0:Wo(Ht(i),292)){var o=(Xt(e)+"e").split("e"),o=t(o[0]+"e"+(+o[1]+i)),o=(Xt(o)+"e").split("e");return+(o[0]+"e"+(+o[1]-i))}return t(e)}}function We(e,t,i,o){return e===di||Lt(e,bo[i])&&!go.call(o,i)?t:e}function He(e,t,i,o,n,r){var a=1&i,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;if((l=r.get(e))&&r.get(t))return l==t;var l=-1,d=!0,c=2&i?new R:di;for(r.set(e,t),r.set(t,e);++l<s;){var m=e[l],p=t[l];if(o)var u=a?o(p,m,l,t,e,r):o(m,p,l,e,t,r);if(u!==di){if(u)continue;d=!1;break}if(c){if(!h(t,function(e,t){if(!_(c,t)&&(m===e||n(m,e,i,o,r)))return c.push(t)})){d=!1;break}}else if(m!==p&&!n(m,p,i,o,r)){d=!1;break}}return r.delete(e),r.delete(t),d}function qe(e,t,i,o,n,r,a){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!r(new So(e),new So(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return Lt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=x;case"[object Set]":if(s||(s=T),e.size!=t.size&&!(1&o))break;return(i=a.get(e))?i==t:(o|=2,a.set(e,t),t=He(s(e),s(t),o,n,r,a),a.delete(e),t);case"[object Symbol]":if(ln)return ln.call(e)==ln.call(t)}return!1}function Xe(e){return J(e,Zt,yn)}function Ge(e){return J(e,Kt,gn)}function Ye(e){return(go.call(L,"placeholder")?L:e).placeholder}function Ze(){var e=L.iteratee||oi,e=e===oi?le:e;return arguments.length?e(arguments[0],arguments[1]):e}function Ke(e,t){var i=e.__data__,o=typeof t;return("string"==o||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}function Qe(e){for(var t=Zt(e),i=t.length;i--;){var o=t[i],n=e[o];t[i]=[o,n,n===n&&!Mt(n)]}return t}function $e(e,t){var i,o=null==e?di:e[t];return i=!(!Mt(o)||wo&&wo in o)&&(Bt(o)?Io:Bi).test(pt(o)),i?o:di}function Je(e,t,i){t=xe(t,e);for(var o=-1,n=t.length,r=!1;++o<n;){var a=mt(t[o]);if(!(r=null!=e&&i(e,a)))break;e=e[a]}return r||++o!=n?r:!!(n=null==e?0:e.length)&&Dt(n)&&nt(a,n)&&(Bn(e)||Nn(e))}function et(e){var t=e.length,i=e.constructor(t);return t&&"string"==typeof e[0]&&go.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function tt(e){return"function"!=typeof e.constructor||st(e)?{}:cn(ko(e))}function it(i,o,n,r){var a=i.constructor;switch(o){case"[object ArrayBuffer]":return Te(i);case"[object Boolean]":case"[object Date]":return new a(+i);case"[object DataView]":return o=r?Te(i.buffer):i.buffer,new i.constructor(o,i.byteOffset,i.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return o=r?Te(i.buffer):i.buffer,new i.constructor(o,i.byteOffset,i.length);case"[object Map]":return o=r?n(x(i),1):x(i),c(o,e,new i.constructor);case"[object Number]":case"[object String]":return new a(i);case"[object RegExp]":return o=new i.constructor(i.source,Oi.exec(i)),o.lastIndex=i.lastIndex,o;case"[object Set]":return o=r?n(T(i),1):T(i),c(o,t,new i.constructor);case"[object Symbol]":return ln?Object(ln.call(i)):{}}}function ot(e){return Bn(e)||Nn(e)||!!(Po&&e&&e[Po])}function nt(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||Mi.test(e))&&-1<e&&0==e%1&&e<t}function rt(e,t,i){if(!Mt(i))return!1;var o=typeof t;return!!("number"==o?Ot(i)&&nt(t,i.length):"string"==o&&t in i)&&Lt(i[t],e)}function at(e,t){if(Bn(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Ut(e))||vi.test(e)||!wi.test(e)||null!=t&&e in Object(t)}function st(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||bo)}function lt(e,t){return function(i){return null!=i&&i[e]===t&&(t!==di||e in Object(i))}}function dt(e,t,o){return t=jo(t===di?e.length-1:t,0),function(){for(var n=arguments,r=-1,a=jo(n.length-t,0),s=Array(a);++r<a;)s[r]=n[t+r];for(r=-1,a=Array(t+1);++r<t;)a[r]=n[r];return a[t]=o(s),i(e,this,a)}}function ct(e,t,i){var o=t+"";t=Cn;var n,r=ut;return n=(n=o.match(Si))?n[1].split(Ti):[],i=r(n,i),(r=i.length)&&(n=r-1,i[n]=(1<r?"& ":"")+i[n],i=i.join(2<r?", ":" "),o=o.replace(Ei,"{\n/* [wrapped with "+i+"] */\n")),t(e,o)}function ht(e){var t=0,i=0;return function(){var o=Ho(),n=16-(o-i);if(i=o,0<n){if(800<=++t)return arguments[0]}else t=0;return e.apply(di,arguments)}}function mt(e){if("string"==typeof e||Ut(e))return e;var t=e+"";return"0"==t&&1/e==-ci?"-0":t}function pt(e){if(null!=e){try{return yo.call(e)}catch(e){}return e+""}return""}function ut(e,t){return n(mi,function(i){var o="_."+i[0];t&i[1]&&!a(e,o)&&e.push(o)}),e.sort()}function bt(e){if(e instanceof N)return e.clone();var t=new P(e.__wrapped__,e.__chain__);return t.__actions__=Le(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function ft(e,t,i){var o=null==e?0:e.length;return o?(i=null==i?0:Ht(i),0>i&&(i=jo(o+i,0)),m(e,Ze(t,3),i)):-1}function yt(e){return(null==e?0:e.length)?Z(e,1):[]}function gt(e){return e&&e.length?e[0]:di}function wt(e){var t=null==e?0:e.length;return t?e[t-1]:di}function vt(e){return null==e?e:Xo.call(e)}function Ct(e){if(!e||!e.length)return[];var t=0;return e=r(e,function(e){if(Pt(e))return t=jo(e.length,t),!0}),w(t,function(t){return l(e,b(t))})}function _t(e){return e=L(e),e.__chain__=!0,e}function It(e,t){return t(e)}function xt(){return this}function Et(e,t){return(Bn(e)?n:hn)(e,Ze(t,3))}function St(e,t){var i;if("function"!=typeof t)throw new TypeError("Expected a function");return e=Ht(e),function(){return 0<--e&&(i=t.apply(this,arguments)),1>=e&&(t=di),i}}function Tt(e,t,i){function o(t){var i=l,o=d;return l=d=di,u=t,h=e.apply(o,i)}function n(e){var i=e-p;return e-=u,p===di||i>=t||0>i||f&&e>=c}function r(){var e=On();if(n(e))return a(e);var i,o=setTimeout;i=e-u,e=t-(e-p),i=f?Wo(e,c-i):e,m=o(r,i)}function a(e){return m=di,y&&l?o(e):(l=d=di,h)}function s(){var e=On(),i=n(e);if(l=arguments,d=this,p=e,i){if(m===di)return u=e=p,m=setTimeout(r,t),b?o(e):h;if(f)return m=setTimeout(r,t),o(p)}return m===di&&(m=setTimeout(r,t)),h}var l,d,c,h,m,p,u=0,b=!1,f=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return t=qt(t)||0,Mt(i)&&(b=!!i.leading,c=(f="maxWait"in i)?jo(qt(i.maxWait)||0,t):c,y="trailing"in i?!!i.trailing:y),s.cancel=function(){m!==di&&clearTimeout(m),u=0,l=p=d=m=di},s.flush=function(){return m===di?h:a(On())},s}function kt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var o=arguments,n=t?t.apply(this,o):o[0],r=i.cache;return r.has(n)?r.get(n):(o=e.apply(this,o),i.cache=r.set(n,o)||r,o)};return i.cache=new(kt.Cache||M),i}function At(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Lt(e,t){return e===t||e!==e&&t!==t}function Ot(e){return null!=e&&Dt(e.length)&&!Bt(e)}function Pt(e){return Rt(e)&&Ot(e)}function Nt(e){if(!Rt(e))return!1;var t=ee(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Vt(e)}function Bt(e){return!!Mt(e)&&("[object Function]"==(e=ee(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function Dt(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e}function Mt(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Rt(e){return null!=e&&"object"==typeof e}function Ft(e){return"number"==typeof e||Rt(e)&&"[object Number]"==ee(e)}function Vt(e){return!(!Rt(e)||"[object Object]"!=ee(e))&&(null===(e=ko(e))||"function"==typeof(e=go.call(e,"constructor")&&e.constructor)&&e instanceof e&&yo.call(e)==Co)}function zt(e){return"string"==typeof e||!Bn(e)&&Rt(e)&&"[object String]"==ee(e)}function Ut(e){return"symbol"==typeof e||Rt(e)&&"[object Symbol]"==ee(e)}function jt(e){if(!e)return[];if(Ot(e))return zt(e)?A(e):Le(e);if(No&&e[No]){e=e[No]();for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}return t=wn(e),("[object Map]"==t?x:"[object Set]"==t?T:Qt)(e)}function Wt(e){return e?(e=qt(e),e===ci||e===-ci?1.7976931348623157e308*(0>e?-1:1):e===e?e:0):0===e?e:0}function Ht(e){e=Wt(e);var t=e%1;return e===e?t?e-t:e:0}function qt(e){if("number"==typeof e)return e;if(Ut(e))return hi;if(Mt(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=Mt(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(Ii,"");var t=Ni.test(e);return t||Di.test(e)?eo(e.slice(2),t?2:8):Pi.test(e)?hi:+e}function Xt(e){return null==e?"":ve(e)}function Gt(e,t,i){return e=null==e?di:$(e,t),e===di?i:e}function Yt(e,t){return null!=e&&Je(e,t,ie)}function Zt(e){return Ot(e)?V(e):de(e)}function Kt(e){if(Ot(e))e=V(e,!0);else if(Mt(e)){var t,i=st(e),o=[];for(t in e)("constructor"!=t||!i&&go.call(e,t))&&o.push(t);e=o}else{if(t=[],null!=e)for(i in Object(e))t.push(i);e=t}return e}function Qt(e){return null==e?[]:C(e,Zt(e))}function $t(e){return Hn(Xt(e).toLowerCase())}function Jt(e){return(e=Xt(e))&&e.replace(Ri,mo).replace(Hi,"")}function ei(e,t,i){return e=Xt(e),t=i?di:t,t===di?Yi.test(e)?e.match(Xi)||[]:e.match(ki)||[]:e.match(t)||[]}function ti(e){return function(){return e}}function ii(e){return e}function oi(e){return le("function"==typeof e?e:X(e,1))}function ni(e,t,i){var o=Zt(t),r=Q(t,o);null!=i||Mt(t)&&(r.length||!o.length)||(i=t,t=e,e=this,r=Q(t,Zt(t)));var a=!(Mt(i)&&"chain"in i&&!i.chain),s=Bt(e);return n(r,function(i){var o=t[i];e[i]=o,s&&(e.prototype[i]=function(){var t=this.__chain__;if(a||t){var i=e(this.__wrapped__);return(i.__actions__=Le(this.__actions__)).push({func:o,args:arguments,thisArg:e}),i.__chain__=t,i}return o.apply(e,d([this.value()],arguments))})}),e}function ri(){}function ai(e){return at(e)?b(mt(e)):ue(e)}function si(){return[]}function li(){return!1}var di,ci=1/0,hi=NaN,mi=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],pi=/\b__p\+='';/g,ui=/\b(__p\+=)''\+/g,bi=/(__e\(.*?\)|\b__t\))\+'';/g,fi=/[&<>"']/g,yi=RegExp(fi.source),gi=/<%=([\s\S]+?)%>/g,wi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vi=/^\w*$/,Ci=/^\./,_i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ii=/^\s+|\s+$/g,xi=/\s+$/,Ei=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Si=/\{\n\/\* \[wrapped with (.+)\] \*/,Ti=/,? & /,ki=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ai=/\\(\\)?/g,Li=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Oi=/\w*$/,Pi=/^[-+]0x[0-9a-f]+$/i,Ni=/^0b[01]+$/i,Bi=/^\[object .+?Constructor\]$/,Di=/^0o[0-7]+$/i,Mi=/^(?:0|[1-9]\d*)$/,Ri=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fi=/($^)/,Vi=/['\n\r\u2028\u2029\\]/g,zi="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",Ui="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+zi,ji="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",Wi=RegExp("['’]","g"),Hi=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),qi=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+ji+zi,"g"),Xi=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)|\\d+",Ui].join("|"),"g"),Gi=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Yi=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zi={};Zi["[object Float32Array]"]=Zi["[object Float64Array]"]=Zi["[object Int8Array]"]=Zi["[object Int16Array]"]=Zi["[object Int32Array]"]=Zi["[object Uint8Array]"]=Zi["[object Uint8ClampedArray]"]=Zi["[object Uint16Array]"]=Zi["[object Uint32Array]"]=!0,Zi["[object Arguments]"]=Zi["[object Array]"]=Zi["[object ArrayBuffer]"]=Zi["[object Boolean]"]=Zi["[object DataView]"]=Zi["[object Date]"]=Zi["[object Error]"]=Zi["[object Function]"]=Zi["[object Map]"]=Zi["[object Number]"]=Zi["[object Object]"]=Zi["[object RegExp]"]=Zi["[object Set]"]=Zi["[object String]"]=Zi["[object WeakMap]"]=!1;var Ki={};Ki["[object Arguments]"]=Ki["[object Array]"]=Ki["[object ArrayBuffer]"]=Ki["[object DataView]"]=Ki["[object Boolean]"]=Ki["[object Date]"]=Ki["[object Float32Array]"]=Ki["[object Float64Array]"]=Ki["[object Int8Array]"]=Ki["[object Int16Array]"]=Ki["[object Int32Array]"]=Ki["[object Map]"]=Ki["[object Number]"]=Ki["[object Object]"]=Ki["[object RegExp]"]=Ki["[object Set]"]=Ki["[object String]"]=Ki["[object Symbol]"]=Ki["[object Uint8Array]"]=Ki["[object Uint8ClampedArray]"]=Ki["[object Uint16Array]"]=Ki["[object Uint32Array]"]=!0,Ki["[object Error]"]=Ki["[object Function]"]=Ki["[object WeakMap]"]=!1;var Qi,$i={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ji=parseFloat,eo=parseInt,to="object"==typeof global&&global&&global.Object===Object&&global,io="object"==typeof self&&self&&self.Object===Object&&self,oo=to||io||Function("return this")(),no="object"==typeof exports&&exports&&!exports.nodeType&&exports,ro=no&&"object"==typeof module&&module&&!module.nodeType&&module,ao=ro&&ro.exports===no,so=ao&&to.process;e:{try{Qi=so&&so.binding&&so.binding("util");break e}catch(e){}Qi=void 0}var lo=Qi&&Qi.isRegExp,co=Qi&&Qi.isTypedArray,ho=b("length"),mo=f({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),po=f({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),uo=Array.prototype,bo=Object.prototype,fo=oo["__core-js_shared__"],yo=Function.prototype.toString,go=bo.hasOwnProperty,wo=function(){var e=/[^.]+$/.exec(fo&&fo.keys&&fo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),vo=bo.toString,Co=yo.call(Object),_o=oo._,Io=RegExp("^"+yo.call(go).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xo=ao?oo.Buffer:di,Eo=oo.Symbol,So=oo.Uint8Array,To=xo?xo.allocUnsafe:di,ko=E(Object.getPrototypeOf,Object),Ao=Object.create,Lo=bo.propertyIsEnumerable,Oo=uo.splice,Po=Eo?Eo.isConcatSpreadable:di,No=Eo?Eo.iterator:di,Bo=Eo?Eo.toStringTag:di,Do=function(){try{var e=$e(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Mo=Math.ceil,Ro=Math.floor,Fo=Object.getOwnPropertySymbols,Vo=xo?xo.isBuffer:di,zo=uo.join,Uo=E(Object.keys,Object),jo=Math.max,Wo=Math.min,Ho=Date.now,qo=Math.random,Xo=uo.reverse,Go=$e(oo,"DataView"),Yo=$e(oo,"Map"),Zo=$e(oo,"Promise"),Ko=$e(oo,"Set"),Qo=$e(oo,"WeakMap"),$o=$e(Object,"create"),Jo=Qo&&new Qo,en={},tn=pt(Go),on=pt(Yo),nn=pt(Zo),rn=pt(Ko),an=pt(Qo),sn=Eo?Eo.prototype:di,ln=sn?sn.valueOf:di,dn=sn?sn.toString:di,cn=function(){function e(){}return function(t){return Mt(t)?Ao?Ao(t):(e.prototype=t,t=new e,e.prototype=di,t):{}}}();L.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:gi,variable:"",imports:{_:L}},L.prototype=O.prototype,L.prototype.constructor=L,P.prototype=cn(O.prototype),P.prototype.constructor=P,N.prototype=cn(O.prototype),N.prototype.constructor=N,B.prototype.clear=function(){this.__data__=$o?$o(null):{},this.size=0},B.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},B.prototype.get=function(e){var t=this.__data__;return $o?(e=t[e],"__lodash_hash_undefined__"===e?di:e):go.call(t,e)?t[e]:di},B.prototype.has=function(e){var t=this.__data__;return $o?t[e]!==di:go.call(t,e)},B.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=$o&&t===di?"__lodash_hash_undefined__":t,this},D.prototype.clear=function(){this.__data__=[],this.size=0},D.prototype.delete=function(e){var t=this.__data__;return!(0>(e=U(t,e))||(e==t.length-1?t.pop():Oo.call(t,e,1),--this.size,0))},D.prototype.get=function(e){var t=this.__data__;return e=U(t,e),0>e?di:t[e][1]},D.prototype.has=function(e){return-1<U(this.__data__,e)},D.prototype.set=function(e,t){var i=this.__data__,o=U(i,e);return 0>o?(++this.size,i.push([e,t])):i[o][1]=t,this},M.prototype.clear=function(){this.size=0,this.__data__={hash:new B,map:new(Yo||D),string:new B}},M.prototype.delete=function(e){return e=Ke(this,e).delete(e),this.size-=e?1:0,e},M.prototype.get=function(e){return Ke(this,e).get(e)},M.prototype.has=function(e){return Ke(this,e).has(e)},M.prototype.set=function(e,t){var i=Ke(this,e),o=i.size;return i.set(e,t),this.size+=i.size==o?0:1,this},R.prototype.add=R.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},R.prototype.has=function(e){return this.__data__.has(e)},F.prototype.clear=function(){this.__data__=new D,this.size=0},F.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},F.prototype.get=function(e){return this.__data__.get(e)},F.prototype.has=function(e){return this.__data__.has(e)},F.prototype.set=function(e,t){var i=this.__data__;if(i instanceof D){var o=i.__data__;if(!Yo||199>o.length)return o.push([e,t]),this.size=++i.size,this;i=this.__data__=new M(o)}return i.set(e,t),this.size=i.size,this};var hn=function(e,t){return function(i,o){if(null==i)return i;if(!Ot(i))return e(i,o);for(var n=i.length,r=t?n:-1,a=Object(i);(t?r--:++r<n)&&!1!==o(a[r],r,a););return i}}(K),mn=function(e){return function(t,i,o){var n=-1,r=Object(t);o=o(t);for(var a=o.length;a--;){var s=o[e?a:++n];if(!1===i(r[s],s,r))break}return t}}(),pn=Jo?function(e,t){return Jo.set(e,t),e}:ii,un=Do?function(e,t){return Do(e,"toString",{configurable:!0,enumerable:!1,value:ti(t),writable:!0})}:ii,bn=Ko&&1/T(new Ko([,-0]))[1]==ci?function(e){return new Ko(e)}:ri,fn=Jo?function(e){return Jo.get(e)}:ri,yn=Fo?function(e){return null==e?[]:(e=Object(e),r(Fo(e),function(t){return Lo.call(e,t)}))}:si,gn=Fo?function(e){for(var t=[];e;)d(t,yn(e)),e=ko(e);return t}:si,wn=ee;(Go&&"[object DataView]"!=wn(new Go(new ArrayBuffer(1)))||Yo&&"[object Map]"!=wn(new Yo)||Zo&&"[object Promise]"!=wn(Zo.resolve())||Ko&&"[object Set]"!=wn(new Ko)||Qo&&"[object WeakMap]"!=wn(new Qo))&&(wn=function(e){var t=ee(e);if(e=(e="[object Object]"==t?e.constructor:di)?pt(e):"")switch(e){case tn:return"[object DataView]";case on:return"[object Map]";case nn:return"[object Promise]";case rn:return"[object Set]";case an:return"[object WeakMap]"}return t});var vn=ht(pn),Cn=ht(un),_n=function(e){e=kt(e,function(e){return 500===t.size&&t.clear(),e});var t=e.cache;return e}(function(e){var t=[];return Ci.test(e)&&t.push(""),e.replace(_i,function(e,i,o,n){t.push(o?n.replace(Ai,"$1"):i||e)}),t}),In=fe(function(e,t){return Pt(e)?G(e,Z(t,1,Pt,!0)):[]}),xn=fe(function(e,t){var i=wt(t);return Pt(i)&&(i=di),Pt(e)?G(e,Z(t,1,Pt,!0),Ze(i,2)):[]}),En=fe(function(e){return Ce(Z(e,1,Pt,!0))}),Sn=fe(function(e){var t=wt(e);return Pt(t)&&(t=di),Ce(Z(e,1,Pt,!0),Ze(t,2))}),Tn=fe(Ct);!function(e){Cn(dt(e,di,yt),e+"")}(function(e){var t=e.length,i=t?e[0]:0,o=this.__wrapped__,n=function(t){for(var i=-1,o=e.length,n=Array(o),r=null==t;++i<o;)n[i]=r?di:Gt(t,e[i]);return n};return!(1<t||this.__actions__.length)&&o instanceof N&&nt(i)?(o=o.slice(i,+i+(t?1:0)),o.__actions__.push({func:It,args:[n],thisArg:di}),new P(o,this.__chain__).thru(function(e){return t&&!e.length&&e.push(di),e})):this.thru(n)});var kn=function(e){return function(t,i,o){var n=Object(t);if(!Ot(t)){var r=Ze(i,3);t=Zt(t),i=function(e){return r(n[e],e,n)}}return i=e(t,i,o),-1<i?n[r?t[i]:i]:di}}(ft),An=function(e,t){return function(i,n){var r=Bn(i)?o:j,a=t?t():{};return r(i,e,Ze(n,2),a)}}(function(e,t,i){go.call(e,i)?e[i].push(t):q(e,i,[t])}),Ln=fe(function(e,t){if(null==e)return[];var i=t.length;return 1<i&&rt(e,t[0],t[1])?t=[]:2<i&&rt(t[0],t[1],t[2])&&(t=[t[0]]),pe(e,Z(t,1),[])}),On=function(){return oo.Date.now()};kt.Cache=M;var Pn=fe(function(e,t){var i=S(t,Ye(Pn)),o=e,n=32,r=di,a=t,s=i,l=void 0,d=void 0,c=2&n;if(!c&&"function"!=typeof o)throw new TypeError("Expected a function");var h=a?a.length:0;if(h||(n&=-97,a=s=di),l=l===di?l:jo(Ht(l),0),d=d===di?d:Ht(d),h-=s?s.length:0,64&n)var m=a,p=s,a=s=di;return i=c?di:fn(o),m=[o,n,r,a,s,m,p,void 0,l,d],i&&(r=m[1],o=i[1],n=r|o,a=128==o&&8==r||128==o&&256==r&&m[7].length<=i[8]||384==o&&i[7].length<=i[8]&&8==r,131>n||a)&&(1&o&&(m[2]=i[2],n|=1&r?0:4),(r=i[3])&&(a=m[3],m[3]=a?ke(a,r,i[4]):r,m[4]=a?S(m[3],"__lodash_placeholder__"):i[4]),(r=i[5])&&(a=m[5],m[5]=a?Ae(a,r,i[6]):r,m[6]=a?S(m[5],"__lodash_placeholder__"):i[6]),(r=i[7])&&(m[7]=r),128&o&&(m[8]=null==m[8]?i[8]:Wo(m[8],i[8])),null==m[9]&&(m[9]=i[9]),m[0]=i[0],m[1]=n),o=m[0],n=m[1],r=m[2],a=m[3],s=m[4],d=m[9]=m[9]===di?c?0:o.length:jo(m[9]-h,0),!d&&24&n&&(n&=-25),c=n&&1!=n?8==n||16==n?Fe(o,n,d):32!=n&&33!=n||s.length?Ve.apply(di,m):ze(o,n,r,a):De(o,n,r),ct((i?pn:vn)(c,m),o,n)}),Nn=oe(function(){return arguments}())?oe:function(e){return Rt(e)&&go.call(e,"callee")&&!Lo.call(e,"callee")},Bn=Array.isArray,Dn=Vo||li,Mn=lo?v(lo):ae,Rn=co?v(co):se,Fn=Be(function(e,t){if(st(t)||Ot(t))Oe(t,Zt(t),e);else for(var i in t)go.call(t,i)&&z(e,i,t[i])}),Vn=Be(function(e,t){Oe(t,Kt(t),e)}),zn=Be(function(e,t,i,o){Oe(t,Kt(t),e,o)}),Un=fe(function(e){return e.push(di,We),i(zn,di,e)}),jn=Me(function(e,t,i){return t=t.toLowerCase(),e+(i?$t(t):t)}),Wn=Me(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),Hn=function(e){return function(t){t=Xt(t);var i=Gi.test(t)?A(t):di,o=i?i[0]:t.charAt(0);return t=i?Ee(i,1).join(""):t.slice(1),o[e]()+t}}("toUpperCase"),qn=fe(function(e,t){try{return i(e,di,t)}catch(e){return Nt(e)?e:Error(e)}}),Xn=function(e){return function(t,i,o){o&&"number"!=typeof o&&rt(t,i,o)&&(i=o=di),t=Wt(t),i===di?(i=t,t=0):i=Wt(i),o=o===di?t<i?1:-1:Wt(o);var n=-1;i=jo(Mo((i-t)/(o||1)),0);for(var r=Array(i);i--;)r[e?i:++n]=t,t+=o;return r}}(),Gn=je("floor"),Yn=je("round");L.assign=Fn,L.assignIn=Vn,L.assignInWith=zn,L.before=St,L.chain=_t,L.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),i=arguments[0];e--;)t[e-1]=arguments[e];return d(Bn(i)?Le(i):[i],Z(t,1))},L.constant=ti,L.debounce=Tt,L.defaults=Un,L.difference=In,L.differenceBy=xn,L.filter=function(e,t){return(Bn(e)?r:Y)(e,Ze(t,3))},L.flatten=yt,L.groupBy=An,L.iteratee=oi,L.keys=Zt,L.keysIn=Kt,L.map=function(e,t){return(Bn(e)?l:ce)(e,Ze(t,3))},L.memoize=kt,L.mixin=ni,L.negate=At,L.once=function(e){return St(2,e)},L.partial=Pn,L.property=ai,L.range=Xn,L.remove=function(e,t){var i=[];if(!e||!e.length)return i;var o=-1,n=[],r=e.length;for(t=Ze(t,3);++o<r;){var a=e[o];t(a,o,e)&&(i.push(a),n.push(o))}for(o=e?n.length:0,r=o-1;o--;)if(a=n[o],o==r||a!==s){var s=a;nt(a)?Oo.call(e,a,1):_e(e,a)}return i},L.reverse=vt,L.set=function(e,t,i){return null==e?e:ye(e,t,i)},L.setWith=function(e,t,i,o){return o="function"==typeof o?o:di,null==e?e:ye(e,t,i,o)},L.sortBy=Ln,L.split=function(e,t,i){return i&&"number"!=typeof i&&rt(e,t,i)&&(t=i=di),i=i===di?4294967295:i>>>0,i?(e=Xt(e))&&("string"==typeof t||null!=t&&!Mn(t))&&!(t=ve(t))&&Gi.test(e)?Ee(A(e),0,i):e.split(t,i):[]},L.tap=function(e,t){return t(e),e},L.throttle=function(e,t,i){var o=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Mt(i)&&(o="leading"in i?!!i.leading:o,n="trailing"in i?!!i.trailing:n),Tt(e,t,{leading:o,maxWait:t,trailing:n})},L.thru=It,L.toArray=jt,L.toPath=function(e){return Bn(e)?l(e,mt):Ut(e)?[e]:Le(_n(Xt(e)))},L.union=En,L.unionBy=Sn,L.uniq=function(e){return e&&e.length?Ce(e):[]},L.unset=function(e,t){return null==e||_e(e,t)},L.unzip=Ct,L.values=Qt,L.words=ei,L.zip=Tn,L.extend=Vn,L.extendWith=zn,ni(L,L),L.attempt=qn,L.camelCase=jn,L.capitalize=$t,L.clone=function(e){return X(e,4)},L.cloneDeep=function(e){return X(e,5)},L.deburr=Jt,L.eq=Lt,L.escape=function(e){return(e=Xt(e))&&yi.test(e)?e.replace(fi,po):e},L.find=kn,L.findIndex=ft,L.floor=Gn,L.forEach=Et,L.get=Gt,L.has=function(e,t){return null!=e&&Je(e,t,te)},L.hasIn=Yt,L.head=gt,L.identity=ii,L.indexOf=function(e,t,i){var o=null==e?0:e.length;return o?(i=null==i?0:Ht(i),0>i&&(i=jo(o+i,0)),p(e,t,i)):-1},L.isArguments=Nn,L.isArray=Bn,L.isArrayLike=Ot,L.isArrayLikeObject=Pt,L.isBuffer=Dn,L.isEmpty=function(e){if(null==e)return!0;if(Ot(e)&&(Bn(e)||"string"==typeof e||"function"==typeof e.splice||Dn(e)||Rn(e)||Nn(e)))return!e.length;var t=wn(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(st(e))return!de(e).length;for(var i in e)if(go.call(e,i))return!1;return!0},L.isError=Nt,L.isFunction=Bt,L.isLength=Dt,L.isNaN=function(e){return Ft(e)&&e!=+e},L.isNil=function(e){return null==e},L.isNull=function(e){return null===e},L.isNumber=Ft,L.isObject=Mt,L.isObjectLike=Rt,L.isPlainObject=Vt,L.isRegExp=Mn,L.isString=zt,L.isSymbol=Ut,L.isTypedArray=Rn,L.isUndefined=function(e){return e===di},L.join=function(e,t){return null==e?"":zo.call(e,t)},L.kebabCase=Wn,L.last=wt,L.stubArray=si,L.stubFalse=li,L.noConflict=function(){return oo._===this&&(oo._=_o),this},L.noop=ri,L.now=On,L.padStart=function(e,t,i){e=Xt(e);var o=(t=Ht(t))?k(e):0;return t&&o<t&&(t-=o,i=i===di?" ":ve(i),o=i.length,2>o?t=o?be(i,t):i:(o=be(i,Mo(t/k(i))),t=Gi.test(i)?Ee(A(o),0,t).join(""):o.slice(0,t)),e=t+e),e},L.random=function(e,t,i){if(i&&"boolean"!=typeof i&&rt(e,t,i)&&(t=i=di),i===di&&("boolean"==typeof t?(i=t,t=di):"boolean"==typeof e&&(i=e,e=di)),e===di&&t===di?(e=0,t=1):(e=Wt(e),t===di?(t=e,e=0):t=Wt(t)),e>t){var o=e;e=t,t=o}return i||e%1||t%1?(i=qo(),Wo(e+i*(t-e+Ji("1e-"+((i+"").length-1))),t)):e+Ro(qo()*(t-e+1))},L.reduce=function(e,t,i){var o=Bn(e)?c:y,n=3>arguments.length;return o(e,Ze(t,4),i,n,hn)},L.result=function(e,t,i){t=xe(t,e);var o=-1,n=t.length;for(n||(n=1,e=di);++o<n;){var r=null==e?di:e[mt(t[o])];r===di&&(o=n,r=i),e=Bt(r)?r.call(e):r}return e},L.round=Yn,L.size=function(e){if(null==e)return 0;if(Ot(e))return zt(e)?k(e):e.length;var t=wn(e);return"[object Map]"==t||"[object Set]"==t?e.size:de(e).length},L.some=function(e,t,i){var o=Bn(e)?h:we;return i&&rt(e,t,i)&&(t=di),o(e,Ze(t,3))},L.startsWith=function(e,t,i){if(e=Xt(e),null==i)i=0;else{i=Ht(i);var o=e.length;i===i&&(o!==di&&(i=i<=o?i:o),0!==di&&(i=0<=i?i:0))}return t=ve(t),e.slice(i,i+t.length)==t},L.template=function(e,t,i){var o=L.templateSettings;i&&rt(e,t,i)&&(t=di),e=Xt(e),t=zn({},t,o,We),i=zn({},t.imports,o.imports,We);var n,r,a=Zt(i),s=C(i,a),l=0;i=t.interpolate||Fi;var d="__p+='",c="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(RegExp((t.escape||Fi).source+"|"+i.source+"|"+(i===gi?Li:Fi).source+"|"+(t.evaluate||Fi).source+"|$","g"),function(t,i,o,a,s,c){return o||(o=a),d+=e.slice(l,c).replace(Vi,I),i&&(n=!0,d+="'+__e("+i+")+'"),s&&(r=!0,d+="';"+s+";\n__p+='"),o&&(d+="'+((__t=("+o+"))==null?'':__t)+'"),l=c+t.length,t}),d+="';",(t=t.variable)||(d="with(obj){"+d+"}"),d=(r?d.replace(pi,""):d).replace(ui,"$1").replace(bi,"$1;"),d="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(n?",__e=_.escape":"")+(r?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+d+"return __p}",t=qn(function(){return Function(a,c+"return "+d).apply(di,s)}),t.source=d,Nt(t))throw t;return t},L.toFinite=Wt,L.toInteger=Ht,L.toLower=function(e){return Xt(e).toLowerCase()},L.toNumber=qt,L.toString=Xt,L.trimEnd=function(e,t,i){if((e=Xt(e))&&(i||t===di))return e.replace(xi,"");if(!e||!(t=ve(t)))return e;for(e=A(e),t=A(t),i=e.length;i--&&-1<p(t,e[i],0););return Ee(e,0,i+1).join("")},L.upperFirst=Hn,L.each=Et,L.first=gt,ni(L,function(){var e={};return K(L,function(t,i){go.call(L.prototype,i)||(e[i]=t)}),e}(),{chain:!1}),L.VERSION="4.17.4",Pn.placeholder=L,n(["drop","take"],function(e,t){N.prototype[e]=function(i){i=i===di?1:jo(Ht(i),0);var o=this.__filtered__&&!t?new N(this):this.clone();return o.__filtered__?o.__takeCount__=Wo(i,o.__takeCount__):o.__views__.push({size:Wo(i,4294967295),type:e+(0>o.__dir__?"Right":"")}),o},N.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),n(["filter","map","takeWhile"],function(e,t){var i=t+1,o=1==i||3==i;N.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ze(e,3),type:i}),t.__filtered__=t.__filtered__||o,t}}),n(["head","last"],function(e,t){var i="take"+(t?"Right":"");N.prototype[e]=function(){return this[i](1).value()[0]}}),n(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");N.prototype[e]=function(){return this.__filtered__?new N(this):this[i](1)}}),N.prototype.compact=function(){return this.filter(ii)},N.prototype.find=function(e){return this.filter(e).head()},N.prototype.findLast=function(e){return this.reverse().find(e)},N.prototype.invokeMap=fe(function(e,t){return"function"==typeof e?new N(this):this.map(function(o){var n=e,n=xe(n,o);return o=2>n.length?o:$(o,ge(n,0,-1)),n=null==o?o:o[mt(wt(n))],null==n?di:i(n,o,t)})}),N.prototype.reject=function(e){return this.filter(At(Ze(e)))},N.prototype.slice=function(e,t){e=Ht(e);var i=this;return i.__filtered__&&(0<e||0>t)?new N(i):(0>e?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==di&&(t=Ht(t),i=0>t?i.dropRight(-t):i.take(t-e)),i)},N.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},N.prototype.toArray=function(){return this.take(4294967295)},K(N.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),n=L[o?"take"+("last"==t?"Right":""):t],r=o||/^find/.test(t);n&&(L.prototype[t]=function(){var t=this.__wrapped__,a=o?[1]:arguments,s=t instanceof N,l=a[0],c=s||Bn(t),h=function(e){return e=n.apply(L,d([e],a)),o&&m?e[0]:e};c&&i&&"function"==typeof l&&1!=l.length&&(s=c=!1);var m=this.__chain__,p=!!this.__actions__.length,l=r&&!m,s=s&&!p;return!r&&c?(t=s?t:new N(this),t=e.apply(t,a),t.__actions__.push({func:It,args:[h],thisArg:di}),new P(t,m)):l&&s?e.apply(this,a):(t=this.thru(h),l?o?t.value()[0]:t.value():t)})}),n("pop push shift sort splice unshift".split(" "),function(e){var t=uo[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);L.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var n=this.value();return t.apply(Bn(n)?n:[],e)}return this[i](function(i){return t.apply(Bn(i)?i:[],e)})}}),K(N.prototype,function(e,t){var i=L[t];if(i){var o=i.name+"";(en[o]||(en[o]=[])).push({name:t,func:i})}}),en[Ve(di,2).name]=[{name:"wrapper",func:di}],N.prototype.clone=function(){var e=new N(this.__wrapped__);return e.__actions__=Le(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Le(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Le(this.__views__),e},N.prototype.reverse=function(){if(this.__filtered__){var e=new N(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},N.prototype.value=function(){var e,t=this.__wrapped__.value(),i=this.__dir__,o=Bn(t),n=0>i,r=o?t.length:0;e=0;for(var a=r,s=this.__views__,l=-1,d=s.length;++l<d;){var c=s[l],h=c.size;switch(c.type){case"drop":e+=h;break;case"dropRight":a-=h;break;case"take":a=Wo(a,e+h);break;case"takeRight":e=jo(e,a-h)}}if(e={start:e,end:a},a=e.start,s=e.end,e=s-a,a=n?s:a-1,s=this.__iteratees__,l=s.length,d=0,c=Wo(e,this.__takeCount__),!o||!n&&r==e&&c==e)return Ie(t,this.__actions__);o=[];e:for(;e--&&d<c;){for(a+=i,n=-1,r=t[a];++n<l;){var m=s[n],h=m.type,m=(0,m.iteratee)(r);if(2==h)r=m;else if(!m){if(1==h)continue e;break e}}o[d++]=r}return o},L.prototype.chain=function(){return _t(this)},L.prototype.commit=function(){return new P(this.value(),this.__chain__)},L.prototype.next=function(){this.__values__===di&&(this.__values__=jt(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?di:this.__values__[this.__index__++]}},L.prototype.plant=function(e){for(var t,i=this;i instanceof O;){var o=bt(i);o.__index__=0,o.__values__=di,t?n.__wrapped__=o:t=o;var n=o,i=i.__wrapped__}return n.__wrapped__=e,t},L.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof N?(this.__actions__.length&&(e=new N(this)),e=e.reverse(),e.__actions__.push({func:It,args:[vt],thisArg:di}),new P(e,this.__chain__)):this.thru(vt)},L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=function(){return Ie(this.__wrapped__,this.__actions__)},L.prototype.first=L.prototype.head,No&&(L.prototype[No]=xt),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(oo._=L,define(function(){return L})):ro?((ro.exports=L)._=L,no._=L):oo._=L}.call(this),window.Cbola._=_.noConflict(),Cbola.tmp_&&(window._=Cbola.tmp_),Cbola.tmp_=null;var CryptoJSCbola=CryptoJSCbola||function(e,t){var i={},o=i.lib={},n=o.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var i=new e;return t&&i.mixIn(t),i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=o.WordArray=n.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes,e=e.sigBytes;if(this.clamp(),o%4)for(var n=0;n<e;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-n%4*8&255)<<24-(o+n)%4*8;else if(65535<i.length)for(n=0;n<e;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;o<t;o+=4)i.push(4294967296*e.random()|0);return r.create(i,t)}}),a=i.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;o<e;o++){var n=t[o>>>2]>>>24-o%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return r.create(i,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;o<e;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return r.create(i,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=o.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,a=this.blockSize,s=n/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*a,n=e.min(4*t,n);if(t){for(var l=0;l<t;l+=a)this._doProcessBlock(o,l);l=o.splice(0,t),i.sigBytes-=n}return r.create(l,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=c.extend({init:function(){this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,i){return e.create(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return h.HMAC.create(e,i).finalize(t)}}});var h=i.algo={};return i}(Math);!function(e){function t(e,t,i,o,n,r,a){return((e=e+(t&i|~t&o)+n+a)<<r|e>>>32-r)+t}function i(e,t,i,o,n,r,a){return((e=e+(t&o|i&~o)+n+a)<<r|e>>>32-r)+t}function o(e,t,i,o,n,r,a){return((e=e+(t^i^o)+n+a)<<r|e>>>32-r)+t}function n(e,t,i,o,n,r,a){return((e=e+(i^(t|~o))+n+a)<<r|e>>>32-r)+t}var r=CryptoJSCbola,a=r.lib,s=a.WordArray,a=a.Hasher,l=r.algo,d=[];!function(){for(var t=0;64>t;t++)d[t]=4294967296*e.abs(e.sin(t+1))|0}(),l=l.MD5=a.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(var a=0;16>a;a++){var s=r+a,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}for(var s=this._hash.words,l=s[0],c=s[1],h=s[2],m=s[3],a=0;64>a;a+=4)16>a?(l=t(l,c,h,m,e[r+a],7,d[a]),m=t(m,l,c,h,e[r+a+1],12,d[a+1]),h=t(h,m,l,c,e[r+a+2],17,d[a+2]),c=t(c,h,m,l,e[r+a+3],22,d[a+3])):32>a?(l=i(l,c,h,m,e[r+(a+1)%16],5,d[a]),m=i(m,l,c,h,e[r+(a+6)%16],9,d[a+1]),h=i(h,m,l,c,e[r+(a+11)%16],14,d[a+2]),c=i(c,h,m,l,e[r+a%16],20,d[a+3])):48>a?(l=o(l,c,h,m,e[r+(3*a+5)%16],4,d[a]),m=o(m,l,c,h,e[r+(3*a+8)%16],11,d[a+1]),h=o(h,m,l,c,e[r+(3*a+11)%16],16,d[a+2]),c=o(c,h,m,l,e[r+(3*a+14)%16],23,d[a+3])):(l=n(l,c,h,m,e[r+3*a%16],6,d[a]),m=n(m,l,c,h,e[r+(3*a+7)%16],10,d[a+1]),h=n(h,m,l,c,e[r+(3*a+14)%16],15,d[a+2]),c=n(c,h,m,l,e[r+(3*a+5)%16],21,d[a+3]));s[0]=s[0]+l|0,s[1]=s[1]+c|0,s[2]=s[2]+h|0,s[3]=s[3]+m|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;for(t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process(),e=this._hash.words,t=0;4>t;t++)i=e[t],e[t]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}}),r.MD5=a._createHelper(l),r.HmacMD5=a._createHmacHelper(l)}(Math);var CryptoJSCbola=CryptoJSCbola||function(e,t){var i={},o=i.lib={},n=o.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var i=new e;return t&&i.mixIn(t),i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=o.WordArray=n.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes,e=e.sigBytes;if(this.clamp(),o%4)for(var n=0;n<e;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-n%4*8&255)<<24-(o+n)%4*8;else if(65535<i.length)for(n=0;n<e;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;o<t;o+=4)i.push(4294967296*e.random()|0);return r.create(i,t)}}),a=i.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;o<e;o++){var n=t[o>>>2]>>>24-o%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return r.create(i,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;o<e;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return r.create(i,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=o.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,a=this.blockSize,s=n/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*a,n=e.min(4*t,n);if(t){for(var l=0;l<t;l+=a)this._doProcessBlock(o,l);l=o.splice(0,t),i.sigBytes-=n}return r.create(l,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=c.extend({init:function(){this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,i){return e.create(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return h.HMAC.create(e,i).finalize(t)}}});var h=i.algo={};return i}(Math);if(function(){var e=CryptoJSCbola,t=e.lib,i=t.WordArray,t=t.Hasher,o=[],n=e.algo.SHA1=t.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],a=i[2],s=i[3],l=i[4],d=0;80>d;d++){if(16>d)o[d]=0|e[t+d];else{var c=o[d-3]^o[d-8]^o[d-14]^o[d-16];o[d]=c<<1|c>>>31}c=(n<<5|n>>>27)+l+o[d],c=20>d?c+(1518500249+(r&a|~r&s)):40>d?c+(1859775393+(r^a^s)):60>d?c+((r&a|r&s|a&s)-1894007588):c+((r^a^s)-899497514),l=s,s=a,a=r<<30|r>>>2,r=n,n=c}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+s|0,i[4]=i[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[15+(o+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process()}});e.SHA1=t._createHelper(n),e.HmacSHA1=t._createHmacHelper(n)}(),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}if("function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(e){e.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),void 0===document.hidden)for(var vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&void 0===document.hidden;++x)document.hidden=window[vendors[x]+"Hidden"];!function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var o=(new Date).getTime(),n=Math.max(0,16-(o-e)),r=window.setTimeout(function(){t(o+n)},n);return e=o+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}),Cbola.EventBus=Cbola.EventBus||window.document.createElement("span"),Cbola.EventBus.fire=function(e,t){var i=new CustomEvent(e,{detail:t});Cbola.EventBus.dispatchEvent(i)},Cbola.EventBus.Events={ELEMENT_FAILED:"ElementFailed",FOCUS_CHANGE:"FocusedChange",GET_ADS_READY:"GetAdsReady",LAYER_READY:"LayerReadyEvent",PAGE_ELEMENTS_DATA_RECEIVED:"PageElementsDataReceived",PAGE_VISIBILITY_CHANGE:"PageVisibilityChange",PLATFORM_INITIALIZED:"PlatformInitialized",USER_ID_SET:"UserIDSet",ADS_STORES_MANGER_ADDED_SIZES:"AdsStoresManagerAddedSizes_",ADS_STORES_MANAGER_READY:"AdsStoresManagerReady_",COVERING_TRIGGER_ON:"coveringTriggerOn_",COVERING_TRIGGER_OFF:"coveringTriggerOff_",LAYER_ATTACHED:"LayerAttached_",LAYER_IS_VIEWABLE:"LayerBecameViewable_",OBSERVER_VIEWABLE:"ObserverViewable_",OBSERVER_NON_VIEWABLE:"ObserverNonViewable_",PAGE_LOAD_FALLBACK:"PageLoadFallback_",RESIZE_ON_AD:"ResizeOnAd_",SKIP_SPOT:"SkipSpot_",STORY_CLICKED:"StoryClicked_",STORY_TIMER_ENDED:"StoryTimerEnded_",TIMER_ENDED:"TimerEnded_",TRIVIA_BEFORE_END:"triviaBeforeEnd_",TRIGGER_IS_VIEWABLE:"TriggerBecameViewable_"},window.Cbola=window.Cbola||{},Cbola.Enums=Cbola.Enums||{ProductTypes:{IN_IMAGE:1,IN_CONTENT:2,IN_IMAGE_PENDING:101},ServerCallTypes:{CDN:0,SERVER:1},IntegrationTypes:{ERROR:0,NORMAL:1,DFP:2,SAFE_FRAME:3,IFRAME:4},SetClickTypes:{ITEM_LINK:1,FEEDBACK_ICON_ON:2,FEEDBACK_ICON_OFF:3,FEEDBACK_ICON_CLOSE:4,FEEDBACK_STARS_1:5,FEEDBACK_STARS_2:6,FEEDBACK_STARS_3:7,FEEDBACK_STARS_4:8,FEEDBACK_STARS_5:9,CARAMBOLA_ICON:10,SHARE_BEFORE_FACEBOOK:11,SHARE_BEFORE_TWITTER:12,SHARE_AFTER_FACEBOOK:13,SHARE_AFTER_TWITTER:14,AD_BUTTON_CLOSE:15,SHARE_BEFORE_WHATSAPP:16,SHARE_LANDSCAPE_WHATSAPP:18,SHARE_LANDSCAPE_FACEBOOK:19,SHARE_LANDSCAPE_TWITTER:20,ENDING_SCREEN_OUT:21,FOOTER_AD_BUTTON_CLOSE:22,SPONSORED_LINK_CLICK_ENDING_SCREEN:24,SPONSORED_LINK_CLICK_ENDING_SCREEN_AUTOPLAY:25,SPONSORED_LINK_CLICK_IN_ITEM:26,SPONSORED_LINK_CLICK_IN_ITEM_AUTOPLAY:27,TWITTER_REPLY:28,TWITTER_STAR:29,TWITTER_RETWEET:30,TWITTER_FOLLOW:31,TWITTER_TWEET_IMAGE_CLICK:32},RefreshTypes:{NONE:0,CLICK:1,TIMEOUT:2,BOTH:3,VIEWABILITY:4},AdTriggerTypes:{INJECT_PSA:0,PAGE_LOAD:1,TIMEOUT:2,CLICK:3,APPERANCE:4,URL_CHANGE:5,REFRESH_PSA:6,WF_FALLBACK:7,REFRESH_CONFIANT_BLOCK:8,REFRESH_AD_LIGHTNING_BLOCK:9},BlockedAdTriggerTypes:{CONFIANT_BLOCK:1,AD_LIGHTNING_BLOCK:2},LoadStatusTypes:{SUCCESS:1,MAX_ELEMS_REACHED:8,GET_ADS_FAILED:9,AD_SERVER_DOWN:10,GET_ADS_MAX_RETRY:15,SELECTOR_NOT_FOUND:18,SELECTOR_TOO_SMALL:19,SAME_ID_WIDGETS:21,EXTERNAL_CONTENT_FAILED:25},ItemViewTypes:{ON_HOVER:1,ON_NEXT_BTN:2,ON_PREV_BTN:3,VIEWABILITY:4,IN_IFRAME:5,UNVIEWABILITY:6,ENDING_SCREEN:7,AD:8,ON_NEXT_AUTOPLAY:9,SPONSORED_ENDING_SCREEN:10,SPONSORED_LINK_CLICK:11,ENDING_SCREEN_AUTOPLAY:12,SPONSORED_ENDING_SCREEN_AUTOPLAY:13,AD_AUTOPLAY:14,SPONSORED_IN_ITEM_SCREEN:15,SPONSORED_IN_ITEM_SCREEN_AUTOPLAY:16,AUTOPLAY_CAROUCEL_COMPLETED:17,NONE:255},PageRequestTypes:{ERROR:0,PAGE_VIEW:1,NOT_FOUND:2,PENDING:3,NO_ELEMS_FOUND:4,NO_CONTENT_FOUND:5,UNKNOWN_PUBLISHER:6,UNSUPPORTED_DOMAIN:7,MOBILE:8,AUTOMATION_FAILED:9,HOMEPAGE:10,REVISER:11,UNSUPPORTED_BROWSER:12,DIV_TOO_SMALL:13,CORRUPTED_JSON:14,BLOCKED_MOBILE:15,NO_SHOW_META:16,BLOCKED_DESKTOP:17,BLOCKED_TABLET:18,ADS_ONLY:19,INITIALIZE_FAILED:21,NO_PLACEHOLDER_FOUND:22,NO_CONTENT_TEMPLATE_FOUND:23,HIDDEN_IFRAME:24,BLOCKED_KNOWN_SAFE_FRAME:25,GET_ELEMENTS_ERROR:255},teaserTriggerTypes:{TIMEOUT:1,VIEWABILITY:2},isServerCallTypes:{FROM_CDN:0,FROM_SERVER:1},HeaderBiddingRequestStatus:{SUCCESS:1,TIMEOUT:2,FAIL:3,REQUEST_MADE:10,HIGH_TIER_FILLED:11,REQUEST_LOW_TIER_MADE:12,LOW_TIER_FILLED:13},TagExtractionTypes:{APPEND:1,POSTSCRIBE:2,WRITECAPTURE:3,POSTSCRIBE_ONLY:4,SRCDOC_IFRAME:5,BILIMBI:6,WRITE_IFRAME:7,CONFIANT_IFRAME:8,AD_LIGHTNING_IFRAME:9},AdOpenBehaviors:{TIMER:1,ENGAGEMENT:2,VIEWABLE:3,HOVER_ON_UNIT:4,PAGE_LOAD:5},AdCloseBehaviors:{TIMER:1,ENGAGEMENT:2,VIEWABLE:3,HOVER_ON_UNIT:4},AbTests:{NO_LAYER:9999,NO_ADS:9998,ADS_ON_PAGE_LOAD:9997,BASE_PAGE_LOAD:9996,LAYER_ON_PAGE_LOAD:9995},SetEventTypes:{PAGE_LOAD_EVENT:150},UnitLoadTypes:{ASYNC:1,DOM_LOADED:2,PAGE_LOAD:3},ConsentStatusTypes:{IAB_STANDARD_CMP_FOUND:10,GOOGLE_FUNDING_CHOICES_FOUND:98}},window.Cbola=window.Cbola||{},Cbola.Config=function(){var e=Cbola,t=e._,i={query:{qa:"//qa_api.carambo.la/inimage/server/",prod:"//content.carambo.la/"},analytics:{qa:"//qa_api.carambo.la/inimage/analytics/",prod:"//analytics.carambo.la/"},pageAnalytics:{qa:"//qa_api.carambo.la/inimage/analytics/",prod:"//analytics.carambo.la/"},logging:{qa:"//qa_api.carambo.la/inimage/logging/",prod:"//logging.carambo.la/"},CDN:{qa:"//qa.inimage.carambo.la/",prod:"//inimage.carambo.la/"},EX_CDN:{qa:"//qaex-data.carambo.la/",prod:"//ex-data.carambo.la/"},ads:{qa:"//qa.adserver.carambo.la/",prod:"//xtr.carambo.la/"},extraContent:{qa:"//qa-excontent.carambo.la/",prod:"//excontent.carambo.la/"}},o=function(){var e=Cbola,t=e.Utils,cbolaConfig={};void 0===n.abTestId&&(n.abTestId=t.getUrlParams()["cbolaabtest"],n.abTestId?n.abTestId=parseInt(n.abTestId):(cbolaConfig.abTestId=1,n.abTestId=cbolaConfig.abTestId))},n={Language:{english:"en",spanish:"es",portuguese:"pt",russian:"ru",french:"fr",japanese:"ja",german:"de"},maxParentElementsCheckWidth:5,adTypeVideo:1,abTestSkipContent:!1,errorAdAlreadySent:!1,extractTypeAds:0,checkPendingICscriptsTimeLength:25,urlsForAuto:[],writeCaptureAlreadySet:!1,getAdsCheckElementRetries:100,findICSelectorElementMaxRetries:80,ZIndexLayers:0,sendToPostScribeAgain:0,MaxWidgets:999,inContentFallbackWidths:[440,300],currentElementsSum:0,dateTimeWhenScriptExecute:"cbolaDt",proxyId:"carambola_proxy",inContentClass:"carambola_InContent",placeholderClass:"carambola-layer-placeholder",bitlyUrl:"",icDefaultMainTitle:"Did you know?",checkPlatformLocation:!0,errorMessage:"",adBelowSideBarMargin:1,adBelowSlideShowMargin:10,brandRedirect_default:"https://www.carambola.com/",adTitleStructureTriviaHeight:14,adBelowInContentExtraMargin:3,adAsideOfUnitExtraMargin:5,timeouts:{pendingBeforeSkippingHeaderBidding:5e3,pendingHeaderBiddingResponseBrake:200,pendingIndexExchangeBuffer:250},autoSlideFirst:!0,autoSlideFirst_openAfterSecs:3e3,autoSlideFirst_closeAfterSecs:6e3,layouts:{inContent:{all:[100,101,102,110,112,120,121,160,170],facts:[100,101,102,110,112],trivia:[120],triviaMulti:[121],twitter:[160],indices:[170]},sideBars:{all:[130,131,132,133,134,135,136,137,138,139,140,150,151,152,153],facts:[130,131,132,133,136,152],diedOnThisDay:[134,150],diedOnThisWeek:[151],onThisDay:[135,137,153],trivia:[140],staticBanner:[130,131,133,134,135,140],teaserBanner:[132],sidebarSlideshow:[136,137],storiesSlideshow:[138,139],slideShow:[150,151,152,153]},mobile:{all:[1e3,1100,1400],facts:[1e3,1100],trivia:[1400]}},clientPaths:{0:{path:"//cdata.carambo.la/Layer/InImage/Prod/cbola_platform/version_",sfPath:"//safeframe.carambo.la/Layer/InImage/Prod/cbola_platform/version_",isMin:!0,withVersion:!0},1:{path:"//qa1.carambo.la/inimage/versions",isMin:!0,withVersion:!1},2:{path:"//cdata.carambo.la/Layer/InImage/QA/cbola_platform/version_",sfPath:"//safeframe.carambo.la/Layer/InImage/QA/cbola_platform/version_",isMin:!0,withVersion:!0},3:{path:"//10.0.0.17/platform",isMin:!1,withVersion:!1},5:{path:"//localhost:9000/platform",isMin:!1,withVersion:!1},6:{path:"//localhost:9000/platform",isMin:!1,withVersion:!1},7:{path:"//qa1.carambo.la/inimage/versions",isMin:!1,withVersion:!1},11:{path:"//qa1.carambo.la/inimage/mobile",isMin:!1,withVersion:!1},100:{path:"//qa1.carambo.la/inimage/margeversions",isMin:!0,withVersion:!1},110:{path:"//localhost:9000",isMin:!0,withVersion:!1},120:{path:"//10.0.0.170:9000",isMin:!0,withVersion:!1},31:{alias:1},36:{alias:6},12:{alias:11}},init:function(){var e=this,r=Cbola.Utils;this.layouts.all=[],t.forEach(this.layouts,function(i){t.get(i,"all")&&r.push.apply(e.layouts.all,i.all)});var a=n.layouts;this.triggersDictionary={1:{supportedLayers:a.inContent.trivia},2:{supportedLayers:a.inContent.trivia.concat(a.inContent.triviaMulti)},3:{supportedLayers:a.inContent.trivia.concat(a.inContent.triviaMulti)},4:{supportedLayers:a.inContent.trivia.concat(a.inContent.triviaMulti)},5:{supportedLayers:a.inContent.triviaMulti},6:{supportedLayers:a.inContent.trivia.concat(a.inContent.triviaMulti)},7:{supportedLayers:a.inContent.trivia.concat(a.inContent.triviaMulti)},11:{supportedLayers:a.sideBars.slideShow,translatedTo:1},12:{supportedLayers:a.sideBars.slideShow},14:{supportedLayers:a.sideBars.staticBanner.concat(a.sideBars.sidebarSlideshow,a.sideBars.storiesSlideshow),translatedTo:4},15:{supportedLayers:a.sideBars.slideShow,translatedTo:20},18:{supportedLayers:a.sideBars.teaserBanner,translatedTo:8},19:{supportedLayers:a.sideBars.staticBanner.concat(a.sideBars.sidebarSlideshow,a.sideBars.storiesSlideshow),translatedTo:9},20:{supportedLayers:a.sideBars.staticBanner.concat(a.sideBars.teaserBanner,a.sideBars.sidebarSlideshow,a.sideBars.storiesSlideshow)},21:{supportedLayers:a.sideBars.staticBanner.concat(a.sideBars.sidebarSlideshow)},22:{supportedLayers:a.sideBars.slideShow},23:{supportedLayers:a.sideBars.storiesSlideshow},54:{supportedLayers:a.inContent.facts,translatedTo:4},56:{supportedLayers:a.inContent.facts,translatedTo:6},57:{supportedLayers:a.inContent.facts,translatedTo:7},58:{supportedLayers:a.inContent.facts,translatedTo:8},62:{supportedLayers:a.inContent.twitter,translatedTo:22},64:{supportedLayers:a.inContent.twitter,translatedTo:4},68:{supportedLayers:a.inContent.twitter,translatedTo:20},69:{supportedLayers:a.inContent.trivia,translatedTo:20},73:{supportedLayers:a.inContent.indices,translatedTo:23},200:{supportedLayers:a.mobile.all},204:{supportedLayers:a.mobile.all},209:{supportedLayers:a.mobile.all},300:{supportedLayers:a.all}};var s={adServer_method:"GetAds",queryServer:i.query.prod,analyticsServer:i.analytics.prod,pageAnalyticsServer:i.pageAnalytics.prod,loggingServer:i.logging.prod,CDN:i.CDN.prod,EX_CDN:i.EX_CDN.prod,adServer:i.ads.prod,extraContent:i.extraContent.prod};"1"===Cbola.Env.queryServer||"qa"===Cbola.Env.queryServer||"3"===Cbola.Env.queryServer?(s.CDN=i.CDN.qa,s.EX_CDN=i.EX_CDN.qa,s.queryServer=i.query.qa,s.extraContent=i.extraContent.qa,s.adServer=i.ads.qa,s.analyticsServer=i.analytics.qa,s.pageAnalyticsServer=i.pageAnalytics.qa,s.loggingServer=i.logging.qa,void 0!==Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(s.adServer=i.ads.prod,s.adServer_method="GetExtraContent"),"3"===Cbola.Env.queryServer&&(s.CDN="//s3.amazonaws.com/qa.inimage.carambo.la/")):void 0!==Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(s.adServer=i.ads.prod,s.adServer_method="GetExtraContent"),o(),30!==n.abTestId&&31!==n.abTestId&&32!==n.abTestId||(s.loggingServer=i.logging.prod,31!==n.abTestId&&32!==n.abTestId||(s.queryServer=i.query.prod,s.extraContent=i.extraContent.prod),32===n.abTestId&&(s.adServer=i.ads.prod)),t.extend(this,{Defaults:s}),n.brandRedirectTemplate=t.template(n.brandRedirect_default+"?cf=unt<%= layerType %>_"+Cbola.Env.domainId),n.brandContactRedirectTemplate=t.template(n.brandRedirect_default+"?cf=unt<%= layerType %>_"+Cbola.Env.domainId+"#ContactUsSection")},getLayersDefaultSize:t.memoize(function(e){switch(e){case 100:case 101:case 110:return{height:270,width:640};case 102:case 112:return{height:250,width:640};case 120:case 121:return{height:250,width:650};case 130:case 131:return{height:350,width:300};case 132:return{height:600,width:300};case 133:case 134:case 135:return{height:350,width:300};case 136:case 137:case 138:case 139:return{height:340,width:300};case 140:return{height:350,width:300};case 150:case 151:case 152:case 153:return{height:250,width:300};case 160:return{height:90,width:728};case 170:return{height:"auto",width:606};case 1400:case 1100:case 1e3:return{height:"inherit",width:0};default:return{height:230,width:100}}}),getLayersDefaultSizeForIframe:t.memoize(function(e){switch(e){case 100:case 101:case 102:case 110:case 112:return{height:270,width:450};case 120:return"pgtr56"===Cbola.Env.activePid?{height:250,width:500}:{height:265,width:500};case 121:return{height:250,width:500};case 130:case 131:case 133:case 134:case 135:return{height:350,width:300};case 136:case 137:case 138:case 139:return{height:340,width:300};case 140:return{height:350,width:300};case 150:case 151:case 152:case 153:return{height:250,width:300};case 160:return{height:90,width:600};case 170:return{height:105,width:606};case 1e3:case 1100:return"lgcy81"===Cbola.Env.activePid||"lgcy42"===Cbola.Env.activePid?{height:455,width:-1}:{height:500,width:-1};case 1400:return{height:516,width:300};default:return{height:230,width:100}}}),getLayerMinSizes:t.memoize(function(e){switch(e){case 100:case 101:case 110:return{width:440,height:270};case 102:case 112:return{width:440,height:250};case 120:return{width:500,height:250};case 121:return{width:480,height:250};case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 137:case 138:case 140:return{width:300,height:350};case 150:case 151:case 152:case 153:return{width:300,height:250};case 160:return{width:545,height:90};case 170:return{width:606,height:105};case 1e3:case 1100:case 1400:return{width:0,height:0};default:return{width:440,height:250}}}),jsonRegEx:{0:"[\\?&]utm_",110587:"#~[a-zA-Z0-9]{14}",110461:"\\?(?!cctn)|;grp=|;kvstate=|;kvfirstname=|;kvlastname=|#",110760:"[\\?&]wpvqas=",110775:"#|\\?li_|\\?cbolaGameSet",110735:"\\?gclid=|#|/ml/1/e/",110729:"\\?gclid=|#|/ml/1/e/",110663:"#|\\?_|\\?fb_",110733:"\\?fb_|\\?gclid=|#|/ml/1/e/",111799:"#axzz",111814:"\\?|/[0-9]{8}",110744:"\\?gclid=|#|/ml/1/e/",110695:"\\?gclid=|#|/ml/1/e/",110730:"\\?gclid=|#|/ml/1/e/",110746:"\\?gclid=|#|/ml/1/e/",110728:"\\?gclid=|#|/ml/1/e/",110726:"\\?gclid=|#|/ml/1/e/",110737:"\\?gclid=|#|/ml/1/e/",110694:"\\?gclid=|#|/ml/1/e/",110738:"\\?gclid=|#|/ml/1/e/",111843:"\\?gclid=|#|/ml/1/e/",110740:"\\?gclid=|#|/ml/1/e/",110732:"\\?gclid=|#|/ml/1/e/",112323:"userid=",112230:"\\?pctx=",112268:"gclid=",112433:"[\\?&]utm_|#",110396:"\\?storyurl=",110577:"\\?|#|/wiki/",110681:"&qp=|&ticketid=",112227:"\\?pmcode|\\?_cmp=|\\?p=|\\?trkid=",110535:"\\?icid=",112441:"[\\?&]feed|[\\?&]wigetarticlelistfile=",112460:"\\?|&c.|&did.",112454:"&c.",112455:"&c.",112457:"&c.",112458:"&c.",112459:"&c.",112469:"&c.",112470:"&c.",112471:"&c.",112472:"&c.",112519:"&c.",112520:"&c.",112540:"&c.",112551:"/217|/218|/219|/220|/[0-9]{9}\\?new=true",112451:"\\?trkid=",112630:"/[a-zA-Z0-9]{8}$|/[a-zA-Z0-9]{7}$|/[a-zA-Z0-9]{6}$|/[a-zA-Z0-9]{5}$|/a/|/gallery/|/r/|/t/|/user/",112390:"/unscramble/",112476:"&userid=",112647:"\\?|#",112665:"&geom=|&rf=|&p=",112550:"/[0-9]{9}\\?new=true",110727:"/ml/1/e/",112663:"/gampad/ads",112732:"\\?ord=",112760:"[\\?&]puc=|\\?_ga=|\\?hash=",112606:"\\?chr=",112632:"_activity_context=|u_audio=|a3dwebglbanner=",112751:"\\?et_rid=",112777:"\\?message_id=",112733:"/centerx:|/shipid:",112623:"\\?",112355:"\\?|&",112842:"\\/[0-9]{4}\\/|\\/[0-9]{5}\\/|\\/[0-9]{6}\\/|\\/[0-9]{7}\\/|\\/[0-9]{8}\\/",112752:"\\?",112845:"\\b/.*$",112846:"\\b/.*$",113007:"\\?"},srcUrlEnabledDids:[110006,112389,112485]};return n}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.Cbola=window.Cbola||{},Cbola.Utils=function(){var e=window.requestAnimationFrame,t=Cbola,i=t._,o=t.Config,n=navigator.userAgent,r="Utils",a=99999,s=1e4,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=i.partial(i.padStart,i,2,"0"),o=new Date;return t(o.getDate())+t(o.getMonth()+1)+t(o.getFullYear()%100)+t(o.getHours())+t(o.getMinutes())+t(o.getSeconds())+t(o.getMilliseconds()%100)+e},d={isFacebookBrowser:/\[FB.*;(FBAV)\/(\d+)(?:\.(\d+)(?:\.(\d)+)?)?/g.test(n)||/(facebookexternalhit)\/(\d+)\.(\d+)/g.test(n),isIOS:/iPad|iPhone|iPod/g.test(n),isIE:/(msie\s)|(trident.*rv\:)|(edge\/)/gi.test(n),isFirefox:/firefox/gi.test(n),isMobile:/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/gi.test(n)&&-1===n.search("PC"),isTablet:i.memoize(function(){var e=/ipad|a1_07|a1-810|a1-811|a1-830|a3000-h|a3300-hv|a3500-f|a3500-fl|a3500-h|a3-a10|a5500-f|a5500-h|a7600-f|a7600-h|android 3|archos 101|archos 80g9|aries_785|arnova 101|at100|at10-a|at200|at300|b1-710|b1-711|b1-730|b1-770|b1-780|b1-810|b1-830|b1-850|b1-a71|b6000-f|b6000-h|b8000-f|b8000-h|b8080-f|b8080-h|bn nookhd+|bnrv200|bntv250|bntv250a|bntv400|bntv450|bntv600|breeze 10|cm_tenderloin|dell streak 7|dl1010q|e2281|e-tab ivory|gt-n5100|gt-n5110|gt-n8000|gt-n8010|gt-n8013|gt-n8020|gt-p1000|gt-p1010|gt-p3100|gt-p3110|gt-p3113|gt-p5100|gt-p5110|gt-p5113|gt-p5200|gt-p5210|gt-p5220|gt-p7300|gt-p7310|gt-p7500|gt-p7510|hpwos|hudl 2|ideapad|ideatab|k00e|k00f|k010|k011|k012|k017|k01a|kfapwa |kfapwi|kfarwi|kfaswi|kfauwi|kfdowi|kffowi|kfgiwi|kfjwa|kfjwi|kfmewi|kfot|kfsawa|kfsawi|kfsowi|kfsuwi|kftbwi|kfthwa|kfthwi|kftt|kindle|lguk410|lguk750|lguk932|lg-v400|lg-v410|lg-v490|lg-v495|lg-v496|lg-v497|lg-v500|lg-v520|lg-v521|lg-v522|lg-v700|lg-v930|lifetab|m532|me172v|me173x|me301t|me302c|me302kl|me371mg|mediapad|memo pad|micromax_a101|mz601|mz604|nexus 10|nexus 7|nx008hd8g|nx16a10132s|nx16a11264|nx16a8116k|nx700qc|nx785qc8g|nxa116qc164|nxa8qc116|onda v989|p310a|p310x|p320x|padfone|playbook|pmp5580c|pmp7280c3g|pmt3377_wi|pmt7077_3g|qmv7a|qmv7b|qtair7|qtaqz3|qv830|rct6103w46|rct6203w46|rct6213w87dk|rct6213w87m|rct6303w87dk|rct6303w87m|rct6513w87|rct6573w23|rct6603w47m7|rct6603w87m7|rct6703w13|rct6773w22|rct6773w42b|rct6873w42m|rct6973w43|rct6k03w13|s5000-f|s5000-h|s6000l-f|s920_row|sch-i705|sch-i800|sch-i915|sch-i925|sgh-i467|sgh-i497|sgh-i777|sgp311|sgp312|sgp321|sgp511|sgp512|sgp521|sgp561|sgp611|sgp612|sgp621|sgp712|sgp771|sgpt12|sgpt13|shv-e210k|slider sl101|smart tab|sm-p550|sm-p600|sm-p605|sm-p900|sm-p905|sm-t\d\d\d|tab 2 a10-70f|tab 2 a7-30hc|tab 2 a8-50f|tab 2 a8-50lc|tab s8-50f|tab2a7-10f|tab2a7-20f|tablet|tb2-x30f|tb3-710f|tb3-710i|tb3-850f|tb3-850m|tb3-x70f|tb-8504f|tb-8704f|tb-x103f|tb-x304f|tc802a|tf300t|tf700t|touchpad|tf201|tf101|venue 7 3730|venue 7 hspa+|venue 8 3830|venue 8 7840|venue 8 hspa+|vk810 4g|vk815|vodafone smart ii|xolo a700|xoom|yb1-x90f|yoga b6000-f|yoga b8000-f|yt3-850f|yt3-x50f|yt3-x90f|yt-x703f|zaffire 1010/i.test(n.toLowerCase());return e&&(Cbola.Env.PageProperties.isMobile=!1),e&&-1===n.search("PC")}),getRunTimeInSecs:function(){var e=Math.abs(((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime())/1e3);return Math.floor(100*e)/100},getRunTimeInMilis:function(){return Math.abs((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime())+"ms"},generateViewId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if(t<e){var i=e;e=t,t=i}var o=Math.random();return l(e+Math.round(o*(t-e)))},generateDoubleRandomViewID:function(){var e=s.toString().split("").length,t=[3,2].reduce(function(t,i){return t+=Math.round((s+Math.random()*(a-s))/Math.pow(10,e-i))},"");return l(t)},replaceAll:function(e,t,o){return i.isEmpty(o)?o:o.replace(new RegExp(e,"g"),t)},chromeVersion:i.memoize(function(){var e=n.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):0}),setGlobalRedirectTime:function(){var e=Cbola.Common.LocalStorageService,t=Cbola.Env.PageProperties,i=e.getItem(o.dateTimeWhenScriptExecute)||"";e.removeItem(o.dateTimeWhenScriptExecute);var n=i.split("&"),r=n.pop();t.publisherScriptExecutionTime=r?parseInt(r):null;var a=t.publisherScriptExecutionTime?t.startDateFileUploaded.getTime()-t.publisherScriptExecutionTime:0;return Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_BLUE,"Redirection server duration: "+a+"ms"),a},getZIndexForElement:function(){var e=o.ZIndexLayer-o.ZIndexLayers;return o.ZIndexLayers+=1,e<1&&(e=0===o.ZIndexLayer?0:1),e},checkIfQueryStingExist:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Cbola.Env.PageProperties,r=e.ParentId,a=this.getUrlParams()["cbolagameset"],s=n.originalPathNameHost;if(parseInt(a)===r)return s;if(i.isNumber(r)&&(s=n.originalPathNameHost+(n.originalPathNameHost.indexOf("?")>-1?"&":"?")+"cbolaGameSet="+r),o.urlsForAuto.indexOf(s)>-1)return s;if(t){o.urlsForAuto.push(s);var l={PublisherId:Cbola.Env.activePid,UrlData:{Url:s.toLowerCase(),Hash_128_Bit:CryptoJSCbola.MD5(s.toLowerCase()).toString(),Hash_160_Bit:CryptoJSCbola.SHA1(s.toLowerCase()).toString()},AbTestId:o.abTestId,IsMobile:n.isMobile,IsTablet:n.isTablet,CategoryId:Cbola.Env.Category,Tags:Cbola.Env.tags,Title:Cbola.Env.title,Body:Cbola.Env.body},d=JSON.stringify(l);Cbola.Logger.getInstance().info("Cbola_getPageElements_forAutomation start. json: "+d),fetch(o.Defaults.queryServer+"GetInContentInfo",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:d})}return s},checkImageLoaded:function(e){var t=new Image;t.src=e,t.onload=function(){},t.onerror=function(){Cbola.Logger.getInstance().errorM(r+".checkImageLoaded","Image not loaded. src: "+e)}},checkUrlParamExist:function(e){return window.location.href.toLowerCase().search(e)>-1},getLocationHref:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t="getLocationHref",o="";try{var n=!0;do{this.isAboutBlankIframe(e)||this.isKnownSafeFrame(e)?(o=e.document.referrer,e.frameElement?e=e.parent:n=!1):n=!1}while(n)}catch(e){Cbola.Logger.getInstance().errorM(r+"."+t,r+"."+t+" failed getting referrer URL outside an iframe. error: ",e)}return i.isEmpty(o)?e.location.href:o},getLowerLocationHref:function(){return this.getLocationHref().toLowerCase()},queryStringCut:function(){var e=this.getLowerLocationHref();if(/[I,i]gnr/.test(e)){var t=e.split("?");return o.queryString=t[1],o.ignoreQueryString=!0,t[0]}o.queryString="",o.ignoreQueryString=!1;var n=document.querySelector('meta[property="carambola"]');return!/[d,D]irty/.test(e)&&n?i.toLower(n.getAttribute("content")):e},queryStringCutRegex:function(){var e=this.queryStringCut();try{var t=Cbola.Env.domainId;if(null!==t&&t>0){var i=o.jsonRegEx,n=i[t]||i[0];if(n){var r=e.search(new RegExp(n,"ig"));-1!==r&&(e=e.substring(0,r))}}}catch(e){Cbola.Logger.getInstance().info(e)}return e},isInIframe:i.memoize(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{return window.top!==e}catch(e){return!0}}),isFriendlyIframe:i.memoize(function(){if(this.isInIframe())try{if(window.frameElement)return!0;if("undefined"!=typeof inDapIF&&inDapIF)return!0}catch(e){return!1}return!1}),isWindowTopSupported:i.memoize(function(){if(this.isFriendlyIframe())try{if(window.top.document)return!0}catch(e){return!1}return!1}),isKnownSafeFrame:i.memoize(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=["tpc.googlesyndication.com","pubads.g.doubleclick.net","partner.googleadservices.com"];try{return this.isInIframe(e)&&new RegExp(t.join("|"),"gi").test(e.location.href)}catch(e){return!1}}),isAboutBlankIframe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{return this.isInIframe(e)&&/about:blank/gi.test(e.location.href)}catch(e){return!1}},getCurrentAbTestId:function(){return o.abTestSkipContent?1:o.abTestId},cumulativeOffset:function(e){var t=0,i=0;do{var o=0,n=0;if(window.getComputedStyle&&window.WebKitCSSMatrix){var r=getComputedStyle(e).transform||getComputedStyle(e).webkitTransform,a=new WebKitCSSMatrix(r);o=a.m41,n=a.m42}t+=e.offsetTop+n||0,i+=e.offsetLeft+o||0,e=e.offsetParent}while(e);return{top:t,left:i}},getPrevSibling:function(e){for(var t=e.previousSibling;t;){if(t.nodeType===Node.ELEMENT_NODE)return t;t=t.previousSibling}return null},fixPixelHeight:function(e){try{var t=this.getPrevSibling(e);"img"===t.tagName.toLowerCase()&&t.src.indexOf("pixel.watch")>-1&&(t.style["display"]="block")}catch(e){}},detectDeviceOrientation:function(){var e=void 0,t=void 0,i=document.getElementsByClassName("cbola-orientation-src");if(i.length>0)i=i[0],e=Math.max(i.clientWidth,0),t=Math.max(i.clientHeight,0);else{var o=window;window!==window.parent&&(o=window.parent);try{e=o.innerWidth||o.document.documentElement.clientWidth||o.document.body.clientWidth,t=o.innerHeight||o.document.documentElement.clientHeight||o.document.body.clientHeight}catch(i){o=window,e=o.innerWidth||o.document.documentElement.clientWidth||o.document.body.clientWidth,t=o.innerHeight||o.document.documentElement.clientHeight||o.document.body.clientHeight}}return e>t?(Cbola.Env.PageProperties.isPortrait=!1,"landscape"):(Cbola.Env.PageProperties.isPortrait=!0,"portrait")},injectStyle:function(e,t){var i=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(i),i.styleSheet)i.styleSheet.disabled||(i.styleSheet.cssText=t);else try{i.innerHTML=t}catch(e){i.textContent=t}return i},initPayload:function(){var e=Cbola.Env,t=this.getCurrentAbTestId();return{PublisherId:e.activePid,UrlData:{Url:e.PageProperties.hostname,Hash_128_Bit:e.PageProperties.urlHashMD5,Hash_160_Bit:e.PageProperties.urlHashSHA1},AbTestId:t,ScriptDomainId:Cbola.Env.domainId,IsMobile:e.PageProperties.isMobile,IsTablet:e.PageProperties.isTablet}},isGoogleWebLightAgent:i.memoize(function(){return/^.*?\bAndroid\b.*?\bgoogleweblight\b.*?$/.test(n)}),updateEnv:function(e){Cbola.Env=i.extend(Cbola.Env,e);var t={PageId:0,Category:0,Domain:0};i.defaults(Cbola.Env,t),i.extendWith(o,e.DefaultSettings,function(e,t){return void 0===t?e:t})},parseBool:function(e){return!0===e||"true"===e||"number"==typeof e&&0!==e},dataset:function(){if(arguments.length<2)return null;var e=arguments.length<=0?void 0:arguments[0];if(!e)return null;var t=arguments.length<=1?void 0:arguments[1];return arguments.length>2&&(e.dataset?e.dataset[i.camelCase(t)]=arguments.length<=2?void 0:arguments[2]:e.setAttribute("data-"+i.kebabCase(t),arguments.length<=2?void 0:arguments[2])),e.dataset?e.dataset[i.camelCase(t)]||null:e.getAttribute("data-"+i.kebabCase(t))},datasetRemove:function(e,t){e.dataset?delete e.dataset[i.camelCase(t)]:e.removeAttribute("data-"+i.kebabCase(t))},getUrlParams:function(){var e={};try{e=this.getParamsFromUrl(window.top.location.href)}catch(t){e=this.getParamsFromUrl(window.location.href)}return e},integrationTypeCheck:function(){var e=Cbola.Enums.IntegrationTypes;try{return this.isInIframe()?this.isFriendlyIframe()?e.DFP:this.isKnownSafeFrame()?e.SAFE_FRAME:e.IFRAME:e.NORMAL}catch(t){return e.ERROR}},validateRGBArray:function(e){if(!i.isArray(e)||3!==e.length)return null;e=e.map(function(e){return parseInt(e)});for(var t=0;t<e.length;t++)if(isNaN(e[t])||e[t]<0||e[t]>255)return null;return e},rgbStringToArray:function(e){if("string"!=typeof e)return null;var t=e.indexOf("("),i=e.indexOf(")");if(-1===t||-1===i)return null;var o=e.substring(t+1,i).split(",");return this.validateRGBArray(o)},rgbToRgba:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.rgbStringToArray(e);return null===i?null:(i.splice(3,i.length,t),"rgba("+i.join(",")+")")},rgbToHSL:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=void 0,n=void 0,r=0,a=0,s=0;if(1===t.length){var l=this.rgbStringToArray(t[0]);if(null===l)return null;o=l[0]/255,n=l[1]/255,r=l[2]/255}else{if(3!==t.length)return null;if(null===(t=this.validateRGBArray(t)))return null;o=t[0]/255,n=t[1]/255,r=t[2]/255}var d=Math.min(o,n,r),c=Math.max(o,n,r),h=(d+c)/2,m=c-d;if(m){switch(s=h<.5?m/(c+d):m/(2-c-d),s=Math.round(100*s),c){case o:a=(n-r)/m;break;case n:a=2+(r-o)/m;break;case r:a=4+(o-n)/m}a=Math.round(60*a+(a<0?360:0))}return h=Math.round(100*h),{h:a,s:s,l:h}},generateGradientBreaksFromRGB:function(e,t){var o=d.rgbToHSL(e);if(i.isNil(o))return null;for(var n=90,r=o.l,a=.25*(n-r),s=[],l=0;l<t;l++){var c=r;l<t-1&&(c=r+Math.round(a),a/=2),s.push("hsla("+o.h+","+o.s+"%,"+c+"%, "+(0===l?.5:1)+")")}return s},replaceCommentWithElement:function(e,t,i){if(t.nodeType===Node.COMMENT_NODE&&t.textContent.trim()===e)return t.parentNode.replaceChild(i,t),!0;for(var o=t.firstChild;o;){if(this.replaceCommentWithElement(e,o,i))return!0;o=o.nextSibling}return!1},before:function(e,t){e.parentNode.insertBefore(t,e)},after:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},preappend:function(e,t){e.insertBefore(t,e.firstChild)},encodePayload:function(e){function t(e,o,n){var r=void 0,a=i.isArray(o),s=i.isPlainObject(o);i.forEach(o,function(i,o){r=void 0===i?"undefined":_typeof(i),n&&(o=n+"["+(s||"object"===r||"array"===r?o:"")+"]"),!n&&a?e.add(i.name,i.value):"array"===r||"object"===r?t(e,i,o):e.add(o,i)})}var o=[];return o.add=function(e,t){i.isFunction(t)&&(t=t()),i.isNil(t)&&(t=""),this.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},t(o,e),o.join("&").replace(/%20/g,"+")},getBitlyUrlAsync:function(e,t){if(""===o.bitlyUrl){var n="https://api-ssl.bitly.com/v3/shorten?access_token=9bca2257713ece1cbe2417d579434912c24ae333&longUrl="+encodeURIComponent(d.checkIfQueryStingExist(e));fetch(n).then(function(e){if(e.status>=200&&e.status<300)return e.json();var t=new Error(e.statusText);throw t.response=e,t}).then(function(n){i.isNil(n.url)?o.bitlyUrl=d.checkIfQueryStingExist(e,!0):o.bitlyUrl=n.url,t(o.bitlyUrl)}).catch(this.noOp)}else t(o.bitlyUrl)},getParamsFromUrl:i.memoize(function(e){var t={};return i.isNil(e)?{}:(e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,i,o){t[i.toLowerCase()]=o}),t)}),isPassiveEventSupported:i.memoize(function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}),extractLinksFromText:function(e){for(var t="",o=[],n=/(https?:\/\/[^\s]+)/g;null!=(t=n.exec(e));){var r=t[0];r=i.trimEnd(r,"”"),o.push({idx:t.index,url:r})}return o},transform:function(e,t){if(!e||!e.style)return null;var o=e.style,n=["-webkit-","-moz-","-ms-","-o-",""];i.forEach(n,function(e){o[e+"transform"]=t})},removeTransform:function(e){if(!e||!e.style)return null;var t=e.style,o=["-webkit-","-moz-","-ms-","-o-",""];i.forEach(o,function(e){t.removeProperty(e+"transform")})},withAnimationFramePromise:function(t){return new Promise(function(o,n){i.isFunction(t)?e(function(){t(),e(o)}):n("No function provided")})},toggleTransition:function(e){var t=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="cbola-disable-transition",r="transitionToggleCount";if(i.isNil(e))return Promise.reject(new Error("No element provided for class toggling"));var a=e.classList,s=function(){return t.withAnimationFramePromise(function(){a[o?"remove":"add"](n)})},l=parseInt(this.dataset(e,r)),d=0;return d=isNaN(l)?o?0:1:Math.max(o?l-1:l+1,0),this.dataset(e,r,d),o&&a.contains(n)&&0===d?s():!o&&!a.contains(n)&&d>0?s():Promise.resolve()},dotdotdot:function(t){return new Promise(function(o){function n(){t.parentElement.contains(c)?a():e(n)}function r(){return c.offsetHeight>t.offsetHeight}function a(){if(s.length>0&&r())return s=s.substr(0,s.length-1),c.innerText=s+"...",void a();if(s.length>0){var e=c.innerHTML;if(e.length>0){t.innerText=e,e=t.innerText;for(var i=d.extractLinksFromText(e),n=0;n<i.length;n++){var h=i[n];h.text=h.url,h.url=l[n].url,e=e.replace(h.text,'<a href="'+h.url+'" target="_blank">'+h.text+"</a>")}t.innerHTML=e}}c.remove(),o(t)}t.style["white-space"]="normal",t.style["overflow"]="hidden";var s=t.textContent,l=d.extractLinksFromText(s),c=t.cloneNode(!0);i.extend(c.style,{visibility:"hidden",overflow:"visible",width:t.offsetWidth+"px",height:"auto"}),d.after(t,c),n()})},documentReady:function(e){var t=Cbola.Env.topWindow;/complete|loaded|interactive/.test(t.document.readyState)?e():t.addEventListener("DOMContentLoaded",e)},isPageReady:function(){return/complete|loaded/gi.test(Cbola.Env.topWindow.document.readyState)},pageReady:function(e){this.isPageReady()?e():Cbola.Env.topWindow.addEventListener("load",e)},isElementDisplayed:function(e){return!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length))},isElementAttachedAsync:function(t,o,n){var a=this;return t&&o?(n=i.isFunction(n)?n:function(){o.appendChild(t)},window.MutationObserver?new Promise(function(r){var s={childList:!0},l=function(o,n){o=a.slice.call(o);for(var s=0;s<o.length;s++){var l=o[s];if("childList"===l.type&&i.some(l.addedNodes,function(e){return e===t})){n.disconnect(),e(r);break}}};new MutationObserver(l).observe(o,s),n()}):this.isStyleAppliedAsync(t,o,n)):Promise.reject(new Error(r+".isElementAttachedAsync No parent element provided"))},isStyleAppliedAsync:function(t,o,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cbola-inserted";if(!t||!o)return Promise.reject(new Error(r+".isStyleAppliedAsync No parent element provided"));n=i.isFunction(n)?n:function(){o.appendChild(t)};var s=["animationstart","MSAnimationStart","webkitAnimationStart"];return new Promise(function(r){var l=function n(l){l.target===t&&l.animationName===i.camelCase(a)&&(i.forEach(s,function(e){o.removeEventListener(e,n)}),t.classList.remove(a),e(r))};i.forEach(s,function(e){o.addEventListener(e,l,!1)}),n(),t.classList.add(a)})},getDocumentHeight:function(e){var t=e||Cbola.Env.viewportWindow;if(!t)return null;var i=t.document.body,o=t.document.documentElement;return Math.max(i.scrollHeight,o.scrollHeight,i.offsetHeight,o.offsetHeight,i.clientHeight,o.clientHeight)},getElementPixelsFromTop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e||!t.document.body.contains(e)||!Cbola.Env.viewportWindow)return null;var i=d.cumulativeOffset(e).top;return i>d.getDocumentHeight(t)||i<0?0:t===Cbola.Env.viewportWindow?i:i+this.getElementPixelsFromTop(t.frameElement,t.parent)},createAdIframe:function(e){var t=e.width,i=void 0===t?0:t,o=e.height,n=void 0===o?0:o,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=document.createElement("iframe"),s="allow-scripts allow-forms allow-same-origin allow-popups";return this.chromeVersion()>=58&&(s+=" allow-top-navigation-by-user-activation"),r&&a.setAttribute("sandbox",s),a.setAttribute("scrolling","no"),a.setAttribute("marginwidth","0"),a.setAttribute("marginheight","0"),a.setAttribute("frameborder","0"),a.style.setProperty("border","0","important"),a.style.setProperty("margin","0","important"),a.style["vertical-align"]="bottom",a.style["width"]=i+"px",a.style["height"]=n+"px",a},push:[].push,slice:[].slice,noOp:function(){}};return d}(),window.Cbola=window.Cbola||{},Cbola.TaskManager=function(){var e=250,t=Cbola,i=t._,o={},n=function(){this.loopIteration=null,this.isRunning=!1,this.loopIterationsCounter=0,this.deferredTasksQueue=[]};return n.prototype.executeTask=function(e,t,i){void 0===i&&(i=window),e.apply(i,t)},n.prototype.taskExecutionLoop=function(){this.isRunning=!0,this.loopIteration=null,this.loopIterationsCounter++;var t=this.deferredTasksQueue.length;if(void 0===this.deferredTasksQueue)return Cbola.Logger.getInstance().warnOnceM("TaskManager.taskExecutionLoop","TaskManager::taskLoop -> deferredTasksQueue is undefined"),void(this.isRunning=!1);for(var i=0;i<t;i++){var o=this.deferredTasksQueue.shift();this.executeTask.apply(this,o)}this.deferredTasksQueue.length>0?this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),e):(this.loopIteration=null,this.isRunning=!1)},n.prototype.addTask=function(t,i,o,n){var r=[t,i,o,n];this.deferredTasksQueue.push(r),this.isRunning||this.loopIteration||(this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),e))},n.prototype.removeTask=function(e){var t=this;Cbola._.remove(this.deferredTasksQueue,function(i){return void 0!==i[3]&&t.getTaskName(i)===e})},n.prototype.getTaskName=function(e){var t=e[3],i=e[0];return t||(i?i.name?i.name:"function":"")},n.prototype.addExpBackoffTask=function(e){function t(){if(i.isArray(a))return a.shift();var e=a;return a=a<l?Math.floor(a)+1:a,1e3*Math.pow(e,2)}var n=e.fn,r=e.backoff,a=void 0===r?.6:r,s=e.maxBackoffGrowth,l=void 0===s?4:s,d=e.maxBackoffIterations,c=void 0===d?4:d,h=e.name,m=void 0===h?null:h;if("function"==typeof n){var p=1;c=i.isArray(a)?a.length+1:c,function e(){if(c<p||!1===n(p,c===p))return void(m&&(o[m]=null));p+=1;var i=window.setTimeout(e,t());m&&(o[m]=i)}()}},n.prototype.removeExpBackoffTask=function(e){var t=o[e];delete o[e],t&&clearTimeout(t)},new n}(),window.Cbola=window.Cbola||{},Cbola.Logger=window.Cbola.Logger||function(){function t(){var e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)})}function i(){function i(e){if(!(v.length<1||_))if(_=!0,void 0===e&&(e=v.splice(0,Math.min(5,v.length)),e.retries=0),e.retries<Cbola.Logger.MAX_RETRIES_PER_LOG)if(0===e.retries)l(e);else{var t=Math.min(Math.pow(2,e.retries-1),16);setTimeout(function(){return l(e)},1e3*t)}else d("Logger -> Sending log to server failed "+Cbola.Logger.MAX_RETRIES_PER_LOG+" times, discarding log entry: {"+e+"}",Cbola.Logger.Levels.WARNING),_=!1,i()}function o(){w=Cbola.Env.clientVersion?", version: "+Cbola.Env.clientVersion:"";for(var e=0;e<b.length;e++){var t=b[e];s(t[0],t[1],t[2])}b=[],_||i()}function s(e,i,o){i+=""+Cbola.Logger.serverSuffix()+w+", uuid: "+t()+"]";var n={payload:{LogType:e===Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER?Cbola.Logger.Levels.ALERT:e,Message:i,MethodName:o||a.callingMethod,ClassName:"abtest_"+Cbola.Config.abTestId},level:e,retries:0};v.push(n)}function l(t){function o(){if(!r){r=!0,_=!1,t.retries++;var o=Math.min(Math.pow(2,t.retries-1),16);d("Logger -> Sending log to server failed ["+t.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+e.name+": "+e.message+"), retrying in "+o+" seconds...",Cbola.Logger.Levels.DEBUG),i(t)}}for(var r=!1,a=t.map(function(e){return e.payload}),s="",l=a.length-1;l>=0;l--){var c=a[l];1===t.retries?c.Message=c.Message.substring(0,c.Message.length-1)+", retries: "+t.retries+"]":t.retries>1&&(c.Message=c.Message.substring(0,c.Message.length-2)+t.retries+"]");for(var h in c)s+="Logs["+l+"]["+h+"]="+encodeURIComponent(c[h])+"&"}s=s.substr(0,s.length-1);var m=new XMLHttpRequest;m.onreadystatechange=function(){if(4===m.readyState)if(200===m.status||204===m.status)d("Logger -> Log succesfully sent to server: { "+s+" }",Cbola.Logger.Levels.DEBUG_LOGGER),_=!1,i();else if(!r){r=!0,t.retries++;var e=Math.min(Math.pow(2,t.retries-1),16);d("Logger -> Sending log to server failed ["+t.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+m.status+": "+m.statusText+"), retrying in "+e+" seconds...",Cbola.Logger.Levels.DEBUG),_=!1,i(t)}};try{var p=C||Cbola.Config.Defaults.loggingServer+"AddLogs";if(n.isEmpty(Cbola.Config.Defaults.loggingServer)&&n.isEmpty(C))return void o();m.open("POST",p,!0),m.setRequestHeader("Content-type","application/x-www-form-urlencoded"),m.onerror=o,m.send(s)}catch(e){o()}}function d(){var e="CBOLA::",t=r.slice.call(arguments),i=t.length>1?t.pop():Cbola.Logger.DEFAULT_LEVEL;if(i<=y){if("[*]"===t[0]&&(e+=t[0],t.shift()),t[0]&&t[0].hasOwnProperty("LoggerColor")){e="%c"+e;var o=t.shift().style;t[0]=e+" "+t[0],t.splice(1,0,o)}else t.unshift(e);i<=Cbola.Logger.Levels.WARNING&&!n.isEmpty(Cbola.Logger.getInstance().callingMethod)&&(t.shift(),t.unshift(Cbola.Logger.getInstance().callingMethod+"(): "),t.unshift(e)),i===Cbola.Logger.Levels.WARNING?console.warn.apply(console,t):i===Cbola.Logger.Levels.ERROR||i===Cbola.Logger.Levels.CRITICAL?console.error.apply(console,t):console.log.apply(console,t)}}function c(e){return function(){var t=r.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var i=Cbola.Logger.getInstance();return i.callingMethod="",i.log.apply(i,t),i}}}function h(e){return function(){var t=r.slice.call(arguments);if(null!==t){var i=t.shift();if(null!==i&&0!==t.length){var o=Cbola.Logger.getInstance();return o.callingMethod=i,t.push(e),o.log.apply(o,t),o}}}}function m(e){return function(){var t=r.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var i=Cbola.Logger.getInstance();i.callingMethod="";var o=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return f.indexOf(o)>-1?i:(f.push(o),i.log.apply(i,t),i)}}}function p(e){return function(){var t=r.slice.call(arguments);if(null!==t){var i=t.shift();if(null!==i&&0!==t.length){var o=Cbola.Logger.getInstance();t.push(e),o.callingMethod=i;var n=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return f.indexOf(n)>-1?o:(f.push(n),o.log.apply(o,t),o)}}}}var u=!1,b=[],f=[],y=Cbola.Env&&Cbola.Env.DEBUG?Cbola.Logger.Levels.TRACE:Cbola.Logger.Levels.OFF,g=Cbola.Logger.Levels.ERROR,w="",v=[],C=null,_=!1;return{log:function(){var e=r.slice.call(arguments);if(null!==e&&0!==e.length){1===e.length&&e.push(Cbola.Logger.DEFAULT_LEVEL);var t=e[e.length-1],o=t<=g||t===Cbola.Logger.Levels.TRACE;if(o&&e.unshift("[*]"),d.apply(a,e),o){e.shift(),e.pop(),e[0].hasOwnProperty("LoggerColor")&&e.shift();var n=e.reduce(function(e,t){return e+" "+JSON.stringify(t)});u?(s(t,n),_||i()):b.push([t,n,a.callingMethod])}return a}},alwaysSend:c(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),critical:c(Cbola.Logger.Levels.CRITICAL),error:c(Cbola.Logger.Levels.ERROR),warn:c(Cbola.Logger.Levels.WARNING),notify:c(Cbola.Logger.Levels.NOTICE),info:c(Cbola.Logger.Levels.INFO),debug:c(Cbola.Logger.Levels.DEBUG),trace:c(Cbola.Logger.Levels.TRACE),alwaysSendOnce:m(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnce:m(Cbola.Logger.Levels.ERROR),warnOnce:m(Cbola.Logger.Levels.WARNING),notifyOnce:m(Cbola.Logger.Levels.NOTICE),infoOnce:m(Cbola.Logger.Levels.INFO),debugOnce:m(Cbola.Logger.Levels.DEBUG),traceOnce:m(Cbola.Logger.Levels.TRACE),alwaysSendM:h(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),criticalM:h(Cbola.Logger.Levels.CRITICAL),errorM:h(Cbola.Logger.Levels.ERROR),warnM:h(Cbola.Logger.Levels.WARNING),notifyM:h(Cbola.Logger.Levels.NOTICE),alwaysSendOnceM:p(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnceM:p(Cbola.Logger.Levels.ERROR),warnOnceM:p(Cbola.Logger.Levels.WARNING),notifyOnceM:p(Cbola.Logger.Levels.NOTICE),enableServer:function(){u=!0,o()},set level(e){y=e},get level(){return y},set serverLevel(e){g=e},get serverLevel(){return g},get queue(){return v},set serverUrl(e){C=e},get serverUrl(){return C}}}var o=Cbola,n=o._,r=o.Utils,a=void 0;return{getInstance:function(){return a||(a=i()),a}}}(),Cbola.Logger.MAX_RETRIES_PER_LOG=10,Cbola.Logger.Levels={ALWAYS_SEND_TO_SERVER:-999,ALERT:1,CRITICAL:2,ERROR:3,WARNING:4,NOTICE:5,INFO:6,DEBUG:7,TRACE:8,DEBUG_LOGGER:9,NONE:999},Cbola.Logger.DEFAULT_LEVEL=Cbola.Logger.Levels.INFO,Cbola.Logger.Colors={YELLOW:{LoggerColor:"yellow",style:"background: rgba(245, 210, 6, 1); color: black;font-size:13px"},RED:{LoggerColor:"red",style:"background: #8C0000; color: white;font-size:13px"},PALE_RED:{LoggerColor:"pale_red",style:"background: #FE4444; color: black;font-size:13px"},PALE_YELLOW:{LoggerColor:"pale_yellow",style:"background: rgb(250, 255, 202); color: black;font-size:13px"},PALE_GREEN:{LoggerColor:"pale_green",style:"background: rgb(229, 255, 215); color: black;font-size:13px"},PALE_BLUE:{LoggerColor:"pale_blue",style:"background: #98BDF1; color: black;font-size:13px"},PALE_PURPLE:{LoggerColor:"pale_purple",style:"color: #ce93d8;"},BLUE:{LoggerColor:"blue",style:"color: #2196f3;"},ORANGE:{LoggerColor:"orange",style:"color: rgb(255,140,0);"},GREEN:{LoggerColor:"green",style:"color: #0f9d58"}},Cbola.Env=Cbola.Env||{},Cbola.Env.domainId=Cbola.Env.domainId||0,Cbola.Env.activePid=Cbola.Env.activePid||0,Cbola.Env.wid=Cbola.Env.wid||0,Cbola.Logger.serverSuffix=Cbola._.memoize(function(){var e=Cbola.Utils.isMobile?"1":"0",t=Cbola.Utils.isTablet()?"1":"0";return"[did: "+Cbola.Env.domainId+", pid: "+Cbola.Env.activePid+", wid: "+Cbola.Env.wid+", pvid: "+Cbola.Env.PageProperties.cbola_pageViewId+", abtestid: "+Cbola.Config.abTestId+", ismobile: "+e+", istablet: "+t}),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.LocalStorageService=Cbola.Common.LocalStorageService||function(){var e=Cbola,t=e._,i=e.Logger.Colors,o=Cbola.Logger.getInstance(),n=function(){var e="Cbola_test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return o.info(i.PALE_RED,"localStorage is not available in this device"),!1}}(),r=n,a=function(e){return function(){if(r)try{for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return e.apply(this,i)}catch(e){}return null}},s=function(){};s.prototype={setItem:a(function(e,t){return!localStorage.setItem(e,t)}),getItem:a(function(e){return localStorage.getItem(e)}),removeItem:a(function(e){return!localStorage.removeItem(e)}),clear:function(){if(n)try{t.forEach(this.KEYS,function(e){return localStorage.removeItem(e)})}catch(e){}},setEnablement:function(e){r=n&&e}};var l=new s;return l.KEYS={CUID:"cbola_userId",CBOLA_ITEMS_HISTORY:"cbola_itemsArrayHistoryUser",ENABLE_TIMELINE:"cbola_timeline"},l}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.TimelineService=function(){var e=.05,t=Cbola,i=t._,o=t.Common.LocalStorageService,n=Cbola.Logger.getInstance(),r=!i.isEmpty(o.getItem(o.KEYS.ENABLE_TIMELINE)),a=!i.isUndefined(window.performance&&window.performance.now),s=function(){this.counter=0,this.setEnabled(i.random(1,!0)<=e||r),this.isEnabled&&n.info(Cbola.Logger.Colors.BLUE,"TimelineService is active")};return s.prototype.mark=function(e,t){if(this.isEnabled){var o=performance.now();o=i.round(o,2);var r='timeline - "'+e+'" marked on: '+o+" ms ("+this.counter+++")";n.alwaysSend(Cbola.Logger.Colors.BLUE,r),i.isUndefined(performance.mark)||performance.mark(e),t&&this.lastMark&&performance.measure&&performance.measure("cbola - "+e,this.lastMark,e),this.lastMark=e}},s.prototype.markStart=function(e){this.isEnabled&&this.mark(e+" started")},s.prototype.markEnd=function(e){if(this.isEnabled){this.mark(e+" completed");try{performance.measure&&performance.measure("cbola - "+e,e+" started",e+" completed")}catch(e){}}},s.prototype.record=function(e,t){return function(){Cbola.Common.TimelineService.markStart(t);for(var i=arguments.length,o=Array(i),n=0;n<i;n++)o[n]=arguments[n];e.apply(this,o),Cbola.Common.TimelineService.markEnd(t)}},s.prototype.setEnabled=function(e){this.isEnabled=a&&e},new s}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.CDN=Cbola.Common.CDN||function(){var e=Cbola,t=e._,i=e.Env,o=e.Utils,n=e.Enums,r=e.Config,a=e.Common.TimelineService,s=e.Logger.Colors,l=Cbola.Logger.getInstance(),d="CDN",c=5e3,h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.noOp,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=i.PageProperties.hostname,s=function(e){return function(){l.errorM(d+"."+r,"Request to CDN failed, due to: "+e+". path: "+a+" "+(navigator&&navigator.userAgent?", User Agent: "+navigator.userAgent:"")),n()}},h=new XMLHttpRequest;h.onload=function(){if(h.status>=200&&h.status<300){var e=JSON.parse(h.response);t(e)}else n()},h.open("GET",e,!0),h.timeout=c,h.onerror=s("error"),h.ontimeout=s("timeout"),h.send()};return{_getPageElements:function(e,c){return new Promise(function(m,p){var u="_getPageElements",b=i.activePid,f=i.domainId,y=i.PageProperties,g=""+r.Defaults.CDN+o.getCurrentAbTestId()+"/"+b+"/"+(0===f?"all":f)+"/"+y.urlHashMD5+"_"+y.urlHashSHA1+"_incontent_unified";y.isTablet?g+="_tablet":y.isMobile&&(g+="_mobile"),g+=0===parseInt(e)?"":"_"+e,g+=c?"_fallback_"+c:"",g+=".json",h(g,function(i){var r=t.get(i,"Status");1===r?(i.widgetId=e,o.updateEnv(i),void 0!==i.PageId&&l.info(s.PALE_YELLOW,"Page Id: "+i.PageId),y.IsServerCall=i.IsServerCall=n.isServerCallTypes.FROM_CDN,a.markEnd(d+"."+u),m(i)):r?(l.info(s.PALE_YELLOW,d+"."+u+" failed due to content server bad status: "+i.Status+". Not calling server."),Cbola.Common.AnalyticsService.setPageRequest(i.Status,n.isServerCallTypes.FROM_CDN),p(!0)):(l.info(d+"."+u+" returned bad response."),p())},p,u)})},_getIndices:function(e,n,s,l,c){return new Promise(function(m,p){var u=i.activePid,b=i.domainId,f="_getIndices",y=r.Defaults.EX_CDN+"GetIndices/"+o.getCurrentAbTestId()+"/"+u+"/"+(0===b?"all":b)+"/"+e+"/"+n+"/"+c+"/"+l;h(y,function(e){var i=t.get(e,"Status");1===i?(a.markEnd(d+"."+f),m(e)):i?(Cbola.Common.AnalyticsService.setPageElementRequest({elementId:s,loadStatus:i}),m()):p()},p,f)})}}}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.UserService=function(){function e(){g[n.Language.english]={ad:"Ad",add:"add",addThisWidgetToYourSite:"add this widget to your site",addWidgetToYourSite:"add widget to your site",addThisToYourSite:"add this to your site",advertisement:"Advertisement",anotherQuiz:"another quiz",backToGame:"back to game",canYouBeatThat:"Can you beat that?",challenge:"Challenge",correct:"Correct",discoverTheMost:"Discover the most mind-blowing facts out there!",falseButton:"False",iScored:"I scored",nextQuiz:"Next quiz",playingIn:"playing in",promotedBy:"promoted by",poweredBy:"powered by",question:"Question",score:"Score",seconds:"seconds",skip:"Skip",start:"Start",startsIn:"starts in:",thankYouForPlaying:"Thank you for playing !",toYourSite:"to your site",trueButton:"True",trueOrFalse:"True or False?",upNext:"Up next: ",whatsNext:"whats next ?",wrong:"Wrong",youMayLike:"You May Like...",yourFriends:"your friends",yourScore:"Your score",YouScoredaFair:"You Scored a Fair",YouScoredaLame:"You Scored a Lame",YouScoredanAwesome:"You Scored an Awesome",YouScoredaMighty:"You Scored a Mighty",youScoredaPerfect:"You Scored a Perfect",YouScoredaRidiculous:"You Scored a Poor"},g[n.Language.spanish]={ad:"Anuncio",add:"Añade",addThisWidgetToYourSite:"Añade este widget a tu sitio",addWidgetToYourSite:"añade este widget a tu sitio",advertisement:"Publicidad",anotherQuiz:"otro juego",backToGame:"volver al juego",canYouBeatThat:"Puedes vencerme?",challenge:"Desafía",correct:"Correcto",discoverTheMost:"Descubre las curiosidades más interesantes!",falseButton:"Falso",iScored:"Obtuve un puntaje de",nextQuiz:"Próximo Juego",playingIn:"jugando",question:"Pregunta",score:"Puntaje",seconds:"segundos",skip:"Omitir",start:"comienza",startsIn:"comienza en:",thankYouForPlaying:"gracias por jugar !",toYourSite:"a tu sitio",trueButton:"Verdadero",trueOrFalse:"Verdadero o Falso?",upNext:"Siguiente: ",wrong:"Incorrecto",youMayLike:"te puede interesar",yourFriends:"a tus amigos",yourScore:"Tu Puntaje",YouScoredaFair:"Tu Puntaje Final es",YouScoredaLame:"Tu Puntaje Final es",YouScoredanAwesome:"Tu Puntaje Final es",YouScoredaMighty:"Tu Puntaje Final es",youScoredaPerfect:"Tu Puntaje Final es",YouScoredaRidiculous:"Tu Puntaje Final es"},g[n.Language.portuguese]={ad:"anúncio",advertisement:"publicidade",addThisWidgetToYourSite:"adicione este widget ao seu site",addWidgetToYourSite:"adicione este widget ao seu site",anotherQuiz:"outro jogo",backToGame:"voltar ao jogo",canYouBeatThat:"Você pode me vencer?",challenge:"Desafie",correct:"Correto",falseButton:"Falso",iScored:"Obtive uma pontuação",nextQuiz:"Próximo Jogo",playingIn:"jogando",question:"Pergunta",score:"Pontuação",seconds:"segundos",skip:"pular",start:"começa",startsIn:"começa em:",thankYouForPlaying:"obrigado por jogar !",toYourSite:"ao seu site",trueButton:"Verdadeiro",trueOrFalse:"Verdadeiro ou Falso?",upNext:"Seguinte: ",wrong:"Incorreto",youMayLike:"você pode se interessar",yourFriends:"os seus amigos",yourScore:"Sua Pontuação",YouScoredaFair:"Sua Pontuação Final é",YouScoredaLame:"Sua Pontuação Final é",YouScoredanAwesome:"Sua Pontuação Final é",YouScoredaMighty:"Sua Pontuação Final é",youScoredaPerfect:"Sua Pontuação Final é",YouScoredaRidiculous:"Sua Pontuação Final é"},g[n.Language.russian]={ad:"объявление",add:"Добавить",addThisWidgetToYourSite:"Добавьте этот виджет на свой сайт",advertisement:"Реклама",addWidgetToYourSite:"Добавьте виджет на свой сайт",anotherQuiz:"Другая викторина",backToGame:"вернуться к игре",canYouBeatThat:"Можете ли вы лучше?",challenge:"Озадачьте ",correct:"Правильно",falseButton:"Неверно",iScored:"Я набрал",nextQuiz:"Следующий конкурс",playingIn:"очков, играя в",question:"Вопрос",score:"Результат",sconds:"секунд",skip:"пропустить",start:"Старт",startsIn:"Начало через",thankYouForPlaying:"Спасибо за игру",toYourSite:"в ваш сайт",trueButton:"Верно",trueOrFalse:"Верно Или Неверно?",upNext:"Следующая",whatsNext:"что следует",wrong:"Ошибка",youMayLike:"Вам может понравиться",yourFriends:"своих друзей",yourScore:"Ваш Результат",YouScoredaFair:"Ваш Результат",YouScoredaLame:"Ваш Результат",YouScoredanAwesome:"Ваш Результат",YouScoredaMighty:"Ваш Результат",youScoredaPerfect:"Ваш Результат",YouScoredaRidiculous:"Ваш Результат"},g[n.Language.french]={ad:"Publicité",advertisement:"Publicité",canYouBeatThat:"Tu peux me battre?",challenge:"Défiez ",correct:"Correct",falseButton:"Faux",iScored:"J`ai totalisé",nextQuiz:"Prochain quiz",playingIn:"en jouant au Quiz",question:"Question",score:"Score",start:"Début",trueButton:"Vrai",trueOrFalse:"Vrai ou Faux",wrong:"Incorrect",yourFriends:"Vos amis",yourScore:"Votre score",YouScoredaFair:"Votre score est de",YouScoredaLame:"Votre score est de",YouScoredanAwesome:"Votre score est de",YouScoredaMighty:"Votre score est de",youScoredaPerfect:"Votre score est de",YouScoredaRidiculous:"Votre score est de"},g[n.Language.german]={ad:"Werbung",advertisement:"Werbung"}}var t=Cbola,i=t._,o=t.EventBus,n=t.Config,r=t.Common.LocalStorageService,a=r.KEYS,s=o.Events,l=Cbola.Logger.getInstance(),d="12345678",c=function(e){r.setEnablement(e),e||r.clear()},h=n.Language.english,m=a.CUID,p=a.CBOLA_ITEMS_HISTORY,u=!1,b="0",f=null,y=h,g={},w=null;e();var v=function(){this._vocabulary=g[h],b=r.getItem(m)||"0",c(!this.isEUUser())};return v.prototype.getItemsHistory=function(){if(f)return f;var e=r.getItem(p);return e?(e=i.trimEnd(e,","),f=i.split(e,",")):[0]},v.prototype.addItemsToHistory=function(e){var t=this.getItemsHistory();t&&(e=i.union(t,e));var o=i.trimEnd(i.join(i.uniq(e),","),",");f=e,r.setItem(p,o)},v.prototype.clearItemsHistory=function(){f=null,r.removeItem(p)},v.prototype.getUserId=function(){return b},v.prototype.isEUUserAsync=function(){var e=this;return u?Promise.resolve(this.isEUUser()):(w||(w=new Promise(function(t){o.addEventListener(s.USER_ID_SET,function(){t(e.isEUUser())})})),w)},v.prototype.setUserId=function(e){b=e,u=!0,c(!this.isEUUser()),r.setItem(m,e),o.fire(s.USER_ID_SET)},v.prototype.isEUUser=function(){return b===d||"0"===b},v.prototype.getLanguage=function(){return y},v.prototype.setLanguage=function(e){e!==y&&(g.hasOwnProperty(e)?(y=e,this._vocabulary=g[y]):l.warnM("UserService.setLanguage","UserService Failed to set language: "+e))},v.prototype.vocabulary=function(){for(var e=this,t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];var n=i.length;return i.reduce(function(t,i,o){return""+t+e.getWard(i)+(o!==n-1?" ":"")},"")},v.prototype.getWard=function(e){return this._vocabulary[e]||g[h][e]||""},v.prototype.wasItemAlreadyViewed=function(e){if(e.IgnoreUserHistory)return!1;var t=e.ParentId?e.ParentId:e.Id;return this.getItemsHistory().indexOf(t.toString())>-1},v.prototype.dictionaryReport=function(){var e={},t=i.keys(g[h]);return i.forEach(g,function(o,n){n!==h&&(e[n]=i.difference(t,i.keys(o)))}),e},new v}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.RequestHandler=function(){var _Cbola=Cbola,_=_Cbola._,Config=_Cbola.Config,EventBus=_Cbola.EventBus,Utils=_Cbola.Utils,_Cbola$Common=_Cbola.Common,CDN=_Cbola$Common.CDN,TimeLine=_Cbola$Common.TimelineService,UserService=_Cbola$Common.UserService,_Cbola$Enums=_Cbola.Enums,isServerCallTypes=_Cbola$Enums.isServerCallTypes,LoadStatusTypes=_Cbola$Enums.LoadStatusTypes,PageRequestTypes=_Cbola$Enums.PageRequestTypes,ProductTypes=_Cbola$Enums.ProductTypes,LoggerColors=_Cbola.Logger.Colors,Logger=Cbola.Logger.getInstance(),MAX_RETRIES=10,CLASS_NAME="RequestHandler",parseJSON=function(e){return e.json()},checkStatus=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t},RequestHandler=function(){};return RequestHandler.prototype.dispatch=function(){for(var e=this,t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return this.dispatchCDN.apply(this,i).catch(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Promise.reject():e.dispatchServer.apply(e,i)})},RequestHandler.prototype.dispatchCDN=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=t.shift();return _.isFunction(CDN[o])?(TimeLine.markStart("CDN."+o),CDN[o].apply(CDN,t)):Promise.reject()},RequestHandler.prototype.dispatchServer=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=t[0];return TimeLine.markStart(CLASS_NAME+"."+o),this.promiseWithRetry.apply(this,t.concat([0]))},RequestHandler.prototype.promiseWithRetry=function(){for(var e=this,t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];var n="promiseWithRetry",r=_.first(i),a=_.last(i);return this[r].apply(this,i.slice(1)).catch(function(e){return new Promise(function(t,i){if(a>=MAX_RETRIES||_.isError(e))i(e);else{var o=Math.min(Math.pow(2,a),16);o=1===o?250:1e3*o,Logger.warnM(CLASS_NAME+"."+n+r,r+"() failed, retrying in "+o/1e3+" seconds... ("+a+"/"+MAX_RETRIES+")"),setTimeout(function(){return i(e)},o)}})}).catch(function(t){return _.isError(t)?(Logger.errorM(CLASS_NAME+"."+n+r,CLASS_NAME+"."+n+" failed firing "+r+"(). due to error: ",t),Promise.reject(t)):a>=MAX_RETRIES?(Logger.errorM(CLASS_NAME+"."+n+r,CLASS_NAME+"."+n+" failed firing "+r+"() after "+MAX_RETRIES+" errors."),_.isFunction(t)&&t(),Promise.reject()):(i.splice(-1,1,a+1),e.promiseWithRetry.apply(e,i))})},RequestHandler.prototype.getPageElements=function(e,t){return this.dispatch("_getPageElements",e,t)},RequestHandler.prototype.getMoreContent=function(e){return this.dispatch("_getMoreContent",e)},RequestHandler.prototype.getAds=function(e,t,i){return this.dispatch("_getAds",e,t,i)},RequestHandler.prototype.getLayerScript=function(e){return this.dispatch("_getLayerScript",e)},RequestHandler.prototype.getJsBundle=function(e){return this.dispatch("_getJsBundle",e)},RequestHandler.prototype.getIndices=function(e,t,i,o,n){return this.dispatch("_getIndices",e,t,i,o,n)},RequestHandler.prototype._getPageElements=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o="_getPageElements",n=Cbola,r=n.Env,a=r.PageProperties,s=r.categoryId,l=r.tags,d=r.title,c=r.body,h=function(e){_.isNil(e)||Cbola.Common.AnalyticsService.setPageRequest(e,isServerCallTypes.FROM_SERVER)},m=Utils.initPayload();return m=_.extend(m,{WidgetId:parseInt(e),CategoryId:s,FallbackMinimalWidth:t||0,Tags:l,Title:d,Body:c}),_.isEmpty(a.SrcUrl)||(m.SrcUrl=a.SrcUrl),Logger.info("getPageElements start. json: ",m),new Promise(function(t,n){fetch(Config.Defaults.queryServer+"GetInContentInfo",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(m)}).then(checkStatus).then(parseJSON).then(function(r){r.widgetId=e,Utils.updateEnv(r),a.IsServerCall=isServerCallTypes.FROM_SERVER,1===r.Status?(void 0!==r.PageId&&Logger.info(LoggerColors.PALE_YELLOW,"Page Id: "+r.PageId),i>0&&Logger.alwaysSendM(CLASS_NAME+"."+o,CLASS_NAME+"."+o+" succeeded on "+i+" attempts. url: "+a.originalPathNameHost+", pageviewid: "+a.cbola_pageViewId),r.IsServerCall=a.IsServerCall,TimeLine.markEnd(CLASS_NAME+"."+o),t(r)):2===r.Status||3===r.Status?(Config.errorMessage="In automation",n(function(){h(r.status)})):(h(r.Status),n(new Error("Content server bad status: "+r.Status+". URL: "+a.originalPathNameHost)))}).catch(function(){n(function(){h(PageRequestTypes.INITIALIZE_FAILED)})})})},RequestHandler.prototype._getMoreContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Logger.info(LoggerColors.PALE_GREEN,"Start to GetMoreContent for elementId"+e.ElementId+": "+Utils.getRunTimeInMilis());var i={UserId:UserService.getUserId(),UserHistory:UserService.getItemsHistory()};_.extend(e,i);var o=_.isEmpty(e.CurrentSession);o&&(e.CurrentSession=[0]);var n=_.extend(Utils.initPayload(),e);return new Promise(function(i,r){fetch(Config.Defaults.queryServer+"GetMoreContent",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:Utils.encodePayload(n)}).then(checkStatus).then(parseJSON).then(function(o){_.isEmpty(o)?0===t?(UserService.clearItemsHistory(),r()):r(new Error("Failed to get more content after history cleaning")):(Logger.info(LoggerColors.PALE_GREEN,"End of GetMoreContent for elementId"+e.ElementId+": "+Utils.getRunTimeInMilis()),TimeLine.markEnd(CLASS_NAME+"._getMoreContent"),i(o))}).catch(function(e){return r(3===t&&o||e)})})},RequestHandler.prototype._getAds=function(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n="_getAds",r=Cbola,a=r.Env,s=a.PageProperties,l=a.PageId,d=a.activePid,c=a.Domain,h=a.Category,m={PageId:l,PublisherPublicKey:d,UrlData_Url:s.hostname,UrlData_Hash_128_Bit:s.urlHashMD5,UrlData_Hash_160_Bit:s.urlHashSHA1,AbTestId:Config.abTestId,ProductType:ProductTypes.IN_CONTENT,WidgetId:e,LayoutTypes:[i],IsMobile:s.isMobile,IsTablet:s.isTablet,DomainId:c,CategoryId:h,IsSsl:/https:/gi.test(document.location.protocol)},p=function(e){_.isNil(e)||Cbola.Common.AnalyticsService.setPageElementRequest({elementId:t,loadStatus:e})};return new Promise(function(e,i){var r=new Promise(function(e,t){setTimeout(function(){var e=new Error("request timeout");e.isTimeout=!0,t(e)},1e3*Config.getAdsCheckElementRetries)}),a=fetch(""+Config.Defaults.adServer+Config.Defaults.adServer_method,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:Utils.encodePayload(m)});Promise.race([r,a]).then(checkStatus).then(parseJSON).then(function(r){1===r.Status?(o>0&&Logger.alwaysSendM(CLASS_NAME+"."+n,CLASS_NAME+"."+n+" succeeded on "+o+" attempts. url: "+s.originalPathNameHost+", pageviewid: "+s.cbola_pageViewId),TimeLine.markEnd(CLASS_NAME+"."+n),EventBus.fire(EventBus.Events.GET_ADS_READY,{elementId:t,data:r}),e(r)):i(new Error("Ad server bad status: "+r.Status+". url: "+s.originalPathNameHost+", pageviewid: "+s.cbola_pageViewId))}).catch(function(e){var t=null;500===_.get(e,"request.status")?t=LoadStatusTypes.AD_SERVER_DOWN:e.isTimeout?t=LoadStatusTypes.GET_ADS_MAX_RETRY:_.isNil(e.request)&&(t=LoadStatusTypes.GET_ADS_FAILED),2===o&&p(t),i(function(){return p(t)})})})},RequestHandler.prototype._getLayerScript=function(layerType){var _retryAttempt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(function(resolve,reject){var METHOD="_getLayerScript",url=Cbola.Env.clientPath+"container/layer_"+layerType+"/cbola_layer_"+layerType+Cbola.Env.clientPathType+".js",xhttp=new XMLHttpRequest,onFailure=function(e){0!==_retryAttempt&&2!==_retryAttempt||Logger.alwaysSendM(CLASS_NAME+"."+METHOD,"Failed getting script for layer "+layerType+" on attempt: "+(_retryAttempt+1)+" due to: "+_.get(e,"message","")+". URL: "+Cbola.Env.PageProperties.originalPathNameHost),reject()};xhttp.onload=function(){200===xhttp.status&&xhttp.response?(eval(xhttp.response),TimeLine.markEnd(CLASS_NAME+"."+METHOD),resolve()):onFailure(new Error("response status "+xhttp.status))},xhttp.open("GET",url,!0),xhttp.onerror=onFailure,xhttp.send()})},RequestHandler.prototype._getJsBundle=function(filename){return new Promise(function(resolve,reject){var METHOD="_getJsBundle",url=""+Cbola.Env.clientPath+filename;if(Cbola.Env.DEBUG){var script=document.createElement("script");script.onload=function(){TimeLine.markEnd(CLASS_NAME+"."+METHOD),resolve()},script.onerror=function(){reject(new Error("Failed loading path: "+filename+" by script tag attachment"))};var node=document.querySelector("script");node.parentNode.insertBefore(script,node),script.src=url}else{var logJSBundleLoadFailure=function(){Logger.errorM(CLASS_NAME+"."+METHOD,CLASS_NAME+"."+METHOD+" failed loading file from path "+filename)},xhttp=new XMLHttpRequest;xhttp.onload=function(){200===xhttp.status&&xhttp.response?(eval(xhttp.response),TimeLine.markEnd(CLASS_NAME+"."+METHOD),resolve()):reject(logJSBundleLoadFailure)},xhttp.open("GET",url,!0),xhttp.onerror=function(){reject(logJSBundleLoadFailure)},xhttp.send()}})},RequestHandler.prototype._getIndices=function(e,t,i,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a="_getIndices",s=Cbola,l=s.Env,d=l.activePid,c=l.DEBUG,h=l.domainId,m=l.PageProperties,p=function(e){_.isNil(e)||Cbola.Common.AnalyticsService.setPageElementRequest({elementId:i,loadStatus:e})},u={AbTestId:Utils.getCurrentAbTestId(),Did:h,IndicesPerPage:n,LocationID:e,Language:t,Pid:d,Wid:parseInt(o)};return c&&(u.Debug=!0),Logger.info("getIndices start. payload: ",u),new Promise(function(e,t){fetch(Config.Defaults.extraContent+"GetIndices",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then(checkStatus).then(parseJSON).then(function(i){m.IsServerCall=i.IsServerCall=isServerCallTypes.FROM_SERVER,1===i.Status?(r>0&&Logger.alwaysSendM(CLASS_NAME+"."+a,CLASS_NAME+"."+a+" succeeded on "+r+" attempts. url: "+m.originalPathNameHost+", pageviewid: "+m.cbola_pageViewId),TimeLine.markEnd(CLASS_NAME+"."+a),e(i)):(p(i.Status),t(new Error("External content server bad status: "+i.Status+". URL: "+m.originalPathNameHost)))}).catch(function(){p(LoadStatusTypes.EXTERNAL_CONTENT_FAILED),t(new Error("External content server failed. URL: "+m.originalPathNameHost))})})},new RequestHandler}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AnalyticsService=function(){function e(e){return e.json()}function t(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function i(e){var t={ClientVersion:h.clientVersion,PageViewId:h.PageProperties.cbola_pageViewId,PageId:h.PageId,UserId:s.getUserId(),PublisherId:h.activePid,Second:c.getRunTimeInSecs(),categoryId:h.Category,domainId:h.Domain,IsMobile:h.PageProperties.isMobile,IsTablet:h.PageProperties.isTablet,isPortrait:h.PageProperties.isPortrait,AbTestId:p.abTestId};return e&&m.extend(t,e),m.defaults(t,b),t}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.analyticsName,r=e.additionalParams,a=e.onError,s=void 0!==a&&a,m=e.onSuccess,u=void 0!==m&&m,b=e.includeCredentials,f=void 0!==b&&b;l.info(d.PALE_PURPLE,n+"::"+o);var y=i(r),g={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:c.encodePayload(y)};f&&(g.credentials="include"),fetch(""+p.Defaults.analyticsServer+o,g).then(t).then(function(e){l.info(d.PALE_PURPLE,"fired "+o+" analytics to server.",y),h.DEBUG&&console.table&&y.Items&&console.table(y.Items),u&&u(e)}).catch(function(e){s?s(e.response):l.trace(d.PALE_RED,o+" failed.")})}var n="AnalyticsService",r=Cbola.Enums,a=r.SetClickTypes,s=Cbola.Common.UserService,l=Cbola.Logger.getInstance(),d=Cbola.Logger.Colors,c=Cbola.Utils,h=Cbola.Env,m=Cbola._,p=Cbola.Config,u=Cbola.Common.RequestHandler,b={WidgetId:0,PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},f=function(){};f.prototype.setPageRequest=function(t,i,n){var a="SetPageRequestGeo";h.PageStatus=t;var u=0;try{u=Math.floor(100*Math.abs(h.PageProperties.secondGlobal/1e3))/100}catch(e){}var b=0;try{0!==h.PageProperties.publisherScriptExecutionTime&&null!==h.PageProperties.publisherScriptExecutionTime&&(b=Math.floor(100*Math.abs((h.PageProperties.publisherScriptExecutionTime-window.performance.timing.connectStart)/1e3))/100)}catch(e){}var f={PageStatus:t,IsServerCall:i,SecondFromPageLoad:b,SecondGlobal:u,WidgetId:h.widgetId,ScriptDomainId:h.domainId,IntegrationType:h.IntegrationType||0,ProductType:r.ProductTypes.IN_CONTENT};t!==r.PageRequestTypes.DIV_TOO_SMALL&&t!==r.PageRequestTypes.HIDDEN_IFRAME||!n?(f.ScreenWidth=h.topWindow.innerWidth,f.ScreenHeight=h.topWindow.innerHeight):(f.ScreenHeight=n.height,f.ScreenWidth=n.width),c.isInIframe()&&!c.isWindowTopSupported()||m.isEmpty(window.top.document.referrer)||(f.ReferrerURL=window.top.document.referrer),p.ignoreQueryString&&(f.QueryString=encodeURIComponent(p.queryString));var y=function(t){e(t).then(function(e){var t=m.get(e,"UserId","0");h.userId=t,s.setUserId(t),l.info(d.PALE_PURPLE,a+" -> UserId: "+h.userId)})};o({analyticsName:a,additionalParams:f,onError:function(){s.setUserId("0"),l.trace(d.PALE_RED,a+" failed to set user Id")},onSuccess:y,includeCredentials:!0})};var y=function(e,t,i){var o=Cbola.InContent.Manager.getLayerByElementId(e);return{ElementId:e,Ads:[{TagId:t,ProviderId:"",TriggerType:i}],WidgetId:o.widgetId,ProductType:r.ProductTypes.IN_CONTENT,LayoutType:o.type,ItemType:o.itemType,HbToken:o.hbToken}};f.prototype.setAdsRequest=function(e,t,i,n){var r=y(e,t,i);void 0!==n&&(r.HbCpm=n),o({analyticsName:"SetAdsRequest",additionalParams:r})},f.prototype.setBlockedAdRequest=function(e,t,i){o({analyticsName:"SetBlcAr",additionalParams:y(e,t,i)})},f.prototype.setPageElementRequest=function(e){var o=e.elementId,a=e.layer,s=e.loadStatus,u=e.isServerCall,b="SetPageElementsRequestNew";if(l.info(d.PALE_PURPLE,n+"::"+b),a?o=a.elementId:o&&(a=Cbola.InContent.Manager.getLayerByElementId(o)),!m.isNil(a)&&s){var f=null;try{h.PageProperties.secondGlobal>0&&(f=c.getRunTimeInSecs()+Math.floor(100*Math.abs(h.PageProperties.secondGlobal/1e3))/100)}catch(e){}var y={ElementId:o,LoadStatus:s,PageStatus:h.PageProperties.PageStatus,IsServerCall:m.get(a,"data.IsServerCall",u),Width:a.container?a.container.offsetWidth:0,Height:a.container?a.container.offsetHeight:0,WidgetId:a.widgetId,ItemType:a.itemType||0,LayoutType:a.type||0,ProductType:r.ProductTypes.IN_CONTENT,HbToken:a.hbToken,SecondGlobal:f},g=c.getDocumentHeight();null!==g&&(y.PageHeight=g||0);var w=c.getElementPixelsFromTop(a.element);null!==w&&(y.PixelsFromTop=w||-1),y=i(y);var v={Elements:[y]};fetch(""+p.Defaults.analyticsServer+b,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:c.encodePayload(v)}).then(t).then(function(){l.info(d.PALE_PURPLE,n+"."+b+" success.")}).catch(function(){l.trace(d.PALE_RED,b+" failed.")})}},f.prototype.setPageElementView=function(e,t,i,n){var a=Cbola.InContent.Manager.getLayerByElementId(e);if(!m.isNil(a)){o({analyticsName:"SetPageElementView",additionalParams:{ElementId:a.elementId,ElementViewId:m.isFunction(a.getViewId)?a.getViewId():0,TeaserType:0,OpenType:t,CloseType:i,WidgetId:a.widgetId,LayoutType:a.type,ProductType:r.ProductTypes.IN_CONTENT,Duration:m.isUndefined(n)?a.isViewable()?0:a.getViewDuration():n,HbToken:a.hbToken}})}},f.prototype.setClick=function(e,t,i){var n="SetClick";if(!c.isGoogleWebLightAgent()){var s=Cbola.InContent.Manager.getLayerByElementId(e),h=0;i&&(h=i.Id,s.isMobile()||t===a.SHARE_BEFORE_FACEBOOK||t===a.SHARE_BEFORE_TWITTER?h=i.Id:t!==a.SHARE_AFTER_TWITTER&&t!==a.SHARE_AFTER_FACEBOOK||(h=i.ParentId));var p={ElementId:e,ElementViewId:m.result(s,"getViewId",0),ClickType:t,ItemId:h,WidgetId:s.widgetId,LayoutType:s.type,ProductType:r.ProductTypes.IN_CONTENT,HbToken:s.hbToken};o({analyticsName:n,additionalParams:p,onError:function(){l.traceOnce(d.PALE_RED,n+" failed.")}})}},f.prototype.setClientError=function(e){var t={PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},i={Url:window.location.href.toLowerCase(),FileName:e.filename,Line:e.lineno,Col:e.colno,ErrorMessage:e.message,Type:e.type};m.defaults(i,t),o({analyticsName:"SetClientError",additionalParams:i})},f.prototype.setPageClose=function(){var e="SetPageClose";l.info(d.PALE_PURPLE,n+"::"+e);var t=i(),o=new XMLHttpRequest,r=""+p.Defaults.analyticsServer+e,a=function(){return l.trace(d.PALE_RED,e+" failed.")};o.open("POST",r,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status||204===o.status?(l.info(d.PALE_PURPLE,"fired "+e+" analytics to server.",t),h.DEBUG&&console.table&&t&&console.table(t)):a())},o.onerror=a,o.send(c.encodePayload(t))},f.prototype.setItemsView=function(e,t){var i=Cbola.InContent.Manager.getLayerByElementId(e);if(!m.isNil(i)){o({analyticsName:"SetItemsView",additionalParams:{ElementId:e,ElementViewId:m.result(i,"getViewId",0),Items:m.map(t,function(e){return{Id:e.Id||0,OpenType:e.openType,CloseType:e.closeType,DisplayOrder:e.displayOrder,ViewOrder:e.viewOrder,Duration:e.isViewable?0:e.getViewableDuration(),AnswerId:e.userAnswerId}}),WidgetId:i.widgetId,LayoutType:i.type,HbToken:i.hbToken}})}},f.prototype.setConsentStatus=function(e){o({analyticsName:"SetConsentStatus",additionalParams:{ConsentStatus:e}})},f.prototype.setClickTracker=function(e){var t="SetClickTracker";l.info(d.PALE_PURPLE,n+"::"+t),e?fetch(e).then(function(){l.info(d.PALE_PURPLE,n+"."+t+" succeeded for url: "+e)}):l.trace(n+".setClickTracker",n+".setClickTracker failed to set URL for click tracker")};var g=!1,w=[],v=null,C=null,_={nested:{SetHbBidRequestParams:{fields:{base:{type:"Base",id:1},BidRequests:{rule:"repeated",type:"HbBidRequest",id:2}},nested:{Base:{fields:{ClientVersion:{type:"string",id:1},PageViewId:{type:"string",id:2},PageId:{type:"int64",id:3},DomainId:{type:"int32",id:4},CategoryId:{type:"int32",id:5},PublisherId:{type:"string",id:6},AbTestId:{type:"int32",id:7},UserId:{type:"string",id:8},Second:{type:"float",id:9},ProductType:{type:"ProductTypeEnum",id:10},IsMobile:{type:"bool",id:11},IsTablet:{type:"bool",id:12},isPortrait:{type:"bool",id:13},WidgetId:{type:"int32",id:14},HbToken:{type:"string",id:15},SecondGlobal:{type:"float",id:16}},nested:{ProductTypeEnum:{values:{Unknown:0,InImage:1,InContent:2,AnayticsScript:3}}}},HbBidRequest:{fields:{TagId:{type:"int32",id:1},Cpm:{type:"float",id:2},Duration:{type:"float",id:3},Status:{type:"int32",id:4},TimeInPocket:{type:"float",id:5},AuctionCpm:{type:"float",id:6},PocketCpm:{type:"float",id:7},TimeToRespond:{type:"float",id:8},PocketUsageType:{type:"PocketUsageTypeEnum",id:9},PocketSizeHT:{type:"int32",id:10},PocketSizeLT:{type:"int32",id:11}},nested:{PocketUsageTypeEnum:{values:{Unknown:0,FromAuction:1,FromHighTierPocket:2,FromLowTierPocket:3}}}}}}}};f.prototype.setHbBidRequestProto=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];window.Cbola.protobuf?I(e):(g||(g=!0,u.getJsBundle("external/protobuf.min.js").then(function(){for(;w.length>0;)I(w.shift())}).catch(c.noOp)),w.push(e))};var I=function(e){var o="SetHbBidRequestProto";m.isNil(v)&&(v=new Cbola.protobuf.Root,Cbola.protobuf.Root.fromJSON(_,v),C=v.lookupType("SetHbBidRequestParams"));var a=i();m.extend(a,{DomainId:a.domainId,CategoryId:a.categoryId,ProductType:r.ProductTypes.IN_CONTENT,PageId:Cbola.protobuf.util.LongBits.fromNumber(a.PageId).toLong()}),delete a.domainId,delete a.categoryId;var s={base:a,BidRequests:e},c=C.verify(s);if(c)return void l.errorM(n+"."+o,o+" failed on message verification, error: "+c);var h=C.create(s),u=C.encode(h).finish(),b={method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:u};fetch(""+p.Defaults.analyticsServer+o,b).then(t).then(function(){return l.info(d.PALE_PURPLE,"fire "+o+" analytics to server. payload: ",s)}).catch(function(){return l.trace(o+" failed.")})};return f.prototype.setLastMile=function(e){var i="SetLastMile";l.info(d.PALE_PURPLE,n+"::"+i);var o={public_key:h.activePid,domain_id:h.Domain,product_type:r.ProductTypes.IN_CONTENT,is_mobile:h.PageProperties.isMobile?1:0};m.extend(o,e),fetch(""+p.Defaults.analyticsServer+i+"?"+m.reduce(o,function(e,t,i){return e+(e?"&":"")+i+"="+t},""),{method:"GET"}).then(t).then(function(){return l.info(d.PALE_PURPLE,"fired "+i+" analytics to server.",o)}).catch(function(){return l.trace(d.PALE_RED,i+" failed.")})},new f}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders._Base=Cbola.Common.ConsentProviders._Base=function(){var e=Cbola,t=e._,i=Cbola.Logger.getInstance(),o=.5,n=32,r=function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;t()?i():setTimeout(function(){return e(t,i,Math.min(2*r,n))},1e3*r)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ConsentProviderBase";this.initialized=!1,this.name=e};return a.prototype={_waitForProvider:function(e){var o=this,n=void 0;return this.initialized?t.isFunction(e)||(n="Tester is not a function"):n="Not initialized",n?(i.errorM(this.name+"._waitForProvider",this.name+"._waitForProvider:: "+n),Promise.reject(new Error(n))):new Promise(function(t){r(e,function(){t(o)})})},init:function(){this.initialized=!0},getProviderPromise:function(){return Promise.reject("getProviderAsync not implemented")},hasConsentPromise:function(){return Promise.reject("testConsentAsync not implemented")}},a}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders.GoogleFC=Cbola.Common.ConsentProviders.GoogleFC||function(){var e=Cbola,t=e._,i=e.Utils,o=e.Common,n=o.AnalyticsService,r=o.ConsentProviders._Base,a=e.Enums.ConsentStatusTypes,s=null,l=null,d=null,c=null,h=function(){var e=i.isInIframe();return e&&i.isWindowTopSupported()?s=window.top:e||(s=window),!!s},m=function(){return!l&&s&&s.googlefc&&(l=s.googlefc,n.setConsentStatus(a.GOOGLE_FUNDING_CHOICES_FOUND)),!!l},p=function(e){var i=t.get(l,"ConsentStatusEnum",{}),o=e!==i.CONTRIBUTOR&&e!==i.NO_CONSENT;return n.setConsentStatus(e),o},u=function(){r.call(this,"GoogleFC")};return u.prototype=Object.create(r.prototype),u.constructor=u,u.prototype.init=function(){this.initialized=h()},u.prototype.getProviderPromise=function(){return d||(d=this._waitForProvider(m)),d},u.prototype.hasConsentPromise=function(){if(!c){var e=t.result(l,"getConsentStatus",-1);c=-1!==e?p(e)?Promise.resolve():Promise.reject():new Promise(function(e,i){l.callbackQueue.push(function(){p(t.result(l,"getConsentStatus",-1))?e():i()})})}return c},new u}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders.StandardCMP=Cbola.Common.ConsentProviders.StandardCMP||function(){var e=Cbola,t=e.Common,i=t.AnalyticsService,o=t.ConsentProviders._Base,n=e.Enums.ConsentStatusTypes,r=null,a=null,s=null,l=function(){for(var e=window;!r&&!a;){try{r=e.__cmp,a=e.frames["__cmpLocator"]}catch(e){}if(e===window.top)break;e=e.parent}var t=!(!r&&!a);return t&&i.setConsentStatus(n.IAB_STANDARD_CMP_FOUND),t},d=function(){o.call(this,"StandardCMP")};return d.prototype=Object.create(o.prototype),d.constructor=d,d.prototype.getProviderPromise=function(){return s||(s=this._waitForProvider(l)),s},d.prototype.hasConsentPromise=function(){return Promise.resolve()},new d}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders.Manager=Cbola.Common.ConsentProviders.Manager||function(){var e=Cbola,t=e._,i=e.Utils,o=e.Common.ConsentProviders,n=o.GoogleFC,r=o.StandardCMP,a={gfc:n,cmp:r},s=void 0,l=void 0,d=function(){this.activeProviders={}};return d.prototype={init:function(e){var i=this;t.extend(e,{cmp:!0}),t.forEach(e,function(e,t){e&&a[t]&&(i.activeProviders[t]=a[t],i.activeProviders[t].init())})},consentProviderFound:function(){if(!s){var e=t.map(this.activeProviders,function(e){return e.getProviderPromise()});s=Promise.race(e)}return s},hasConsent:function(){return l||(l=this.consentProviderFound().then(function(e){return e.hasConsentPromise()},i.noOp)),l}},new d}(),window.Cbola=window.Cbola||{},Cbola.Globals=Cbola.Globals||{},Cbola.Globals.AdsService=function(){var e=Cbola.Logger.getInstance(),t=window;try{window.top.document&&(t=window.top)}catch(e){}var i={},o={},n={},r=!1,a=function(){};a.prototype={registerLayerManager:function(t,i,r){if(o.hasOwnProperty(r)&&o[r])return void e.errorM("AdsService.registerLayerManager","Cbola.Globals.AdsService failed, trying to assign ad triggers manager to the same element ID.");if(o[r]=t,n[r]=i,this.onlyOneRegistration)for(var a in o)o.hasOwnProperty(a)&&a!==r.toString()&&this.unRegisterLayerManager(a)},unRegisterLayerManager:function(e){o.hasOwnProperty(e)&&o[e]&&(o[e].endAdsProcess(),delete o[e],delete n[e])},getTriggersManagerByElementId:function(e){return o[e]},getAllTriggersManagers:function(){return o},getAdsStoreByElementId:function(e){return n[e]},freezeAds:function(){for(var e in o)this.freezeAdsByElementId(e)},freezeAdsByElementId:function(e){o.hasOwnProperty(e)&&o[e]&&o[e].freezeAdsState()},addSovrnBeacon:function(i){try{if(!r&&i&&i.SovrnBeaconSrc&&i.SovrnBeaconId){r=!0;var o=t.document.createElement("script");o.id=i.SovrnBeaconId;var n=t.document.getElementsByTagName("head")[0];n&&(n.appendChild(o),o.src=i.SovrnBeaconSrc)}}catch(t){e.alwaysSendM("AdsService.addSovrnBeacon","Sovrn beacon injection failed.")}}};try{t!==window?(t.Cbola=t.Cbola||{},t.Cbola.Globals=t.Cbola.Globals||{},t.Cbola.Globals.AdsService=t.Cbola.Globals.AdsService||new a,i=t.Cbola.Globals.AdsService):i=new a}catch(t){i=new a,e.errorM("AdService","Failed to add AdService initialization process")}return i}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.TemplatesManagerBase=function(){var e=Cbola.Logger.getInstance(),t=Cbola,i=t._,o=t.Logger.Colors;return function(){function t(){_classCallCheck(this,t),this.Compiled={}}return _createClass(t,[{key:"getCompiledTemplate",value:function(t){return this.Compiled&&i.isFunction(this.Compiled[t])?this.Compiled[t]:i.isString(this[t])?(e.info(o.PALE_RED,"Templates.getCompiledTemplate, failed to find compiled template for "+t+"."),this.Compiled[t]=i.template(this[t],{variable:"data"}),this.Compiled[t]):null}}]),t}()}(),Cbola.Styles=function(){var e=Cbola,t=(e._,e.TemplatesManagerBase),i=e.Utils,o=Cbola.Logger.getInstance(),n="Styles";return new(function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"injectMainStyle",value:function(e,t){var i=Math.min(Math.floor(window.devicePixelRatio||1),3),o={clientPath:Cbola.Env.clientPath,retina:i>1?"@"+i+"x":""};return this.injectThemeStyle(e,t,o)}},{key:"injectThemeStyle",value:function(e,t,r){var a="injectMainStyle",s=this.getCompiledTemplate(t),l="";try{l=s(r)}catch(e){return o.errorM(n+","+a,""+n+a+" failed generating style for: "+t+", url: "+Cbola.Env.PageProperties.hostname),null}return i.injectStyle(e,l)}}]),t}(t))}(),Cbola.Templates=function(){var e=Cbola,t=e._,i=e.TemplatesManagerBase,o=Cbola.Logger.getInstance(),n="Templates";return new(function(e){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return _inherits(i,e),_createClass(i,[{key:"createElement",value:function(e){if(this[e]){var t=document.createElement("div");return t.innerHTML=this[e],t=t.children[0]}return null}},{key:"createWrappedDOMFromTemplate",value:function(e,t){var i="createWrappedDOMFromTemplate",r=this.getCompiledTemplate(e);if(r){var a="";try{a=r(t)}catch(t){return o.errorM(""+n+i,""+n+i+" failed generating template for: "+e+", url: "+Cbola.Env.PageProperties.hostname),null}var s=document.createElement("div");return s.innerHTML=a,s}return null}},{key:"createElementFromTemplate",value:function(e,i){var o=this.createWrappedDOMFromTemplate(e,i);return t.get(o,"children[0]",null)}},{key:"createFragmentFromTemplate",value:function(e,t){var i=this.createWrappedDOMFromTemplate(e,t);if(i){for(var o=document.createDocumentFragment();i.childNodes.length;)o.appendChild(i.childNodes[0]);return o}return null}}]),i}(i))}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["a9_dfp_banner.html"]=function(e){var t,i="";return i+='<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n  <meta charset="UTF-8">\r\n  <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"><\/script>\r\n  <script>\r\n\t  var Cbola_pbjs = Cbola_pbjs || {};\r\n\t  Cbola_pbjs.que = Cbola_pbjs.que || [];\r\n  <\/script>\r\n  <script type="text/javascript" src="'+(null==(t=e.clientPath)?"":t)+'external/prebid.min.js" async><\/script>\r\n  <script>\r\n\t  !function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");\r\n\r\n\t  var googletag = googletag || {};\r\n\t  googletag.cmd = googletag.cmd || [];\r\n\r\n\r\n\t  googletag.cmd.push(function() {\r\n\t\t  googletag.defineSlot(\''+(null==(t=e.slotName)?"":t)+"', [["+(null==(t=e.width)?"":t)+", "+(null==(t=e.height)?"":t)+"]], '"+(null==(t=e.slotID)?"":t)+"').addService(googletag.pubads());\r\n\t\t  googletag.pubads().disableInitialLoad();\r\n\t\t  googletag.pubads().enableSingleRequest();\r\n\t\t  googletag.enableServices();\r\n\t  });\r\n\r\n\t  apstag.init({\r\n\t\t  pubID:  '0b2db9a2-c936-4557-a140-fbff93318c8c',\r\n\t\t  adServer: 'googletag'\r\n\t  });\r\n  <\/script>\r\n</head>\r\n<body>\r\n  <div id=\""+(null==(t=e.slotID)?"":t)+"\">\r\n    <script>\r\n\t\t  googletag.cmd.push(function(){googletag.display('"+(null==(t=e.slotID)?"":t)+"');});\r\n    <\/script>\r\n  </div>\r\n</body>\r\n</html>\r\n"}}(),Cbola.Templates["advertisement_title.html"]="<div style=\"font-family:'Open Sans',sans-serif; font-size: 14px; font-weight:normal;color: rgb(200, 200, 200);text-align: center;height: 20px;margin:0;padding:0;\">- Advertisement -</div>",Cbola.Templates["ad_banner_sponsored_loading.html"]='<div class="cbola-banner-preload">\n  <div class="cbola-banner-preload__spinner">\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n  </div>\n  <div class="cbola-banner-preload__sponsored-text">\n    sponsored\n  </div>\n</div>',function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["ad_banner_structure.html"]=function(e){var t,i="";Array.prototype.join;return i+='<div  id="cbola-banner-structure'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+'" class="cbola-banner-structure cbola-banner-structure'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+' unselectDrag">\r\n  <div class="cbola-banner-preload">\r\n    <div class="cbola-banner-preload__spinner">\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n    </div>\r\n    <div class="cbola-banner-preload__sponsored-text">\r\n      sponsored\r\n    </div>\r\n  </div>\r\n  <div class="cbola-banner-structure__advertisement-title ',e.showAdvertisementTitle||(i+="cbola-fade-out"),i+='">'+(null==(t=e.advertisement)?"":t)+'</div>\r\n  <div class="hide-ad-button cbola-fade-out"></div>\r\n  <div id="cbola-banner'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+'" class="cbola-banner cbola-banner'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+'"></div>\r\n</div>\r\n'}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["ad_lightning_iframe.html"]=function(e){var t,i="";return i+='<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n  <meta charset="UTF-8">\r\n  <script src="https://tagan.adlightning.com/carambola/blacklist_script.js" type="text/javascript"><\/script>\r\n  <script src="https://tagan.adlightning.com/carambola/blocking_script.js" type="text/javascript"><\/script>\r\n  <script type="text/javascript">\r\n\t\tfunction createTagDetails() {\r\n\t\t\tvar tagDetails = {};\r\n\t\t\ttagDetails.w = '+(null==(t=e.width)?"":t)+";\r\n\t\t\ttagDetails.h = "+(null==(t=e.height)?"":t)+";\r\n\t\t\ttagDetails.dfpDetails = {advertiserId: '"+(null==(t=e.adId)?"":t)+"', creativeId: '"+(null==(t=e.adId)?"":t)+"'};\r\n\t\t\ttagDetails.au = '"+(null==(t=e.adId)?"":t)+"';\r\n\t\t\ttagDetails.markupInDom = true;\r\n            tagDetails.refreshMessage = '"+(null==(t=e.message)?"":t)+'\';\r\n\r\n\t\t\tvar random = Math.round(Math.random() * 1e8);\r\n\t\t\ttagDetails.currentTagId = "adltag_" + (((new Date()) * 1)) + "_" + random;\r\n\t\t\treturn tagDetails;\r\n\t\t}\r\n\t\tvar random = "" + Math.round(Math.random() * 1e8);\r\n\t\tvar site_id = random + "_" + "carambola";\r\n\t\twindow[site_id]={};\r\n\t\twindow[site_id].tagDetails=createTagDetails();\r\n\t\tblocker(site_id, "\x3c!--ADL_WRAPPED--\x3e", false, window);\r\n  <\/script>\r\n  <title>ad lighting</title>\r\n</head>\r\n<body>\r\n  '+(null==(t=e.tag)?"":t)+"\r\n</body>\r\n</html>\r\n"}}(),Cbola.Templates["desktop_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;width: 100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align: start;-webkit-align-items: flex-start;-ms-flex-align: start;align-items: flex-start;">\n  <div class="in-content-container-coverage" style="max-width:700px;min-width:440px;width:100%;position:relative;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;opacity: 0;">\n\n  </div>\n</div>',Cbola.Templates["desktop_trivia_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;clear:both">\n  <div class="in-content-container-coverage" style="box-sizing:content-box;margin:0 auto;position:relative;opacity:0;padding:0;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-ms-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;">\n\n  </div>\n</div>',function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["devcon_iframe.html"]=function(e){var t,i="";return i+='<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r\n    <title>devcon</title>\r\n</head>\r\n<body>\r\n    <div name="cb-wrapper">\r\n        <xmp id="template" style="display:none">\r\n            '+(null==(t=e.tag)?"":t)+'\r\n        </xmp>\r\n        <script src="https://cb-accept.com/service/js/29c43597-b2f7-401d-9548-b20ba4a8504e.js?random=[[[RANDOM ID]]]" type=\'text/javascript\'><\/script>\r\n        <script src="//cdn.includemodal.com/cb-caller.js" type=\'text/javascript\'><\/script>\r\n        <script type=\'text/javascript\'>\r\n          (function(){\r\n            X={\r\n              "adunit":"'+(null==(t=e.adId)?"":t)+'",\r\n              "h":"'+(null==(t=e.height)?"":t)+'",\r\n              "w":"'+(null==(t=e.width)?"":t)+'",\r\n              "cr":"'+(null==(t=e.tagType)?"":t)+'",\r\n              "a":"'+(null==(t=e.providerId)?"":t)+"\"\r\n            };\r\n            try{\r\n              scanner = new Scanner(\"29c43597-b2f7-401d-9548-b20ba4a8504e\",data,X,5,false);\r\n              scanner.scan();\r\n              console.log(\"Scanner Online\")\r\n            }catch(e){\r\n              var _0x3d58=['\\x77\\x72\\x69\\x74\\x65','\\x6c\\x6f\\x67','\\x67\\x65\\x74\\x45\\x6c\\x65\\x6d\\x65\\x6e\\x74\\x42\\x79\\x49\\x64','\\x74\\x65\\x6d\\x70\\x6c\\x61\\x74\\x65','\\x69\\x6e\\x6e\\x65\\x72\\x48\\x54\\x4d\\x4c'];(function(_0x28d62a,_0x1465d3){var _0x4bd8ef=function(_0x4e08c3){while(--_0x4e08c3){_0x28d62a['push'](_0x28d62a['shift']());}};_0x4bd8ef(++_0x1465d3);}(_0x3d58,0xec));var _0xd1bd=function(_0x45f1f1,_0x488d39){_0x45f1f1=_0x45f1f1-0x0;var _0x16cb2a=_0x3d58[_0x45f1f1];return _0x16cb2a;};console[_0xd1bd('0x0')]('\\x53\\x63\\x61\\x6e\\x6e\\x65\\x72\\x20\\x4f\\x66\\x66\\x6c\\x69\\x6e\\x65');console[_0xd1bd('0x0')](e);el=document[_0xd1bd('0x1')](_0xd1bd('0x2'));html=el[_0xd1bd('0x3')];document[_0xd1bd('0x4')](html);\r\n            }\r\n          })();\r\n        <\/script>\r\n    </div>\r\n</body>\r\n</html>\r\n"}}(),Cbola.Templates["framed_desktop_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;width: 100%;clear:both">\n  <div class="in-content-container__frame" style="border: 2px solid #c3c3c3;border-radius: 8px;padding: 5px;box-shadow: 3px 3px 3px 0 rgba(220, 220, 220, 0.8);margin: 20px auto 0;max-width: 700px;min-width: 440px;position: relative;">\n    <div class="in-content-container-coverage" style="margin:0 auto;max-width:700px;min-width:440px;position:relative;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;">\n\n\n    </div>\n  </div>\n</div>',Cbola.Templates["mobile_container.html"]='<div class="InContent-container-centerWrapper" style="line-height: normal;clear:both">\n\t<div class="in-content-container-coverage" style="float: none;opacity:0;position:relative;width:100%;padding-top:0;box-sizing: content-box;margin:0 auto">\n\t</div>\n</div>',function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["mobile_in_item_banner_structure.html"]=function(e){var t,i="";Array.prototype.join;return i+='<div id="cbola-box-item-ad_'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.adId)?"":t)+'" data-ad-id="'+(null==(t=e.adId)?"":t)+'" class="cbola-box-item-ad">\r\n  <div class="cbola-banner-preload">\r\n    <div class="cbola-banner-preload__spinner">\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n    </div>\r\n    <div class="cbola-banner-preload__sponsored-text">\r\n      sponsored\r\n    </div>\r\n  </div>\r\n  <div class="cbola-banner-structure__advertisement-title ',e.showAdvertisementTitle||(i+="cbola-fade-out"),i+='">'+(null==(t=e.advertisement)?"":t)+'</div>\r\n  <div class="cbola-banner">\r\n\r\n  </div>\r\n</div>'}}(),Cbola.Templates["sidebar_container.html"]='<div class="cbola-layer in-content-container-centerWrapper " style="position:relative;line-height:normal;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align: start;-webkit-align-items: flex-start;-ms-flex-align: start;align-items: flex-start;">\n  <div style="opacity:0;position:relative;padding-top: 0;box-sizing: content-box;" class="in-content-container-coverage">\n\n  </div>\n</div>',Cbola.Templates["width_check.html"]='<div id="carambola_InContent_checkWidth" style="width:100%"></div>',function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["cbolaPlatform.css"]=function(e){var t,i="";return i+=".cbola-icon,.hide-ad-button:before{speak:none;text-rendering:auto;-moz-osx-font-smoothing:grayscale}.cbola-no-select,.cbola-no-select>*,.unselectDrag{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.cbola-disable-transition,.cbola-disable-transition *{-webkit-transition:none!important;transition:none!important}.cbola-clearfix{overflow:auto;zoom:1}.cbola-loader{position:absolute;top:50%;left:50%;margin-left:-19px!important;margin-top:-19px!important;height:38px;width:38px;border:4px solid rgba(100,100,100,.3);border-top:4px solid rgba(100,100,100,.9);border-radius:50%;-webkit-animation:cbola-rotation 1.2s infinite linear;animation:cbola-rotation 1.2s infinite linear;box-sizing:border-box}@-webkit-keyframes cbola-rotation{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cbola-rotation{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}span.cbola-clamped-text{overflow:hidden;position:relative;line-height:1.4em;max-height:2.8em;text-align:justify;display:block;padding-right:1em;margin-left:1em}span.cbola-clamped-text:before{content:'...';position:absolute;right:0;bottom:0}span.cbola-clamped-text:after{content:'';position:absolute;right:0;width:1em;height:1em;margin-top:.2em;background:#fff}.cbola-fade-out{opacity:0!important;pointer-events:none}.cbola-fade-in{opacity:1!important;pointer-events:auto}.cbola-hidden{visibility:hidden!important;pointer-events:none}.cbola-hide{display:none!important}.cbola-hide-scrollbars::-webkit-scrollbar{display:none}.cbola-ghost-center-container:before,.cbola-ghost-center-inner{display:inline-block;vertical-align:middle}.cbola-ghost-center-container{position:relative;font-size:0}.cbola-ghost-center-container:before{content:' ';height:100%}.cbola-banner-structure{position:absolute;font-size:10px;color:#999;text-align:center;opacity:1;font-family:'Open Sans';cursor:default;padding:0;z-index:3;line-height:normal!important;overflow:hidden}.hide-ad-button{position:absolute;cursor:pointer;top:1px;right:1px;margin-top:0;z-index:999999;width:18px;height:18px;background-color:#000;border-radius:50%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;overflow:hidden}.hide-ad-button:before{font:normal normal normal 12px/1 cbolaIcons;font-family:cbolaIcons!important;content:\"\\f00d\";text-transform:none;-webkit-font-smoothing:antialiased;color:#FFF}.cbola-banner-structure__advertisement-title{z-index:999999;position:absolute;left:0;top:0;background-color:rgba(0,0,0,.4);color:#fff;padding:1px 4px 2px 3px!important;font-size:8px!important;font-weight:600;text-transform:capitalize;font-family:\"Open Sans\",Arial,sans-serif!important;border-bottom-right-radius:8px;letter-spacing:.1em;pointer-events:none;line-height:normal}.cbola-banner{position:relative;z-index:5;opacity:1;height:100%;overflow:visible;text-align:center;-webkit-transform-origin:50% 0 0;transform-origin:50% 0 0;margin-right:auto!important;margin-left:auto!important}.cbola-banner iframe{max-width:none;border:0}.cbola-banner__tag{position:absolute;top:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.cbola-banner__tag--front{z-index:10}.cbola-banner__tag--back{z-index:5}.cbola-banner-preload--active{height:90%;width:90%;top:5%;left:5%;background-color:#c3d9ff}.cbola-banner-preload{width:100%;height:100%;position:absolute;top:0;left:0;z-index:0;background-color:#f6f6f6;overflow:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.cbola-banner-preload__spinner{height:25px;width:25px;position:relative}.cbola-banner-preload-spinner__path{height:11px;width:4px;position:absolute;top:0;left:calc(50% - 3px);-webkit-transform-origin:center bottom;transform-origin:center bottom}.cbola-banner-preload-spinner__path:before{content:' ';display:block;height:8px;width:100%;border-radius:30%;background-color:#c5c5c5;opacity:.5;position:absolute;top:-2px;-webkit-animation:bgColorChange 1.2s linear infinite;animation:bgColorChange 1.2s linear infinite;will-change:opacity}.cbola-banner-preload-spinner__path:nth-child(1){-webkit-transform:rotate(45deg);transform:rotate(45deg)}.cbola-banner-preload-spinner__path:nth-child(2):before{-webkit-animation-delay:.15s;animation-delay:.15s}.cbola-banner-preload-spinner__path:nth-child(2){-webkit-transform:rotate(90deg);transform:rotate(90deg)}.cbola-banner-preload-spinner__path:nth-child(3):before{-webkit-animation-delay:.3s;animation-delay:.3s}.cbola-banner-preload-spinner__path:nth-child(3){-webkit-transform:rotate(135deg);transform:rotate(135deg)}.cbola-banner-preload-spinner__path:nth-child(4):before{-webkit-animation-delay:.45s;animation-delay:.45s}.cbola-banner-preload-spinner__path:nth-child(4){-webkit-transform:rotate(180deg);transform:rotate(180deg)}.cbola-banner-preload-spinner__path:nth-child(5):before{-webkit-animation-delay:.6s;animation-delay:.6s}.cbola-banner-preload-spinner__path:nth-child(5){-webkit-transform:rotate(225deg);transform:rotate(225deg)}.cbola-banner-preload-spinner__path:nth-child(6):before{-webkit-animation-delay:.75s;animation-delay:.75s}.cbola-banner-preload-spinner__path:nth-child(6){-webkit-transform:rotate(270deg);transform:rotate(270deg)}.cbola-banner-preload-spinner__path:nth-child(7):before{-webkit-animation-delay:.9s;animation-delay:.9s}.cbola-banner-preload-spinner__path:nth-child(7){-webkit-transform:rotate(315deg);transform:rotate(315deg)}.cbola-banner-preload-spinner__path:nth-child(8):before{-webkit-animation-delay:1.15s;animation-delay:1.15s}@-webkit-keyframes bgColorChange{0%{opacity:.5}12.5%{opacity:1}25%,37.5%{opacity:.9}50%{opacity:.8}62.5%{opacity:.6}100%,75%{opacity:.5}}@keyframes bgColorChange{0%{opacity:.5}12.5%{opacity:1}25%,37.5%{opacity:.9}50%{opacity:.8}62.5%{opacity:.6}100%,75%{opacity:.5}}.cbola-banner-preload__sponsored-text{margin-top:2px;font-family:Roboto;font-size:14px;letter-spacing:-.2px;color:#bebebe;text-transform:capitalize}@font-face{font-family:cbolaIcons;src:url('"+(null==(t=e.clientPath)?"":t)+"css/fonts/cbolaIcons.woff?phtwnv') format(\"woff\"),url('"+(null==(t=e.clientPath)?"":t)+"css/fonts/cbolaIcons.ttf?phtwnv') format(\"truetype\"),url('"+(null==(t=e.clientPath)?"":t)+'css/fonts/cbolaIcons.svg?phtwnv#cbolaIcons\') format("svg");font-weight:400;font-style:normal}.cbola-icon{display:inline-block;font:normal normal normal 14px/1 cbolaIcons;font-family:cbolaIcons!important;font-size:inherit;text-transform:none;-webkit-font-smoothing:antialiased;-webkit-transform:translate(-1px,1px);transform:translate(-1px,1px);font-style:inherit!important}.cbola-icon-check:before{content:"\\f00c"}.cbola-icon-times:before{content:"\\f00d"}.cbola-icon-chevron-left:before{content:"\\f053"}.cbola-icon-chevron-right:before{content:"\\f054"}.cbola-icon-twitter:before{content:"\\f099"}.cbola-icon-facebook:before{content:"\\f09a"}.cbola-icon-hand-o-up:before{content:"\\f0a6"}.cbola-icon-angle-left:before{content:"\\f104"}.cbola-icon-angle-right:before{content:"\\f105"}.cbola-icon-share-alt-thick:before{content:"\\f1e0"}.cbola-icon-whatsapp:before{content:"\\f232"}.cbola-icon-share-alt-thin:before{content:"\\e900"}.cbola-icon-retweet:before{content:"\\f079"}.cbola-icon-star:before{content:"\\f005"}.cbola-icon-arrow-left:before{content:"\\f060"}.cbola-icon-arrow-right:before{content:"\\f061"}.cbola-inserted{-webkit-animation-duration:1ms;animation-duration:1ms;-webkit-animation-name:cbolaInserted;animation-name:cbolaInserted;visibility:hidden}@-webkit-keyframes cbolaInserted{from{opacity:.99}to{opacity:1}}@keyframes cbolaInserted{from{opacity:.99}to{opacity:1}}'}}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.IframeBuster=function(){var e=Cbola,t=e._,i=e.Config,o=Cbola.Logger.getInstance();return function(){function e(i,o,n){_classCallCheck(this,e),this.iframeBusterOptions={hasLocationSelectors:!t.isEmpty(t.result(i,"LocationSelector",{})),iFrameAdjust:t.result(i,"iFrameAdjustForTablet",!1)&&Cbola.Env.PageProperties.isTablet||t.result(i,"iFrameAdjust",!1),mobileiFrameAdjust:t.result(i,"mobileiFrameAdjust",!1),iFrameBusterWidth:i.iFrameBusterWidth,fixedHeight:t.result(i,"iFrameFixedHeight",null),fixedWidth:t.result(i,"iFrameFixedWidth",null),advertisementTitleHeight:t.result(i,"IncludeAdvertisementTitle",!1)?20:0},this.layerType=n,this.widgetId=o,this.iFrameElement=null,this.iframePropertiesSet=!1}return _createClass(e,null,[{key:"pushScriptAboveIframe",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=window,n=o.frameElement;n&&o.parent&&o.parent!==o.top;)o=o.parent,n=o.frameElement;if(t.isNil(n))return!1;n.insertAdjacentHTML("beforebegin",'<script class="'+i.inContentClass+'" cbola_wid="'+e+'" data-manual-build="true"><\/script>'),n.style["height"]="0";var r=document.createElement("script");r.src=Cbola.Env.proxyElem.src,r.id=i.proxyId,r.setAttribute("mediatype","InContent");var a=parent.document.getElementsByTagName("script")[0];return a.parentNode.insertBefore(r,a),!0}}]),_createClass(e,[{key:"init",value:function(){if(this.findIframeElement().checkIframeDimension(),this.iframeBusterOptions.fixedHeight||this.iframeBusterOptions.fixedWidth){var e=this.getIframe();e&&(this.iframeBusterOptions.fixedHeight&&(e.style["height"]=this.iframeBusterOptions.fixedHeight+this.iframeBusterOptions.advertisementTitleHeight+"px"),this.iframeBusterOptions.fixedWidth&&(e.style["width"]=this.iframeBusterOptions.fixedWidth+"px")),this.setIframeProperties()}return 112566===Cbola.Env.domainId&&this.prizeGrabHack(),this}},{key:"checkIframeDimension",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="IframeBuster.checkIframeDimension",n=this.iframeBusterOptions;if(!this.shouldBust())return this;var r=n.iFrameBusterWidth||0,a=this.getIframe(),s=a.getBoundingClientRect();try{var l=i.getLayersDefaultSizeForIframe(this.layerType);l.height+e+n.advertisementTitleHeight>s.height&&(o.info("Iframe's height was change from: "+s.height+" to "+(l.height+e+n.advertisementTitleHeight)),a.style["height"]=l.height+e+n.advertisementTitleHeight+"px"),a.style["width"]="100%",0!==r?(a.style["min-width"]=r+"px",o.info("Iframe's min-width was change to: "+r)):-1!==l.width&&(a.style["min-width"]=l.width+"px",o.info("Iframe's min-width was change to: "+l.width)),this.setIframeProperties()}catch(e){o.errorM(t,t+" failed, Path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid)}return this}},{key:"setIframeSize",value:function(e,t){if(!this.shouldBust())return this;var i=this.getIframe();if(!i)return this;var o=void 0!==e?e:window.parent.innerWidth,n=void 0!==t?t:0;return i.style["width"]=o+"px",0!==n&&(i.style["height"]=n+this.iframeBusterOptions.advertisementTitleHeight+"px"),this}},{key:"setIframeProperties",value:function(){var e="IframeBuster.setIframeProperties",t=this.getIframe();if(!this.iframePropertiesSet&&t)try{t.setAttribute("scrolling","no"),t.setAttribute("marginwidth","0"),t.setAttribute("marginheight","0"),t.setAttribute("frameborder","0");var i=t.contentDocument||t.contentWindow.document||document;i&&(i.body.style["margin"]=0,i.body.style["overflow"]="hidden"),this.iframePropertiesSet=!0}catch(t){o.errorM(e,e+" failed setting iframe attributes and style")}return this}},{key:"prizeGrabHack",value:function(){var e=this.getIframe();if(e){var t=e.contentDocument.head.querySelector("style");e.contentDocument.head.removeChild(t)}}},{key:"findIframeElement",value:function(){var e="IframeBuster.findIframeElement";try{this.iFrameElement=window.frameElement||null}catch(t){o.errorOnceM(e,e+" failed getting iframe element, wid: "+this.widgetId+", e:",t)}return this}},{key:"shouldBust",value:function(){var e=this.iframeBusterOptions,i=Cbola.Env.PageProperties.isMobile;return!e.hasLocationSelectors&&(e.iFrameAdjust&&!i||e.mobileiFrameAdjust&&i)&&!t.isNil(this.iFrameElement)}},{key:"getIframe",value:function(){return this.iFrameElement}}]),e}()}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Item=function(){var e=Cbola,t=e.Utils,i=e._,o=function e(t){i.extend(this,t),this.Type===e.Types.TWEET&&(i.extend(this,this.Tweet),delete this.Tweet),this.becameViewableAt=0,this.lastViewableDuration=0,this.viewOrder=1,this.displayOrder=1,this.isViewable=!1,this.userAnswerId=0};return o.prototype.setOpenType=function(e){this.openType=e},o.prototype.setCloseType=function(e){this.closeType=e},o.prototype.setDisplayOrder=function(e){this.displayOrder=e},o.prototype.setViewOrder=function(e){this.viewOrder=e},o.prototype.setUserAnswerId=function(e){this.userAnswerId=e||0},o.prototype.setViewable=function(e){if(this.isViewable=e,e)this.becameViewableAt=t.getRunTimeInSecs();else{var i=t.getRunTimeInSecs()-this.becameViewableAt;this.lastViewableDuration=Math.round(100*i)/100}},o.prototype.getViewableDuration=function(){return this.isViewable?t.getRunTimeInSecs()-this.becameViewableAt:this.lastViewableDuration},o.prototype.isAd=function(){return this.type===o.Types.AD},o.prototype.getType=function(){return this.type||this.Type},o.Types={FACT:1,TIP:2,QUOTE:3,ON_THIS_DAY:4,TRIVIA:5,DIED_THIS_DAY:6,TRIVIA_MULTI:7,TRIVIA_MULTI_PAIRS:8,GAME_SET:254,CHART:255,TWEET:9,AD:-1e3},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.BasicService=function(){var e=Cbola,t=e._,i=e.Common,o=i.RequestHandler,n=i.UserService,r=e.InContent.Layers.Item,a=Cbola.Logger.getInstance(),s={},l=function(){this.pendingItems=[],this.historicallyViewedItems=[]};return l.prototype.getMoreItems=function(e,i,n){var r=this,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=[],h=this.getSession(e),m=this.getOrCreatePendingItems(i),p=function(){var o=r.getHistoricallyViewedItems(i);if(!o.length||h.length)return o.splice(0),[];var n=t.differenceBy(o,h,"Id");return o.splice(0),s[e]=t.unionBy(h,n,"Id"),n||[]},u=function(){c=m.splice(0,Math.max(l,5));var i=t.differenceBy(c,h,"Id");s[e]=t.unionBy(h,i,"Id"),n(i)};if(m.length>=l)u();else{if(a.debug(this.name+"::getMoreItems -> quering server for more items..."),(d+=1)>1)return void(m.length>0?u():n(p()));var b=this.extendParams({WidgetId:i,ElementId:e,CurrentSession:t.map(h,function(e){return e.Id})});o.getMoreContent(b).then(function(o){if(a.debug(r.name+"::getMoreItems -> got more items from server"),t.isEmpty(o))return void n(p());var s=r.transformServerResponse(o),c=t.unionBy(m,s,"Id");c.unshift(0,m.length),m.splice.apply(m,c),r.getMoreItems(e,i,n,l,d)}).catch(function(){return n(p())})}},l.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(t){e.FallbackMinimalWidth=0}return e},l.prototype.transformServerResponse=function(e){return e.map(function(e){return new r(e)})},l.prototype.clearSession=function(e){return s[e]=[],this},l.prototype.getSession=function(e){return void 0===s[e]&&(s[e]=[]),s[e]},l.prototype.addItem=function(e,t){e&&!n.wasItemAlreadyViewed(e)?this.getOrCreatePendingItems(t).push(e):e&&this.getHistoricallyViewedItems(t).push(e)},l.prototype.getOrCreatePendingItems=function(e){var i=parseInt(e);return t.isArray(this.pendingItems[i])||(this.pendingItems[i]=[]),this.pendingItems[i]},l.prototype.getHistoricallyViewedItems=function(e){var i=parseInt(e);return t.isArray(this.historicallyViewedItems[i])||(this.historicallyViewedItems[i]=[]),this.historicallyViewedItems[i]},l.prototype.getAll=function(){return this.pendingItems},l.prototype.getAllByWidgetId=function(e){var t=parseInt(e);return this.pendingItems[t]},l}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisDayService=function(){function e(e){return!(!e||!e.OnThisDayDate)&&t(i,new Date(e.OnThisDayDate))}function t(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var i=new Date,o=Cbola,n=o._,r=o.InContent.Layers.Services.BasicService,a=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),s=function(){r.call(this),this.name="DiedThisDayService"};return n.extend(s.prototype,r.prototype),s.prototype.extendParams=function(e){return r.prototype.extendParams.call(this,e),e.ClientDate=a,e},s.prototype.transformServerResponse=function(t){var i=r.prototype.transformServerResponse.call(this,t),o=n.filter(i,e);return o.sort(),o},s.prototype.addItem=function(t,i){e(t)&&r.prototype.addItem.call(this,t,i)},s.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},s.prototype.setTotalItemsForToday=function(e){var o=0;n.forEach(e,function(e){t(i,new Date(e.Day))&&(o=e.ItemCount)}),this.totalItemsAvailableOnServer=o},s.prototype.getDateDay=function(){return i.getDate()},new s}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisWeekService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,i=function(){e.call(this),this.name="DiedThisWeekService",this.totalItemsAvailableOnServer=0};return t.extend(i.prototype,e.prototype),i.prototype.getTotalItemsAvailableForThisWeek=function(){return this.totalItemsAvailableOnServer},i.prototype.setTotalItemsForThisWeek=function(e){this.totalItemsAvailableOnServer=e.reduce(function(e,i){return e+t.result(i,"ItemCount",0)},0)},new i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.FactsService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,i=function(){e.call(this),this.name="FactsService"};return t.extend(i.prototype,e.prototype),new i}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.IndicesService=Cbola.InContent.Layers.Services.IndicesService||function(){var e=Cbola,t=e._,i=e.Env,o=e.Utils,n=e.Common,r=n.RequestHandler,a=n.UserService,s=e.InContent.Layers.Item,l=Cbola.Logger.getInstance(),d="cbola_loc",c={Items:[]},h=t.memoize(function(){try{return i.topWindow.location.href.pathname.split("/")}catch(e){return[]}});return new(function(){function e(){_classCallCheck(this,e),this.setPageParamsOnce=t.once(function(){var e=null,n=null;if(i.DEBUG){var r=o.getUrlParams(),s=r.cbolalanguage,l=r.cbolalocationkey;e=s,n=l}var c=e||t.get(i.topWindow,d+".lang")||h()[1]||a.getLanguage();this.language=t.first(c.split("-")),a.setLanguage(this.language),this.locationKey=n||t.get(i.topWindow,d+".key")||h()[6]}),this.name="IndicesService",this.language="",this.locationKey=""}return _createClass(e,[{key:"getMoreItems",value:function(e,t){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return this.setPageParamsOnce(),l.debug(this.name+"::getMoreItems -> quering server for more items..."),r.getIndices(this.locationKey,this.language,e,t,o).then(function(e){return i.handleResponse(e,o)},function(){return Promise.resolve(c)})}},{key:"handleResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];l.debug(this.name+"::handleResponse -> data: "+e);var o=e.Items,n=void 0===o?[]:o;return e.Items=n.reduce(function(e,o){return t.isArray(o.Indices)&&o.Indices.length===i&&(o.Indices=o.Indices.map(function(e){return new s(e)}),e.push(o)),e},[]),Promise.resolve(e)}}]),e}())}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.OnThisDayService=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Services.BasicService,o=new Date,n=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),r=!1,a={es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],pt:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],en:["January","February","March","April","May","June","July","August","September","October","November","December"],ja:["1","2","3","4","5","6","7","8","9","10","11","12"]},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.match(/(\d+)/g);return t.length>=3?new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])):null},l=function(e){var t=s(e.OnThisDayDate);t&&(o=t,n=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate())},d=function(e){if(r)return!0;if(e){var t=s(e.OnThisDayDate);if(t)return c(o,t)}return!1},c=function(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},h=function(){i.call(this),this.name="OnThisDayService"};return t.extend(h.prototype,i.prototype),h.prototype.extendParams=function(e){return i.prototype.extendParams.call(this,e),e.ClientDate=n,e},h.prototype.transformServerResponse=function(e){var o=i.prototype.transformServerResponse.call(this,e);return t.filter(o,d).sort()},h.prototype.addItem=function(e,t){d(e)&&i.prototype.addItem.call(this,e,t)},h.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},h.prototype.setTotalItemsForToday=function(e){var t=0;for(var i in e){var n=e[i],r=new Date(n.Day);c(o,r)&&(t=n.ItemCount)}this.totalItemsAvailableOnServer=t},h.prototype.getDateDay=function(){return o.getDate()},h.prototype.getMonthName=function(e){return e=a.hasOwnProperty(e)?e:"en",a[e][o.getMonth()]},h.prototype.setIgnoreClientDate=function(e,t){r=Cbola.Utils.parseBool(e),void 0!==t&&l(t)},new h}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.TriviaService=function(){var e=Cbola.Common.UserService,t=Cbola.InContent.Layers.Item,i=Cbola.Logger.getInstance(),o={},n=Cbola.InContent.Layers.Item.Types,r={TRUE_FALSE:[n.TRIVIA],MULTI_ANSWER:[n.TRIVIA_MULTI,n.TRIVIA_MULTI_PAIRS]},a={},s={},l=0,d=Cbola._,c=Cbola.EventBus,h=Cbola.Common.RequestHandler,m=function(){this.triviaTypes={};for(var e in r)r.hasOwnProperty(e)&&(this.triviaTypes[e]=e)};m.prototype.setFirstItemId=function(e){l=e},m.prototype.getNewGame=function(e,t,o,n,r){if(void 0===r&&(r=0),r>1)return void n(null);r++;var d=this.getPendingGamesByTriviaType(o),c=this.getOrCreateSession(e);if(d.length>0&&!l){var h=d.shift();delete a[h.id],h.widgetId=t,h.elementId=e,c.push(h),s[e]=c,n(h)}else i.debug("TriviaService::getNewGame -> quering server for more items..."),this.getMoreFromServer(e,t,o,function(){this.getNewGame(e,t,o,n,r)}.bind(this))},m.prototype.prepareNewGame=function(e,t,i){var o=this.translateItemToTriviaType(i);this.getPendingGamesByTriviaType(o).length>0||this.getMoreFromServer(e,t,o)},m.prototype.getMoreFromServer=function(o,n,r,s){var c=this,m=this.getOrCreateSession(o);i.debug("TriviaService::getNewGame -> quering server for more items...");var p={WidgetId:n,ElementId:o,CurrentSession:d.map(m,function(e){return e.id}),UserHistory:e.getItemsHistory(),FirstItemId:l};p=this.extendParams(p),h.getMoreContent(p).then(function(e){var o=e.map(function(e){return new t(e)}),n=c.getPendingGamesByTriviaType(r);i.debug("TriviaService::getMoreFromServer -> got more items from server");var h=d.groupBy(o,"ParentId");d.forEach(h,function(e,t){var i=a[t];i&&!i.hasAllItems()?i.items=d.unionBy(i.items,e,"Id"):i||(i=new b(e)),l?(l=0,n.unshift(i)):n.push(i),a[t]=i,s&&s(o)})}).catch(function(){s&&s([])})},m.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(t){e.FallbackMinimalWidth=0}return e},m.prototype.clearSession=function(e){s[e]=[]},m.prototype.getOrCreateSession=function(e){var t=null;return void 0===s[e]?(t=[],s[e]=t):t=s[e],t},m.prototype.addItem=function(t){var i=t.ParentId,o=t.Type,n=a[i];if(!e.wasItemAlreadyViewed(t))if(n)n.hasAllItems()||(n.items=d.unionBy(n.items,[t],"Id"));else{var r=new b([t]),s=this.getPendingGamesByTriviaType(this.translateItemToTriviaType(o));s.push(r),a[i]=r}},m.prototype.getAll=function(){return o},m.prototype.getPendingGamesByTriviaType=function(e){return o.hasOwnProperty(e)||(o[e]=[]),o[e]},m.prototype.translateItemToTriviaType=function(e){for(var t in r)if(r.hasOwnProperty(t)&&r[t].indexOf(e)>-1)return t};var p=function(e){for(var t="",i=0;i<e.length;i++)if(!d.isEmpty(e[i].ChartTitle)){t=e[i].ChartTitle;break}return t},u=function(e){for(var t="",i=0;i<e.length;i++)if(!d.isEmpty(e[i].Title)){t=e[i].Title;break}return t},b=function(t){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.id=e[0].ParentId,t.gameType=e[0].Type,t.title=p(e),t.shortTitle=u(e),t.items=e,t.currItemIdx=0,t.score=0,t.firstItem=e[0].Id,t.isCompleted=!1,t.historized=!1,t}return _inherits(i,t),_createClass(i,[{key:"getQuestionItem",value:function(e){return this.items[e]}},{key:"getCurrentQuestionItem",value:function(){return this.items[this.currItemIdx]}},{key:"getNextQuestionItem",value:function(){return this.items[this.currItemIdx+1]}},{key:"getCurrentQuestionNumber",value:function(){return this.currItemIdx+1}},{key:"hasEnded",value:function(){return this.isCompleted}},{key:"answerCurrentQuestion",value:function(t){if(this.isCompleted)return null;var i=this.items[this.currItemIdx],o=!1;0===t||this.historized||(this.historized=!0,e.addItemsToHistory([this.id]));for(var n=0;n<i.Answers.length;n++){var r=i.Answers[n];if(parseInt(t)===r.Id){1===r.Type&&(this.score+=1,o=!0);break}}return this.currItemIdx++,this.isAboutToEnd()&&Cbola.InContent.Layers.Services.TriviaService.prepareNewGame(this.elementId,this.widgetId,this.gameType),this.currItemIdx===this.items.length&&(this.isCompleted=!0,this.currItemIdx=this.items.length-1),o}},{key:"getCurrentQuestionCorrectAnswerIdx",value:function(){if(this.isCompleted)return null;for(var e=this.items[this.currItemIdx],t=0;t<e.Answers.length;t++)if(1===e.Answers[t].Type)return t}},{key:"getCurrentQuestionCorrectAnswerId",value:function(){if(this.isCompleted)return null;for(var e=this.items[this.currItemIdx],t=0;t<e.Answers.length;t++){var i=e.Answers[t];if(1===i.Type)return i.Id}}},{key:"restart",value:function(){this.score=0,this.currItemIdx=0,this.isCompleted=!1}},{key:"hasAllItems",value:function(){return this.gameType===Cbola.InContent.Layers.Item.Types.TRIVIA&&10===this.items.length}},{key:"isAboutToEnd",value:function(){var e=this.currItemIdx+2===this.items.length;return e&&c.fire(""+c.Events.TRIVIA_BEFORE_END+this.id),e}}]),i}(t);return new m}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.TweetsService=function(){function e(e){if(o.isEmpty(e))return"";var t=Date.parse(e),i=r-t;return i<0?"":i<6e4?o.round(i/1e3,0)+"s":i<36e5?o.round(i/6e4,0)+"m":i<864e5?o.round(i/36e5,0)+"h":i<2592e6?o.round(i/864e5,0)+"d":i<31104e6?o.round(i/2592e6,0)+"mo":o.round(i/10368e5)+"y"}function t(e){return e<1e3?e:e>=1e3&&e<1e6?o.round(e/1e3,e>=1e5?0:1)+"k":o.round(e/1e6,e>=1e7?0:1)+"M"}var i=Cbola,o=i._,n=i.InContent.Layers.Services.BasicService,r=Date.now(),a=function(){n.call(this),this.name="TweetsService"};return o.extend(a.prototype,n.prototype),a.prototype.transformServerResponse=function(i){var r=n.prototype.transformServerResponse.call(this,i);return o.map(r,function(i){return i.Favs=t(i.Favs),i.Retweets=t(i.Retweets),i.elapsedTime=e(i.PostDate||""),i.HasImage=!!i.HasImage,i})},a.prototype.addItem=function(e,t){n.prototype.addItem.apply(this,[o.head(this.transformServerResponse([e])),t])},new a}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.FontsManager=function(){var e=Cbola,t=e._,i=e.Env,o={},n={OpenSans:"Open+Sans:300italic,400italic,600italic,700italic,800italic,400,600,300,700,800",Oswald:"Oswald:400,700,300",Nunito:"Nunito:500,600,300,700,400",Roboto:"Roboto:500,300,700,400",Heebo:"Heebo:400,500"},r=function(){this.windowHead=document.getElementsByTagName("head")[0];try{this.topWindowHead=window!==window.top?window.top.document.getElementsByTagName("head")[0]:null}catch(e){this.topWindowHead=null}};return t.forEach(n,function(e,i){r.prototype["get"+i]=t.once(function(){this.loadFont("https://fonts.googleapis.com/css?family="+e)})}),r.prototype.getKnowledge=t.once(function(){var e=i.protocol+"//static.reutersmedia.net/resources_v2/fonts/Knowledge";o["Knowledge"]=!0;var t=document.createElement("style");t.appendChild(document.createTextNode("\n\t\t\t\t@font-face {font-family: 'knowledge-regular';\tsrc: url('"+e+"-Regular.woff') format('woff');\tfont-weight: normal; font-style: normal;}\n\t\t\t\t@font-face {font-family: 'knowledge-medium'; src: url('"+e+"-Medium.woff') format('woff'); font-weight: normal; font-style: normal;}")),document.head.appendChild(t)}),r.prototype.loadFont=function(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),this.windowHead.appendChild(t);try{if(this.topWindowHead){var i=t.cloneNode();this.topWindowHead.appendChild(i)}}catch(e){}},new r}(),window.Cbola=window.Cbola||{},Cbola.Globals=Cbola.Globals||{},Cbola.Globals.ElementIdFactory=Cbola.Globals.ElementIdFactory||function(){var e=void 0,t=0,i=window;try{window.top.document&&(i=window.top)}catch(e){}var o=function(){};o.prototype={getGlobalElementId:function(){return-1*++t},getElementId:function(){return t}};try{i!==window?(i.Cbola=i.Cbola||{},i.Cbola.Globals=i.Cbola.Globals||{},i.Cbola.Globals.ElementIdFactory=i.Cbola.Globals.ElementIdFactory||new o,e=i.Cbola.Globals.ElementIdFactory):e=new o}catch(t){e=new o}return e}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Factory={},Cbola.InContent.Layers.Factory=function(){var e=Cbola,t=e._,i=e.Utils,o=e.Common,n=o.RequestHandler,r=o.TimelineService,a=e.InContent.Layers,s=Cbola.Logger.getInstance(),l="LayersFactory",d=function(){};return d.prototype.create=function(e){s.info(l+".create -> creating layer "+e);var i=a.TYPES_TO_NAMES_MAP[e];return t.isEmpty(i)?(s.info(l+".create","No layer prototype found for layer "+e),null):new a[i]},d.prototype.shouldFetch=function(e){var i=a.TYPES_TO_NAMES_MAP[e];return t.isNil(a[i])},d.prototype.createAsync=function(e,t){var i=this,o=Cbola.Env;if(r.markStart(l+" -> creating layer "+e),this.shouldFetch(e))if(o.DEBUG){var a=document.createElement("script");a.onload=function(){t&&t(i.create(e))};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(a,d),a.src=o.clientPath+"container/layer_"+e+"/cbola_layer_"+e+o.clientPathType+".js"}else n.getLayerScript(e).then(function(){r.markEnd(l+" -> creating layer "+e),t&&t(i.create(e))}).catch(function(){s.errorM(l+".createAsync",l+".createAsync failed fetching layer "+e)});else r.markEnd(l+" -> creating layer "+e),t&&t(this.create(e))},d.prototype.createLayerContainers=function(e){var o="";switch(e.type){case 100:case 101:case 110:Cbola.Env.DEBUG&&(e.data.DefaultSettings.FramedLayer=!0),o="desktop_container.html",Cbola.Utils.checkImageLoaded(e.data.Image);break;case 102:case 112:o=(t.result(e,"data.DefaultSettings.FramedLayer")?"framed_":"")+"desktop_container.html",i.checkImageLoaded(e.data.Image);break;case 120:case 121:o="desktop_trivia_container.html";break;case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 137:case 138:case 139:case 140:case 150:case 151:case 152:case 153:o="sidebar_container.html";break;case 160:case 170:o="desktop_container.html";break;case 1e3:case 1100:case 1400:o="mobile_container.html";break;default:throw s.errorM(l+".createLayerContainers",l+"->createLayerContainers failed to build container due to unknown layer type: "+e.type),new Error("Unknown layer type")}e.topContainer=Cbola.Templates.createElement(o),e.container=e.topContainer.querySelector(".in-content-container-coverage"),160===e.type&&(e.container.style["max-width"]=null),e.topContainer.setAttribute("layerType",e.type.toString()),e.topContainer.classList.add("cbola-wid-"+e.widgetId),e.topContainer.classList.add("cbola-elem-id-"+e.elementId),i.isFirefox?e.topContainer.classList.add("cbola-ua-ff"):i.isIE&&e.topContainer.classList.add("cbola-ua-ie")},new d}(),Cbola.InContent.Layers.TYPES_TO_NAMES_MAP={100:"DesktopInContentSliderFactsLayer",101:"DesktopInContentSliderReadMoreLayer",102:"DesktopFactsCoverLayer",110:"DesktopInContentSliderOnThisDayLayer",112:"DesktopOnThisDayCoverLayer",120:"DesktopTriviaLayer",121:"DesktopTriviaMultiLayer",130:"SidebarFactsLayer",131:"SidebarFactsReadMoreLayer",132:"SidebarFactsWithSliderLayer",133:"SponsoredSidebarFactsLayer",134:"SidebarDiedOnThisDayLayer",135:"SidebarOnThisDayLayer",136:"SidebarSlideshowFactsLayer",137:"SidebarSlideshowOnThisDayLayer",138:"StoriesSlideshowFacts",139:"StoriesSlideshowOTD",140:"SidebarTriviaLayer",150:"SlideshowDiedOnThisDayLayer",151:"SlideshowDiedOnThisWeekLayer",152:"SlideshowFactsLayer",153:"SlideshowOnThisDayLayer",160:"DesktopTwitterLayer",170:"DesktopIndicesSlideshowLayer",1e3:"MobileFactsLayer",1100:"MobileOnThisDayLayer",1400:"MobileTriviaLayer"};var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.HasViewability=Cbola.Common.HasViewability||function(){var e=Cbola,t=e._,i=e.Utils,o=e.EventBus,n=e.Env,r=e.Enums.ItemViewTypes,a=o.Events,s=Cbola.Logger.getInstance(),l=8,d=2e3,c=t.memoize(function(){for(var e=["","webkit","moz","ms"],t=0;t<e.length;t++){var i=e[t],o=""===i?"hidden":i+"Hidden";if(o in document)return{hidden:o,changeEventName:i+"visibilitychange"}}return null}),h=function(){};h.prototype.init=function(e){this.becameViewableAt=0,this.viewableDuration=0,this.viewable=!1,this.element=e,this.viewId=null,this.observer=null,this.viewableEvent=""+a.LAYER_IS_VIEWABLE+this.elementId},h.prototype.updateViewability=function(){m.isViewabilityTestable()?this.observer=new m(this.element,this.elementId):p.isViewabilityTestable()&&(this.observer=new p(this.element,this.elementId)),o.addEventListener(""+a.OBSERVER_VIEWABLE+this.elementId,this.onObserverViewable.bind(this)),o.addEventListener(""+a.OBSERVER_NON_VIEWABLE+this.elementId,this.onObserverNonViewable.bind(this)),this.observer&&this.observer.init()||(this.viewable=!0,this.onBecameViewable(r.IN_IFRAME))},h.prototype.onObserverViewable=function(){this.viewId=i.generateViewId(),this.viewable=!0,this.onBecameViewable(r.VIEWABILITY)},h.prototype.onObserverNonViewable=function(){this.viewId=i.generateViewId(),this.viewable=!1,this.onBecameUnviewable()},h.prototype.isViewable=function(){return this.viewable},h.prototype.getViewId=function(){return this.viewId},h.prototype.getViewDuration=function(){return this.viewable?i.getRunTimeInSecs()-this.becameViewableAt:this.viewableDuration},h.prototype.onBecameViewable=function(){s.info("element became viewable.",this),o.fire(this.viewableEvent),this.becameViewableAt=i.getRunTimeInSecs()},h.prototype.onBecameUnviewable=function(){s.info("element became unviewable.",this),this.viewableDuration=i.getRunTimeInSecs()-this.becameViewableAt};var m=function(){function e(t,i){_classCallCheck(this,e),this.observed=t,this.elemId=i,this.ignoreIntersectionChanges=!1,this.observedViewable=!1}return _createClass(e,null,[{key:"isViewabilityTestable",value:function(){return!t.isNil(window.IntersectionObserver)}}]),_createClass(e,[{key:"init",value:function(){var e=y.init().isVisible();return!t.isNil(e)&&(this.observer=new IntersectionObserver(this.onObserverChange.bind(this),{root:null,rootMargin:"0px",threshold:.5}),this.observer.observe(this.observed),o.addEventListener(a.PAGE_VISIBILITY_CHANGE,this.onVisibilityChange.bind(this)),!0)}},{key:"onObserverChange",value:function(e){var t=this;if(!this.ignoreIntersectionChanges){var i=e.shift(),n=i.intersectionRatio>.5;clearTimeout(this.intersectionTestTimeout),n!==this.observedViewable&&(this.intersectionTestTimeout=setTimeout(function(){var e=n?a.OBSERVER_VIEWABLE:a.OBSERVER_NON_VIEWABLE;t.observedViewable=n,o.fire(""+e+t.elemId)},d))}}},{key:"onVisibilityChange",value:function(e){var t=this;e.detail?(this.ignoreIntersectionChanges=!1,this.testViewabilityOnReturn&&(this.intersectionTestTimeout=setTimeout(function(){t.observedViewable=!0,o.fire(""+a.OBSERVER_VIEWABLE+t.elemId)},d))):(clearTimeout(this.intersectionTestTimeout),this.ignoreIntersectionChanges=!0,this.observedViewable&&(this.testViewabilityOnReturn=!0,this.observedViewable=!1,o.fire(""+a.OBSERVER_NON_VIEWABLE+this.elemId)))}}]),e}(),p=function(){function e(i,o){_classCallCheck(this,e),this.observed=i,this.observedWindow=t.result(this.observed,"ownerDocument.defaultView"),this.observedViewable=!1,this.viewabilityTestCounter=0,this.outOfViewabilityTestCounter=0,this.elemId=o,this.observedWindow||(s.errorM("ElementViewabilityObserver.ctor","ElementViewabilityObserver.ctor failed to get default view from element"),window.document.contains(this.observed)?this.observedWindow=window:s.errorM("ElementViewabilityObserver.ctor","ElementViewabilityObserver.ctor failed to get default view from element"))}return _createClass(e,null,[{key:"isViewabilityTestable",value:function(){return!t.isNil(n.viewportWindow)}}]),_createClass(e,[{key:"init",value:function(){var e=b.init().isFocused();return!t.isNil(e)&&(o.addEventListener(a.FOCUS_CHANGE,this.onFocusChange.bind(this)),e&&this.testViewability(),!0)}},{key:"onFocusChange",value:function(e){e.detail?this.testViewability():this.stopViewabilityTesting()}},{key:"testViewability",value:function(){this.isElementInViewport()?(this.viewabilityTestCounter=this.viewabilityTestCounter<l?this.viewabilityTestCounter+1:l,this.outOfViewabilityTestCounter=0):(this.viewabilityTestCounter=0,this.outOfViewabilityTestCounter=this.outOfViewabilityTestCounter<l?this.outOfViewabilityTestCounter+1:l);var e=null;this.observedViewable||this.viewabilityTestCounter!==l?this.observedViewable&&this.outOfViewabilityTestCounter===l&&(e=a.OBSERVER_NON_VIEWABLE):e=a.OBSERVER_VIEWABLE,e&&(this.observedViewable=!this.observedViewable,o.fire(""+e+this.elemId)),this.nextViewabilityTesting=setTimeout(this.testViewability.bind(this),d/l)}},{key:"stopViewabilityTesting",value:function(){clearTimeout(this.nextViewabilityTesting),this.viewabilityTestCounter=0,this.outOfViewabilityTestCounter=0,this.observedViewable&&(this.observedViewable=!1,o.fire(""+a.OBSERVER_NON_VIEWABLE+this.elemId))}},{key:"isElementInViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.observed.getBoundingClientRect().height,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.observed,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.observedWindow,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!o||t.isNil(o.offsetParent)||!r||"hidden"===r.getComputedStyle(o).visibility)return!1;try{var s=r.scrollY||r.pageYOffset,l=i.cumulativeOffset(o).top+a,d=s<=l+e/2&&s+r.innerHeight>l+e/2;return d&&r!==n.viewportWindow?this.isElementInViewport(e,r.frameElement,r.parent,l-s):d}catch(e){return!1}}}]),e}(),u=function(){this.focused=null,this.isInitialized=!1};u.prototype={init:function(){if(!this.isInitialized&&this.addFocusEvents()){var e=c()||{},t=e.hidden;this.focused=!document[t]&&n.viewportWindow.document.hasFocus(),this.isInitialized=!0}return this},isFocused:function(){return this.focused},addFocusEvents:function(){var e=this,t=c()||{},i=t.hidden,o=t.changeEventName;if(document.hasFocus&&i){var r="onfocusin"in window?"focusin":"focus",a="onfocusout"in window?"focusout":"blur",s=n.viewportWindow,l=function(t){t.type===r?setTimeout(function(){return e.updateFocus(!document[i]&&s.document.hasFocus())},300):e.updateFocus(!document[i]&&s.document.hasFocus())};try{return s.addEventListener(r,l),s.addEventListener(a,l),document.addEventListener(o,l),!0}catch(e){}}return!1},updateFocus:function(e){e!==this.focused&&(this.focused=e,o.fire(a.FOCUS_CHANGE,e))}};var b=new u,f=function(){this.visible=null,this.isInitialized=!1};f.prototype={init:function(){if(!this.isInitialized&&this.addVisibilityEvents()){var e=c()||{},t=e.hidden;this.visible=!document[t],this.isInitialized=!0}return this},addVisibilityEvents:function(){var e=this,t=c()||{},i=t.hidden,o=t.changeEventName;if(i)try{return document.addEventListener(o,function(){return e.updateVisibility(!document[i])}),!0}catch(e){}return!1},updateVisibility:function(e){e!==this.visible&&(this.visible=e,o.fire(a.PAGE_VISIBILITY_CHANGE,e))},isVisible:function(){return this.visible}};var y=new f;return h}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Types={FACTS:[100,101,102,110,130,131,132,133,136,138,152,1e3],TRIVIA:[120,121,140,1400],ON_THIS_DAY:[110,135,137,139,153,1100],TWITTER:[160],INDICES:[170],DIED_ON_THIS_DAY:[134,150],DIED_ON_THIS_WEEK:[151],SIDEBAR:Cbola.Config.layouts.sideBars.all,SIDEBAR_SLIDESHOW:Cbola.Config.layouts.sideBars.sidebarSlideshow,PLAYBOX_SLIDESHOW:Cbola.Config.layouts.sideBars.slideShow,STORIES_SLIDESHOW:Cbola.Config.layouts.sideBars.storiesSlideshow,IN_CONTENT:Cbola.Config.layouts.inContent.all},Cbola.InContent.Layers.FormFactors={MOBILE:"mobile",TABLET:"tablet",DESKTOP:"desktop"},Cbola.InContent.Layers.Base=Cbola.InContent.Layers.Base||function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=Cbola.InContent.Layers.Types,o=function(){t.debug("Layers.Base::ctor"),this.formFactor=Cbola.InContent.Layers.FormFactors.DESKTOP};return e.extend(o.prototype,Cbola.Common.HasViewability.prototype),o.prototype.init=function(){var e=Cbola.Common.HasViewability.prototype;t.debug("Layers.Base::init"),e.init.call(this,this.container)},o.prototype.setOptions=function(e){t.debug("Layers.Base::setOptions"),this.options=e||{}},o.prototype.applyOptions=function(){t.debug("Layers.Base::applyOptions"),e.assign(this.container.style,{"margin-top":this.options.MarginTopCover+"px","margin-bottom":this.options.MarginBottomCover+"px","padding-bottom":this.options.PaddingBottomCover+"px"})},o.prototype.onBeforeLoad=function(){t.debug("Layers.Base::onBeforeLoad")},o.prototype.onLoad=function(){t.debug("Layers.Base::onLoad")},o.prototype.onAfterLoad=function(){t.debug("Layers.Base::onAfterLoad",this),Cbola.taskManager.addTask(this.updateViewability,[],this)},o.prototype.bindEvents=function(){t.debug("Layers.Base::bindEvents")},o.prototype.unbindEvents=function(){t.debug("Layers.Base::bindEvents")},o.prototype.destroy=function(){t.debug("Layers.Base::destroy"),this.unbindEvents()},o.prototype.isMobile=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.MOBILE},o.prototype.isTablet=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.TABLET},o.prototype.isDesktop=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.DESKTOP},o.prototype.isSidebar=function(){var e=this;return i.SIDEBAR.some(function(t){return t===e.type})},o.prototype.isSidebarSlideshow=function(){var e=this;return i.SIDEBAR_SLIDESHOW.some(function(t){return t===e.type})},o.prototype.isStoriesSlideshow=function(){var e=this;return i.STORIES_SLIDESHOW.some(function(t){return t===e.type})},o.prototype.isPlaybox=function(){var e=this;return i.PLAYBOX_SLIDESHOW.some(function(t){return t===e.type})},o.prototype.isInContent=function(){var e=this;return i.IN_CONTENT.some(function(t){return t===e.type})},o.prototype.isFacts=function(){var e=this;return i.FACTS.some(function(t){return t===e.type})},o.prototype.isTrivia=function(){var e=this;return i.TRIVIA.some(function(t){return t===e.type})},o.prototype.isOnThisDay=function(){var e=this;return i.ON_THIS_DAY.some(function(t){return t===e.type})},o.prototype.isTwitter=function(){var e=this;return i.TWITTER.some(function(t){return t===e.type})},o.prototype.isIndices=function(){var e=this;return i.INDICES.some(function(t){return t===e.type})},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.OptionsBase=function(){var e=Cbola._,t={MarginTopCover:0,MarginBottomCover:0,PaddingBottomCover:0,ShowAdAnimation:!0,DesktopInContentMinWidth:null,ResetOnReAttach:!1,SidebarTopContainerTextAlign:null,RemovePoweredByCarambola:!1,ShowAdvertisementTitleOnAds:!1};return function i(o,n){_classCallCheck(this,i),e.extend(this,o.DefaultSettings),e.defaults(this,t),0!==this.ShowAdAnimation&&"false"!==this.ShowAdAnimation||(this.ShowAdAnimation=!1),this.themeColor=e.get(o,"DefaultSettings.InContentThemeColor",null)||e.get(o,"DefaultSettings.ThemeColor","rgb(62,209,217)");var r=Cbola.Config.getLayersDefaultSize(n),a=r.height,s=r.width;this.layerHeight=a,this.layerWidth=s}}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopFactsOptions=function(){var e=Cbola,t=e._,i=Cbola.InContent.Layers.Options.OptionsBase,o={InContentTitleBGColor:null,WidgetTitleFontColor:null,InContentTitleFontColor:null,RemoveInContentHeader:null,InContentTimerBackgroundColor1:"rgb(178,42,80)",InContentTimerBackgroundColor2:"rgb(167,38,76)",FramedLayer:!1,InContentAlignment:null};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.TriviaOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.OptionsBase,o={HideSocialButtons:!1,BrandImg:null,BrandRedirect:null,DesktopTriviaTimerDuration:10,DesktopTriviaTimerDisabled:!1,InContentThemeColor:"rgb(62, 209, 217)",InContentThemeHoverColor:"rgb(56, 185, 193)"};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r.InContentThemeColor=r.InContentThemeColor||t.result(e,"DefaultSettings.ThemeColor",null),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.TriviaOptions,o={showTriviaButtonIcons:!0,TriviaColorSkin:null,inContentTriviaFloatType:null,MaxInContentTriviaWidth:650};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),"false"===r.showTriviaButtonIcons&&(r.showTriviaButtonIcons=!1),void 0!==r.DesktopInContentMinWidth&&null!==r.DesktopInContentMinWidth||(r.DesktopInContentMinWidth=500),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaMultiOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.TriviaOptions,o={DesktopMultiTriviaBorderColor:null,DesktopMultiTriviaDisplayAnswerLetters:!0,DesktopMultiTriviaAdvertisementTitle:!1,MaxInContentTriviaWidth:640,DesktopMultiTriviaInGameTimerDuration:15,DesktopMultiTriviaEndGameTimerDuration:15,DesktopMultiTriviaEndGameImg:null,DesktopMultiTriviaEndGameLink:null,DesktopMultiTriviaBackgroundColor:null,DesktopMultiTriviaFontColor:null,MultiTriviaProgressFontColor:null};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),t.isNil(r.MultiTriviaProgressFontColor)&&(r.MultiTriviaProgressFontColor=r.InContentThemeColor),void 0!==r.DesktopInContentMinWidth&&null!==r.DesktopInContentMinWidth||(r.DesktopInContentMinWidth=480),Cbola.Env.DEBUG,r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.IndicesOptions=function(){var e,t,i=Cbola,o=i._,n=Cbola.InContent.Layers.Options.OptionsBase,r={ARROW:1},a={IndicesActiveProgressColor:"#07aebc",IndicesButtonColor:"#ff9838",IndicesSlideshowAutoplayDuration:4,InContentAlignment:null};return t=e=function(e){function t(e,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return o.defaults(n,a),n}return _inherits(t,e),t}(n),e.ButtonsStyle=r,t}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.OptionsBase,o={MobileFontSize:null,MobileClippedHeight:0,MobilePaddingBottomCover:null,mobileThemeColor:"rgb(243,100,99)",mobileTitleFontSize:null,mobileFullScreen:{mode:"portrait",outsideIframe:!1},MobileInContentColorSkin:null,mobileTranslateZ:null,mobileCompressedHeight:!0,mobileShareEnabled:!0,BrandImg:null,BrandRedirect:null,mobileItemCount:null,mobileResizeCount:4};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r.mobileShareEnabled=Cbola.Utils.parseBool(r.mobileShareEnabled),r.mobileItemCount&&(r.mobileItemCount=parseInt(r.mobileItemCount)),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileFactsOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.MobileOptions,o={mobileTitleImage:null,mobileTitleFontSize:null,mobileThemeColor:"#f36463",mobileAutoplayDuration:4};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileTriviaOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options,o=i.TriviaOptions,n=i.MobileOptions,r={MobileTriviaColorSkin:null,mobileThemeColor:"#19C2CC"};return function e(i,a){_classCallCheck(this,e),t.extend(this,new o(i,a)),t.defaults(this,r),t.extend(this,new n(i,a))}}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarDiedOnOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.OptionsBase,o={InContentTitleBGColor:null,InContentTitleFontColor:null};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarTriviaOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.TriviaOptions,o={SbTriviaEndGameImgBottom:null,SbTriviaEndGameImgTop:null,SbTriviaScoreTextColor:null,SbTriviaEndGameImgLink:null,BrandClickTracker:null,SbTriviaEndGameClickTracker:null,SBTriviaPaddingBottomCover:25};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SlideshowOptions=function(){var e,t,i=Cbola,o=i._,n=i.Utils,r=i.InContent.Layers.Options.OptionsBase,a={ArrowTeaser:1,SlideshowAutoplayDuration:4,SideboxStyleGuide:null,SideboxShareEnable:!0,PlayboxBrandImg:null,PlayboxBrandRedirect:null,PlayboxTextualHeader:null,PlayboxReutersStyleGuide:null},s={BASIC:1,HIDDEN_BUTTONS:2,EXTENDED:3};return t=e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return o.defaults(r,a),n.isMobile&&(r.themeColor=o.result(e,"DefaultSettings.InContentThemeColor",o.result(e,"DefaultSettings.ThemeColor",o.result(e,"DefaultSettings.mobileThemeColor","rgb(62,209,217)")))),r.ArrowTeaser=n.parseBool(r.ArrowTeaser),r.PlayboxReutersStyleGuide===s.EXTENDED&&152===i&&(r.layerHeight=280),r}return _inherits(t,e),t}(r),e.ReutersStyleGuides=s,t}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.StoriesSlideshow=function(){var e,t,i=Cbola,o=i._,n=i.Utils,r=i.InContent.Layers.Options.OptionsBase,a={SHARP:1,SHARP_LEFT:2,ROUND:3},s={SlideshowAutoplayDuration:10,StoriesSlideshowStyleGuide:a.ROUND,StoriesSlideshowBackgroundColor:"transparent",LayerExposureOnAdsReady:!0};return t=e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return o.defaults(r,s),n.isMobile&&(r.themeColor=o.get(e,"DefaultSettings.InContentThemeColor",o.get(e,"DefaultSettings.ThemeColor",o.get(e,"DefaultSettings.mobileThemeColor","rgb(62,209,217)")))),r}return _inherits(t,e),t}(r),e.StyleGuides=a,t}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.TwitterOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.OptionsBase,o={SlideshowAutoplayDuration:5,TwitterColorSkin:null,TwitterBgColor:null,InContentAlignment:null};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r}return _inherits(i,e),i}(i)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.Factory=function(){var e=Cbola,t=e._,i=e.Utils,o=e.InContent.Layers.Options,n=function(e){if(t.isNil(e))return e;var o=i.getUrlParams();for(var n in e)e.hasOwnProperty(n)&&!t.isNil(o["cbola"+t.toLower(n)])&&(e[n]=o["cbola"+t.toLower(n)]);return e};return function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e){var t=null;switch(e.type){case 100:case 101:case 102:case 110:case 112:t=new o.DesktopFactsOptions(e.data,e.type);break;case 120:t=new o.DesktopTriviaOptions(e.data,e.type);break;case 121:t=new o.DesktopTriviaMultiOptions(e.data,e.type);break;case 130:case 131:case 132:case 133:case 134:t=new o.OptionsBase(e.data,e.type);break;case 135:t=new o.SidebarDiedOnOptions(e.data,e.type);break;case 136:case 137:t=new o.SlideshowOptions(e.data,e.type);break;case 138:case 139:t=new o.StoriesSlideshow(e.data,e.type);break;case 140:t=new o.SidebarTriviaOptions(e.data,e.type);break;case 150:case 151:case 152:case 153:t=new o.SlideshowOptions(e.data,e.type);break;case 160:t=new o.TwitterOptions(e.data,e.type);break;case 170:t=new o.IndicesOptions(e.data,e.type);break;case 1e3:case 1100:t=new o.MobileFactsOptions(e.data,e.type);break;case 1400:t=new o.MobileTriviaOptions(e.data,e.type);break;default:Cbola.Logger.getInstance().warnM("OptionsFactory.create","No options prototype found for layer "+e.type),t=null}return t=n(t)}}]),e}()}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Manager=function(){var e=Cbola,t=e._,i=e.Utils,o=e.EventBus,n=e.Config,r=e.Env,a=e.Templates,s=e.TaskManager,l=e.Enums,d=l.PageRequestTypes,c=l.LoadStatusTypes,h=l.AbTests,m=l.IntegrationTypes,p=l.UnitLoadTypes,u=e.Common,b=u.AnalyticsService,f=u.FontsManager,y=u.IframeBuster,g=u.RequestHandler,w=u.TimelineService,v=e.Globals,C=v.AdsService,_=v.ElementIdFactory,I=e.Logger.Colors,x=e.InContent.Layers,E=x.Base,S=x.Factory,T=x.Options.Factory,k=o.Events,A=Cbola.Logger.getInstance(),L="InContentManager",O=function(e){var t=e.type;try{w.markStart("layer "+t+" -> setOptions"),e.setOptions(T.create(e)),w.markEnd("layer "+t+" -> setOptions"),w.markStart("layer "+t+" -> init"),e.init(),w.markEnd("layer "+t+" -> init"),w.markStart("layer "+t+" -> onBeforeLoad"),e.onBeforeLoad(),w.markEnd("layer "+t+" -> onBeforeLoad"),w.markStart("layer "+t+" -> onLoad"),e.onLoad()}catch(e){A.errorM("runLayerLifecycle","Layer "+t+" failed on lifecycle loading flow")}},P=function(e){var o=e.detail;w.markEnd("layer "+o.type+" -> onLoad"),A.info(I.YELLOW,"WidgetLoad: "+i.getRunTimeInSecs()+"; for elementId: "+o.elementId+"; widgetId: "+o.widgetId,o.container),o.isSidebar()&&N(o);var n=w.record(o.onAfterLoad.bind(o),"layer "+o.type+" -> onAfterLoad");if(t.result(o,"isAdOnly",!1))return void n();B(o).then(n),r.PageProperties.PageStatus=1,b.setPageElementRequest({layer:o,loadStatus:c.SUCCESS})},N=function(e){for(var i=e.topContainer.parentElement,o=n.getLayersDefaultSize(e.type),r=!1,a={width:["left","right"],height:["top","bottom"]},s=function(){r=!0;var e=window.getComputedStyle(i),n=i.getBoundingClientRect();t.forEach(o,function(t,o){var s="border-box"===e["boxSizing"]?a[o].reduce(function(t,i){return t+=parseInt(e["padding-"+i])||0},0):0;parseInt(n[o],10)-s<t&&(i.style["min-"+o]=t+s+"px",r=!1)}),i=i.parentElement};i&&!r;)s()},B=function(e){return i.toggleTransition(e.container,!1).then(function(){if(t.get(e,"options.LayerExposureOnAdsReady",!1)){var i=C.getTriggersManagerByElementId(e.elementId);if(!t.isNil(i)){var o=[];return o.push(i.managerReady()),o.push(new Promise(function(i){return setTimeout(i,t.get(e,"options.DelayLayerExposure")||3e3)})),Promise.race(o)}}return Promise.resolve()}).then(function(){return i.toggleTransition(e.container,!0)}).then(function(){e.container.style["opacity"]="1"})},D=function(e){return!i.isInIframe()&&!i.isElementDisplayed(e)},M=t.memoize(function(e){return E.prototype.isSidebar.apply(e)},function(e){return e.type}),R=function(){function e(){_classCallCheck(this,e),this.enabled=!1,this.inProcessByWidgetId={},this.layerByElementId={},this.layerByWidgetId={},this.activeLayersCounter=1,o.addEventListener(k.LAYER_READY,P)}return _createClass(e,[{key:"init",value:function(e){this.bootstrapper=e,this.enabled=!0}},{key:"createWidgetForPlaceholder",value:function(e,t){var o=this;this.enabled&&g.getPageElements(t).then(function(t){o.bootstrapper.initializeServices({detail:t}),o.processPageElementsResponse(t,e)}).catch(i.noOp)}},{key:"processPageElementsResponse",value:function(e,i){if(r.IntegrationType===m.SAFE_FRAME&&!t.get(e,"DefaultSettings.EnableLoadOnKnownSafeFrame",!1))return b.setPageRequest(d.BLOCKED_KNOWN_SAFE_FRAME,e.IsServerCall),A.info(Cbola.Logger.Colors.RED,"Bootstrapper.onPageElementsRecieved stopped due to blocking known safe frame."),void(this.enabled=!1);this.bootstrapper.initPlatform(e);var o=e.widgetId;t.isNil(o)||(this.inProcessByWidgetId[o]=new F(this,i,e))}},{key:"destroyInProcessWidget",value:function(e){delete this.inProcessByWidgetId[e]}},{key:"onProcessSuccess",value:function(e){var t=L+".onLayerScriptFetched";e?(A.info(I.PALE_GREEN,"Finished uploading layer "+e.type+": "+i.getRunTimeInMilis()),this.layerByElementId[e.elementId]=e,this.layerByWidgetId[e.widgetId]=e,this.destroyInProcessWidget(e.widgetId),O(e)):A.errorM(t,t+" "+e.type+" has not known layer")}},{key:"getLayerByElementId",value:function(e){return this.layerByElementId[e]}},{key:"getLayerByWidgetId",value:function(e){return this.layerByWidgetId[e]}},{key:"checkMaxWidgets",value:function(){return this.activeLayersCounter<n.MaxWidgets?(this.activeLayersCounter+=1,this.activeLayersCounter):0}}]),e}(),F=function(){function e(t,i,o){_classCallCheck(this,e),V.call(this),this.manager=t,this.placeholder=i,this.data=o,this.preBuild()}return _createClass(e,[{key:"preBuild",value:function(){switch(i.getUrlParams()["cbolaloadtype"]||(n.abTestId===h.LAYER_ON_PAGE_LOAD?p.PAGE_LOAD:t.get(this.data,"DefaultSettings.LoadType"))||p.ASYNC){case p.DOM_LOADED:i.documentReady(this.start.bind(this));break;case p.PAGE_LOAD:i.pageReady(this.start.bind(this));break;default:this.start()}}},{key:"attachElementToSelector",value:function(){var e=this;return this.withLocationSelector?new Promise(function(o,r){!function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(a>=n.findICSelectorElementMaxRetries)return void r();A.debug("retry of SelectorElement for elementId: "+this.elementId+", cbola_findICSelectorElement function, retries: "+a);for(var l=0;l<t.length;l++){var d=t[l],c=document.querySelectorAll(d.SelectorValue);if(c.length>0){var h=c[Math.min(d.AppearancePosition,c.length-1)];return 1===d.LocationType?i.preappend(h,this.placeholder):h.appendChild(this.placeholder),void o()}}a+=1,A.warn("Selector element was not found"),s.addTask(e,[t,a],this,"placeholderAttachmentRetries")}(t.get(e.data,"DefaultSettings.LocationSelector"))}):Promise.resolve()}},{key:"testCompatibleContainer",value:function(){var e=this,o="WidgetPreLoadProcess.testCompatibleContainer",l=a.createElement("width_check.html"),c=i.isFriendlyIframe()&&!i.isElementDisplayed(window.frameElement),h=D(l),m=[];i.after(this.placeholder,l),s.addExpBackoffTask({fn:function(a,s){for(var p=l.clientWidth,u=l,f=0,y=!1;0===p&&f<=n.maxParentElementsCheckWidth&&u;)try{void 0===m[f]&&(m[f]=u.parentElement),u=m[f],f+=1,u&&(p=u.clientWidth,u.tagName&&"head"===u.tagName.toLowerCase()&&(y=!0))}catch(t){return b.setPageRequest(d.INITIALIZE_FAILED,e.data.IsServerCall),A.criticalM(o,"Initialize of IC was failed at "+o+" width element parents iteration. url: "+r.PageProperties.hostname,t),e.manager.destroyInProcessWidget(e.widgetId),!1}if(y)return b.setPageRequest(d.INITIALIZE_FAILED,e.data.IsServerCall),A.criticalM(o,"Script injected in page's head. url: "+r.PageProperties.hostname+", pageviewid: "+r.PageProperties.cbola_pageViewId),e.manager.destroyInProcessWidget(e.widgetId),!1;if(p>0)return l.remove(),e.checkMinWidth(p),!1;if(M(e.layer)&&!h&&!c&&!i.isInIframe())return e.buildStructure(),!1;if(s){var g="";h?g="In hidden containing element.":c?g="In hidden iFrame.":i.isInIframe()&&(g="In non-friendly iFrame."),A.errorM(o,"IC too small - div width is 0. "+g+" url: "+r.PageProperties.hostname),b.setPageRequest(c||h?d.HIDDEN_IFRAME:d.DIV_TOO_SMALL,e.data.IsServerCall,{width:0,height:t.get(l,"parentElement.clientHeight",0)}),l.remove(),e.manager.destroyInProcessWidget(e.widgetId)}},backoff:[500,1e3,2500,5e3]})}},{key:"checkMinWidth",value:function(e){var i="WidgetPreLoadProcess.checkMinWidth";try{var a=n.getLayerMinSizes(this.layer.type).width,s=t.get(this.placeholder,"parentElement"),l=D(s);if((e=Math.max(t.get(s,"clientWidth")||0,e+t.get(this.data,"DefaultSettings.MaxWidthCompensation",0)))<a&&(l||!M(this.layer))){if(this.tryFallbackWidth(e))return;return this.withLocationSelector?(A.errorM(i,"ICsmall, selector element too small. Width: "+e+", url: "+r.PageProperties.hostname),o.fire(k.ELEMENT_FAILED,{elementId:this.elementId,loadStatus:c.SELECTOR_TOO_SMALL})):(A.errorM(i,"ICsmall, width too small for IC. Width: "+e+", url: "+r.PageProperties.hostname),b.setPageRequest(l?d.HIDDEN_IFRAME:d.DIV_TOO_SMALL,this.data.IsServerCall,{width:e,height:t.get(s,"clientHeight",0)})),void this.manager.destroyInProcessWidget(this.widgetId)}this.buildStructure()}catch(e){b.setPageRequest(d.INITIALIZE_FAILED,this.data.IsServerCall),A.criticalM(i,"failed: initialize of IC was failed at "+i+". url: "+r.PageProperties.hostname,e),this.manager.destroyInProcessWidget(this.widgetId)}}},{key:"tryFallbackWidth",value:function(e){for(var t=0;t<n.inContentFallbackWidths.length;t++){var o=n.inContentFallbackWidths[t];if(e>=o)return A.info(I.PALE_YELLOW,"trying fallback width "+o),this.layer.fallbackMinimalWidth=o,g.getPageElements(this.widgetId,o).then(this.fallbackLayerReset.bind(this)).catch(i.noOp),!0}return!1}},{key:"fallbackLayerReset",value:function(e){var i="WidgetPreLoadProcess.fallbackLayerReset";if(this.layer){Cbola.bootstrapper.initializeServices({detail:e}),this.data=this.layer.data=e;try{return this.layer.type=this.layer.iframeBuster.layerType=t.get(e,"DefaultSettings.Layouts[0].LayoutType"),this.layer.itemType=t.get(e,"DefaultSettings.Layouts[0].ItemType"),void this.buildStructure()}catch(e){A.info("initialize InContent layer type error")}}else A.errorM(i,i+" failed to reset layer");this.manager.destroyInProcessWidget(this.widgetId)}},{key:"buildStructure",value:function(){var e="WidgetPreLoadProcess.buildStructure";this.withLocationSelector||b.setPageRequest(d.PAGE_VIEW,this.data.IsServerCall);try{S.createLayerContainers(this.layer),i.after(this.placeholder,this.layer.topContainer),this.layer.topContainer.style["z-index"]=i.getZIndexForElement(),this.fetchLayerScript()}catch(t){A.criticalM(e,"failed: initialize of IC was failed at "+e+". url: "+r.PageProperties.hostname,t)}}},{key:"fetchLayerScript",value:function(){var e=this;r.adsDisabled||this.adsProcessInit(),S.createAsync(this.layer.type,function(i){e.manager.onProcessSuccess(t.extend(i,e.layer))})}},{key:"adsProcessInit",value:function(){if(n.abTestId!==h.NO_ADS){C.addSovrnBeacon(this.data.DefaultSettings);var e=new Cbola.Common.AdTriggersManager({elementId:this.elementId,widgetId:this.widgetId,layerType:this.layer.type,footerBackground:t.get(this.data,"DefaultSettings.FooterFixedAdBackground")}),i=new Cbola.Common.Ads.Stores.Manager(this.elementId,this.widgetId,this.layer.type);C.registerLayerManager(e,i,this.elementId),f.getRoboto()}}}]),e}(),V=function(){var e=this;this.start=w.record(function(){var n="WidgetPreLoadProcess.start",a=isNaN(e.data.widgetId)?"0":e.data.widgetId;e.widgetId=a,r.widgetId=a;var s=_.getGlobalElementId();e.elementId=s;var l=e.manager.checkMaxWidgets();if(!l)return A.info("elementId: "+s+", failed because maxOfElements in page"),o.fire(k.ELEMENT_FAILED,{elementId:s,loadStatus:c.MAX_ELEMS_REACHED}),void e.manager.destroyInProcessWidget(a);var h="true"===i.dataset(e.placeholder,"manualBuild");if(h&&i.datasetRemove(e.placeholder,"status"),!t.isNil(i.dataset(e.placeholder,"status")))return void e.manager.destroyInProcessWidget(a);i.dataset(e.placeholder,"status","started"),i.dataset(e.placeholder,"elementId",s),i.dataset(e.placeholder,"activeId",l);var m={type:t.get(e.data,"DefaultSettings.Layouts[0].LayoutType"),itemType:t.get(e.data,"DefaultSettings.Layouts[0].ItemType")};if(t.isNil(m.type)||t.isNil(m.itemType))return A.errorM("WidgetPreLoadProcess.start","initialize InContent layer type error"),void e.manager.destroyInProcessWidget(a);!h&&t.get(e.data,"DefaultSettings.outsideIframe",!1)&&i.isFriendlyIframe()?y.pushScriptAboveIframe(a)||(b.setPageRequest(d.INITIALIZE_FAILED,m.data.IsServerCall),e.manager.destroyInProcessWidget(a)):(e.withLocationSelector=void 0!==e.data.DefaultSettings.LocationSelector,e.withLocationSelector&&b.setPageRequest(d.PAGE_VIEW,data.IsServerCall),t.extend(m,{activeId:l,elementId:s,widgetId:a,data:e.data,scriptElement:e.placeholder,element:null,hbToken:i.dataset(e.placeholder,"modelsToken")}),m.iframeBuster=new y(e.data.DefaultSettings,a,m.type),m.iframeBuster.init(),e.layer=m,e.attachElementToSelector().then(e.testCompatibleContainer.bind(e),function(){A.info(I.PALE_RED,"findICSelectorElement was failed. elementId:"+s),o.fire(k.ELEMENT_FAILED,{elementId:s,loadStatus:c.SELECTOR_NOT_FOUND}),e.manager.destroyInProcessWidget(a)}).catch(function(t){b.setPageRequest(d.INITIALIZE_FAILED,m.data.IsServerCall),A.criticalM(n,"failed: initialize of IC was failed at "+n+". url: "+r.PageProperties.hostname,t),e.manager.destroyInProcessWidget(a)}))},"WidgetPreLoadProcess.start")};return new R}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),cbolaStartDateFileUploaded=new Date;window.Cbola=window.Cbola||{},window.Cbola.Bootstrapper=window.Cbola.Bootstrapper||function(){var e=Cbola,t=e._,i=e.Utils,o=e.Config,n=e.Enums,r=e.EventBus,a=e.Env,s=void 0===a?{}:a,l=e.Common,d=l.AnalyticsService,c=l.TimelineService,h=l.LocalStorageService,m=l.UserService,p=e.InContent,u=p.Manager,b=p.Layers,f=b.Item,y=b.Services,g=y.FactsService,w=y.OnThisDayService,v=y.DiedThisDayService,C=y.DiedThisWeekService,_=y.TriviaService,I=y.TweetsService,x=Cbola.Logger.getInstance(),E=t.once(function(){d.setPageClose();try{t.result(window.top,"Cbola.Globals.ReportersManager.isPrimary",!1)&&(window.top.Cbola.Globals.ReportersManager.stopReporting(),delete window.top.Cbola.Globals.ReportersManager)}catch(e){}}),S=function(e){try{var t={};void 0!==e&&(t.filename=e.filename||"",t.lineno=e.lineno||"",t.colno=e.colno||"",t.message=e.message||"",t.type=e.type||"",t.filename.toLowerCase().indexOf("carambo.la")>-1&&(x.info("ER of cbola was found"),d.setClientError(t)))}catch(e){}},T=function(e){var t=e.detail;x.info("Element fail: "+t.elementId+" \n",t);try{d.setPageElementRequest(t);var i=u.getLayerByElementId(t.elementId);i&&i.parentNode&&i.parentNode.removeChild(i)}catch(e){}},k=function(){var e=i.getUrlParams()["cboladebug"];e||(e=i.getParamsFromUrl(s.proxyElem.getAttribute("src"))["cbola_d"])||(e=!1),e=e&&"0"!==e?"1":h.getItem("cbolaDebug")||"0",s.DEBUG=1===parseInt(e),s.DEBUG&&(x.level=Cbola.Logger.Levels.TRACE)},A=function(){var e=i.getParamsFromUrl(s.proxyElem.getAttribute("src")),t=i.getUrlParams();s.queryServer=t["queryserver"]||e["queryserver"]||"0",s.activePid=t["cbolapid"]||e["pid"],s.wid=t["wid"]||e["wid"];var n=t["clientpath"]||e["clientpath"],r=o.clientPaths[n]||o.clientPaths["0"];r.alias&&(r=o.clientPaths[r.alias]);var a=r.withVersion?s.clientVersion:"";s.clientPath=""+r.path+a+"/",s.safeFramePath=""+(r.sfPath||r.path)+a+"/",s.clientPathType=r.isMin?".min":"",s.domainId=parseInt(e["did"])||0,s.adsDisabled=t["cbolanoads"]||!1,s.widgetLoadAlert=t["cbolaalert"]||!1,s.categoryId=e["categoryid"]||"",s.tags=e["tags"]||"",s.title=e["title"]||"",s.body=e["body"]||"",s.url=e["pageurl"]||"",s.hbToken=e["hb_token"]||void 0,s.proxyPageViewId=e["pvid"]||void 0,s.protocol=/^https?.*/g.test(window.location.protocol)?window.location.protocol:"https:",s.clientPath=""+s.protocol+s.clientPath,s.IntegrationType=i.integrationTypeCheck(),s.topWindow=i.isWindowTopSupported()?window.top:window,s.viewportWindow=i.isWindowTopSupported()||!i.isInIframe()?window.top:null,x.info("Working Path:"+s.clientPath+", QueryServer:"+s.queryServer+", ClientVer: "+s.clientVersion+", Pid: "+s.activePid)},L=function(){var e=s.proxyElem.getAttribute("mt"),t=s.proxyElem.getAttribute("mediatype"),i=s.proxyElem.getAttribute("cbola");return"ic"===e||"InContent"===t||"ic"===i?n.ProductTypes.IN_CONTENT:null},O=function(e){var i=e.getAttribute("srcurl");return t.isEmpty(i)?null:decodeURIComponent(i)},P=function(e){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.isEmpty(e)?t.isNil(s.PageProperties.cbola_pageViewId)&&(t.isNil(s.topWindow.cbola_pageViewId)&&(s.topWindow.cbola_pageViewId=i.generateDoubleRandomViewID()),s.PageProperties.cbola_pageViewId=s.topWindow.cbola_pageViewId):(s.PageProperties.cbola_pageViewId=e,!t.isNil(s.topWindow.cbola_pageViewId)&&s.topWindow.cbola_pageViewId!==e&&o&&x.alwaysSendM("Bootstrapper.setPageViewId","Bootstrapper.setPageViewId overridden existing page view id ("+s.topWindow.cbola_pageViewId+") with header bidding page view id ("+e+")"))},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Cbola.PageAnalytics.ReportersManager.isPrimary()){var i=t.get(e,"DefaultSettings.ActivePageReporters",null);Cbola.PageAnalytics.ReportersManager.init(i?i+",pageLoad":"pageLoad",t.result(e,"widgetId",0))}};return function(){function e(){var a=this;_classCallCheck(this,e),this.init=c.record(function(){if(s.proxyElem=document.getElementById(o.proxyId),!s.proxyElem)return void x.info(Cbola.Logger.Colors.PALE_RED,"CbolaScriptIsMissing");if(s.proxyElem.getAttribute("status")&&0===document.querySelectorAll(".cbolaExtension").length)return void x.info(Cbola.Logger.Colors.PALE_RED,"CbolaScriptAgain");s.proxyElem.setAttribute("status","started"),s.clientVersion="2.23.7.2",s.proxyId=o.proxyId,s.userId=0,k(),A(),o.init(),P(s.proxyPageViewId),x.enableServer(),x.alwaysSendM("Bootstrapper.init","first log. pid: "+s.activePid+", did: "+s.domainId+", wid: "+(t.isEmpty(s.wid)?"0":s.wid)+" , abTestId: "+o.abTestId+", pageViewId: "+s.PageProperties.cbola_pageViewId+", randomLogId: "+Math.floor(899*Math.random()+100)+", ClientVersion: "+s.clientVersion);var e=s.PageProperties;if(e.startDateFileUploaded=cbolaStartDateFileUploaded,e.checkInContentLocation=i.checkUrlParamExist("icshow"),e.activeDomain=document.domain,e.originalPathNameHost=i.getLocationHref(),t.isArray(o.srcUrlEnabledDids)&&o.srcUrlEnabledDids.some(function(e){return e===s.domainId})&&(e.SrcUrl=i.getLocationHref()),e.hostname=i.queryStringCutRegex(),e.secondGlobal=i.setGlobalRedirectTime(),!t.isEmpty(s.url)&&!/^([[{])/g.test(s.url)){var r="";t.forEach({CategoryId:s.categoryId,Tags:s.tags,Title:s.title,Body:s.body},function(e,i){t.isEmpty(r)||(r+="&"),t.isEmpty(e)||(r+=i+"="+e)}),e.hostname=(decodeURIComponent(s.url)+(t.isEmpty(r)?"":"?"+r)).toLowerCase()}if(e.isMobile=i.isMobile,e.isTablet=i.isTablet(),i.detectDeviceOrientation(),e.urlHashMD5=CryptoJSCbola.MD5(e.hostname).toString(),e.urlHashSHA1=CryptoJSCbola.SHA1(e.hostname).toString(),x.info("hostname: "+e.hostname),x.info("MD5 hash: "+e.urlHashMD5+" SHA1 hash: "+e.urlHashSHA1+" pid: "+s.activePid),o.abTestId===n.AbTests.NO_LAYER)return void N();u.init(a),a.bindEvents(),a.checkForPendingScripts()},"Bootstrapper.init"),this.loadLayerFromScript=c.record(function(){if(0!==a.deferredLayerScriptTags.length&&L()===n.ProductTypes.IN_CONTENT)for(;a.deferredLayerScriptTags.length>0;){var e=a.deferredLayerScriptTags.shift(),o=parseInt(e.getAttribute("cbola_wid"));if(o||(o=0,e.setAttribute("cbola_wid","0")),a.isExistingWidgetId(o))d.setPageElementRequest({layer:{widgetId:o},loadStatus:n.LoadStatusTypes.SAME_ID_WIDGETS}),x.info(Cbola.Logger.Colors.PALE_RED,"There are scripts with the same wid: "+o);else{a.widgetIdArray.push(o),t.isEmpty(s.PageProperties.SrcUrl)&&(s.PageProperties.SrcUrl=O(e));var r=i.dataset("modelsPvid");r&&P(r),i.fixPixelHeight(e),u.createWidgetForPlaceholder(e,o)}}},"Bootstrapper.loadLayerFromScript"),this.initializeServices=c.record(function(e){var o=e.detail,n=f.Types;if(o){o.Language&&m.setLanguage(o.Language),o.Items&&t.get(o,"DefaultSettings.OTDIgnoreClientDate")&&w.setIgnoreClientDate(!0,o.Items[0]);var r=t.get(o,"DailyItemsCount");if(r&&(w.setTotalItemsForToday(r),v.setTotalItemsForToday(r),C.setTotalItemsForThisWeek(r)),o.Items){var a=o.widgetId;o.Items=t.map(o.Items,function(e){return new f(e)});for(var l=0;l<o.Items.length;l++){var d=o.Items[l];d.Type===n.FACT||d.Type===n.TIP?g.addItem(d,a):d.Type===n.ON_THIS_DAY?w.addItem(d,a):d.Type===n.DIED_THIS_DAY?(v.addItem(d,a),C.addItem(d)):d.Type===n.TRIVIA||d.Type===n.TRIVIA_MULTI||d.Type===n.TRIVIA_MULTI_PAIRS?_.addItem(d):d.Type===n.TWEET&&I.addItem(d,a)}}var c=i.getParamsFromUrl(s.PageProperties.originalPathNameHost.toLowerCase())["cbolagameset"];_.setFirstItemId(c)}},"Bootstrapper.initializeServices"),this.initPlatform=t.once(c.record(function(e){var i=Cbola.Styles;s.PageProperties.Domain=t.get(e,"Domain",0),s.PageProperties.Category=t.get(e,"Category",0),s.PageProperties.PageId=t.get(e,"PageId",0);var n=i.injectMainStyle(document,"cbolaPlatform.css");if(n&&s.topWindow!==window)i.injectMainStyle(s.topWindow.document,"cbolaPlatform.css");else if(!n){var a=document.createElement("link");a.rel="stylesheet",a.href=s.clientPath+"css/cbolaPlatform.min.css";var l=document.querySelector("head");l&&l.appendChild(a)}e.DefaultSettings=e.DefaultSettings||{},o.MaxWidgets=e.DefaultSettings.MaxWidgets||9999,o.ZIndexLayer=e.DefaultSettings.ZIndexLayer||999999999,Cbola.Globals.AdsService.onlyOneRegistration=t.get(e,"DefaultSettings.AllowSingleAdServiceRegistration",!1),Cbola.Common.ConsentProviders.Manager.init({gfc:t.get(e,"DefaultSettings.EnableGFC",!1)}),N(e),r.fire(r.Events.PLATFORM_INITIALIZED)},"Bootstrapper.initPlatform")),Cbola.Env=s||{},t.defaults(Cbola.Env,{PageProperties:{optOutCookie:!1,IsServerCall:n.isServerCallTypes.FROM_CDN,PageStatus:0,unloadAlreadyDetected:!1,startTime:new Date,clientIP:""}}),this.deferredLayerScriptTags=[],this.widgetIdArray=[]}return _createClass(e,[{key:"bindEvents",value:function(){r.addEventListener(r.Events.PAGE_ELEMENTS_DATA_RECEIVED,this.initializeServices.bind(this)),r.addEventListener(r.Events.ELEMENT_FAILED,T),window.addEventListener("error",S),window.addEventListener("beforeunload",E),window.addEventListener("unload",E)}},{key:"checkForPendingScripts",value:function(){var e=this,r=t.filter(document.querySelectorAll("."+o.inContentClass),function(e){return"script"===e.tagName.toLowerCase()});if(0===r.length&&(r=document.querySelectorAll("."+o.placeholderClass),0===r.length))return d.setPageRequest(n.PageRequestTypes.NO_PLACEHOLDER_FOUND,n.isServerCallTypes.FROM_CDN),void x.info(Cbola.Logger.Colors.PALE_RED,"No placeholder found in page - terminating load process");r=t.filter(r,function(e){return null===i.dataset(e,"queued")}),t.forEach(r,function(t){i.dataset(t,"queued",!0),e.deferredLayerScriptTags.push(t)}),this.deferredLayerScriptTags.length>0&&this.loadLayerFromScript(),i.getRunTimeInSecs()<o.checkPendingICscriptsTimeLength&&Cbola.taskManager.addTask(this.checkForPendingScripts,[],this,"checkForPendingScripts")}},{key:"isExistingWidgetId",value:function(e){return this.widgetIdArray.some(function(t){return t===e})}}]),e}()}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.PrebidAdaptor=Cbola.Common.PrebidAdaptor||function(){var e=Cbola,t=e._,i=e.EventBus,o=i.Events,n=Cbola.Common,r=n.AnalyticsService,a=n.RequestHandler,s=n.UserService,l=Cbola.Logger.getInstance(),d=Cbola.Logger.Colors.ORANGE,c=Cbola.Enums.HeaderBiddingRequestStatus,h="PrebidAdaptor",m=2e3,p=window.Cbola_pbjs||null,u=0,b=function(){return u+=1},f=!1,y=[{getReady:function(){if(!this.promise){var e=new Promise(function(e){var n=function n(r){var a=r.detail.data;i.removeEventListener(o.GET_ADS_READY,n),e(t.get(a,"PbConfigType1"))};i.addEventListener(o.GET_ADS_READY,n)});this.promise=Promise.all([s.isEUUserAsync(),e])}return this.promise}},{getReady:function(){var e=this;return p?Promise.resolve():(this.promise||(this.promise=a.getJsBundle("external/prebid.min.js").then(function(){p=p||window.Cbola_pbjs},function(){return delete e.promise,Promise.reject()})),this.promise)}}];t.first(y).getReady();var g=t.once(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=t.last(e),o=t.first(e),n={};i&&(l.info(d,"Prebid config: setting user sync for bidders -> "+i),n.userSync={syncEnabled:!0,syncDelay:6e3,filterSettings:{iframe:{bidders:i.split(",").map(function(e){return e.trim()}),filter:"include"}}}),o&&(l.info(d,"Prebid config: setting consent management"),n.consentManagement={cmpApi:"iab",timeout:8e3}),t.isEmpty(n)?l.info(d,"Prebid config: none"):p.setConfig(n)}),w=function(e,i){var o="executeAuction";if(t.isEmpty(e))return Promise.reject(new Error("No bid instances provided"));var n=t.result(e,"[0].getTranslatedSizes",{width:0,height:0}),r=n.width,a=n.height;if(!r||!a)return Promise.reject(new Error("No valid size for auction"));var s=v(e),d=t.reduce(s,function(e,t,i){return e.push({code:i,mediaTypes:{banner:{sizes:[[r,a]]}},bids:t.map(function(e){return e.getBidRequest()})}),e},[]);return C(d,i).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=[],n=[];return l.info("cbolaPbjs bid response: ",e),t.forEach(e,function(e,r){var a=t.get(e,"bids")||[];t.forEach(a,function(e){var a=e.bidder,d=t.remove(s[r],function(e){return e.getBidder()===a});if(0===d.length)return void l.alwaysSendM(h+"."+o,h+"."+o+" failed to match bid to ad object, bidder: "+a);d.length>1&&l.alwaysSendM(h+"."+o,h+"."+o+" multiple bidders for ad unit, bidder: "+a);var m=t.head(d);if(e.cpm&&e.cpm>0){var p=e.ad||(e.adUrl?'<IFRAME SRC="'+e.adUrl+'" width="'+e.width+'" height="'+e.height+'" FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true"></IFRAME>':null);p&&(m.setCPM(e.cpm),m.setTag(p),m.setResponseTimestamp(e.responseTimestamp||Date.now()),m.setTimeToRespond(e.timeToRespond))}i.push(m),n.push({TagId:m.getID(),Cpm:m.getCPM(),Status:c.SUCCESS})})}),t.forEach(s,function(e){t.forEach(e,function(e){i.push(e),n.push({TagId:e.getID(),Cpm:0,Status:c.TIMEOUT})})}),_(n),Object.keys(s).forEach(function(e){return p.removeAdUnit(e)}),Promise.resolve(i)})},v=function(e){var i=t.groupBy(e,function(e){return e.getBidder()}),o=[],n={};return t.forEach(i,function(e){t.forEach(e,function(e,i){if(void 0===o[i]){var r="cbola_code_"+t.random(10,1e3)+"-"+b();o[i]=r,n[r]=[]}n[o[i]].push(e)})}),n},C=function(e,t){var i=new Promise(function(i){p.requestBids({bidsBackHandler:i,timeout:t,adUnits:e})}),o=new Promise(function(e){setTimeout(e,t+50)});return Promise.race([i,o])},_=function(e){e&&e.length>0&&(e.push({TagId:t.head(e).TagId,Status:c.REQUEST_MADE}),r.setHbBidRequestProto(e))},I=function(){};return I.prototype={auction:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return f?w(e,i):Promise.all(y.map(function(e){return e.getReady()})).then(function(o){return g(t.head(o)),f=!0,w(e,i)})}},new I}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.Factory=function(){var e=Cbola.Common.RequestHandler,t=Cbola.Logger.getInstance(),i=Cbola.Common.Ads.Writers,o=Cbola.Common.TimelineService,n=Cbola._,r={},a=function(){};return a.prototype.get=function(e){t.info("Ad.Writers.Factory.create -> creating writer type: "+e);var o=i.TYPES_TO_NAMES_MAP[e];return n.isEmpty(o)?(t.info("Writers.Factory.create', 'No Writer prototype found for writer "+e),null):i[o]},a.prototype.shouldFetch=function(e){var t=i.TYPES_TO_NAMES_MAP[e];return n.isNil(i[t])},a.prototype.getAsync=function(i){var a=this;return n.isNil(r[i])?(r[i]=new Promise(function(n,r){a.shouldFetch(i)?(t.alwaysSend("WriterFactory.createAsync -> fetching bundle... writerType:"+i),e.getJsBundle("external/ad_writers_bundle.js").then(function(){o.markEnd("WriterFactory -> getting ad writers bundle for type: "+i),n(a.get(i))}).catch(function(){r(new Error("couldnt fetch ad writers bundle."))})):(o.markEnd("WriterFactory -> creating writer "+i),n(a.get(i)))}),n.isNil(r[i])&&(this.shouldFetch(i)?(t.alwaysSend("WriterFactory.createAsync -> fetching bundle... writerType:"+i),r[i]=e.getJsBundle("external/ad_writers_bundle.js").then(function(){return Promise.resolve(a.get(i))}).catch(function(){return Promise.reject(new Error("couldnt fetch ad writers bundle."))})):(o.markEnd("WriterFactory -> creating writer "+i),r[i]=Promise.resolve(this.get(i)))),r[i]):r[i]},new a}(),Cbola.Common.Ads.Writers.TYPES_TO_NAMES_MAP={0:"IframeWriter",1:"AppendWriter",2:"PostscribeWriter",3:"IframeWriter",4:"PostscribeWriter",5:"IframeSrcdocWriter",6:"BilimbiWriter",7:"IframeWriter",8:"ConfiantIframeWriter",9:"AdLightningIframeWriter",10:"SafeFrameWriter",11:"StandardSafeFrameWriter",12:"DevConWriter",13:"MConfiantIframeWriter"},window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.IframeWriter=function(){var e=Cbola,t=e.Utils,i=e.Env,o=function(){this.name="iframe_write"};return o.prototype.write=function(e,o,n){var r=t.createAdIframe(n.getTranslatedSizes());e.appendChild(r);var a=r.contentDocument;a.open(),a.write("<head>"+("https:"!==i.topWindow.location.protocol||t.isIE?"":'<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">')+"</head><body>"+o+"</body>"),a.close()},new o}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.ConfiantIframeWriter=function(){var e=Cbola.Utils,t=Cbola.Env,i=Cbola.Logger.getInstance(),o=Cbola.Common.AnalyticsService,n=Cbola.Enums.BlockedAdTriggerTypes,r=Cbola.Enums.AdTriggerTypes,a=function(e,t,i,o,n){function r(e){return(m(e)||"")[g]("/","_")[g]("+","-")}function a(t,i,o){var n=_+p(t)+"&d="+i,r="err__"+1*new Date;c[r]=o;var a="<"+f+" on"+w+'="void('+r+'())" '+y+'="'+n+'" type="text/java'+f+'" ></'+f+">";e[C](a)}function s(){var i=r(o+"/"+I.k.hb_bidder[0]+":"+I.k.hb_size[0]),s={wh:i,wd:h.parse(h[v](I)),wr:0};a(i,r(h[v](s)),function(){e[C](t.ad)});var l={prebid:{adId:t.adId,cpm:t.cpm}},d={d:s,t:t.ad,cb:n,id:l};c[o]={},c[o][i]=d}var l=t.bidder,d=t.size,c=e.parentWindow||e.defaultView,h=c.JSON,m=c.btoa,p=c.encodeURIComponent;if(!h||!m)return!1;var u="t",b="i",f="script",y="src",g="replace",w="error",v="stringify",C="wr"+b+u+"e",_="https://"+i+"/?wrapper="+p(o)+"&tpid=",I={k:{hb_bidder:[l],hb_size:[d]}};return s(),e.close(),!0},s=function(){this.name="confiant_write"};return s.prototype.write=function(s,l,d){var c=d.getTranslatedSizes(),h=e.createAdIframe(c);s.appendChild(h);var m=h.contentDocument;m.open(),"https:"!==t.topWindow.location.protocol||e.isIE||m.write('<head><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"></head>');var p=d.getID(),u={ad:l,bidder:p,size:c.width+"x"+c.height,cpm:0,adId:p};a(m,u,"clarium.global.ssl.fastly.net","kj7Ux6NuzZRX9RuZUDxzW2kAL60",function(){var t=e.dataset(s,"elementId");o.setBlockedAdRequest(t,p,n.CONFIANT_BLOCK),i.info("Confiant found malware ad for tag id: "+p);var a=Cbola.Globals.AdsService.getTriggersManagerByElementId(t);if(a){var l=e.dataset(s,"apperance"),d=e.dataset(s,"spot"),c=e.dataset(s,"bannerId");a.malwareRefresh(l,d,c,r.REFRESH_CONFIANT_BLOCK)}})||(m.write(l),m.close())},new s}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.MConfiantIframeWriter=function(){var e=Cbola.Utils,t=Cbola.Env,i=Cbola.Logger.getInstance(),o=Cbola.Common.AnalyticsService,n=Cbola.Enums.BlockedAdTriggerTypes,r=Cbola.Enums.AdTriggerTypes,a=function(e,t,i,o,n){function r(e){return(m(e)||"")[g]("/","_")[g]("+","-")}function a(t,i,o){var n=_+p(t)+"&d="+i,r="err__"+1*new Date;c[r]=o;var a="<"+f+" on"+w+'="void('+r+'())" '+y+'="'+n+'" type="text/java'+f+'" ></'+f+">";e[C](a)}function s(){var i=r(o+"/"+I.k.hb_bidder[0]+":"+I.k.hb_size[0]),s={wh:i,wd:h.parse(h[v](I)),wr:0};a(i,r(h[v](s)),function(){e[C](t.ad)});var l={prebid:{adId:t.adId,cpm:t.cpm}},d={d:s,t:t.ad,cb:n,id:l};c[o]={},c[o][i]=d}var l=t.bidder,d=t.size,c=e.parentWindow||e.defaultView,h=c.JSON,m=c.btoa,p=c.encodeURIComponent;if(!h||!m)return!1;var u="t",b="i",f="script",y="src",g="replace",w="error",v="stringify",C="wr"+b+u+"e",_="https://"+i+"/?wrapper="+p(o)+"&tpid=",I={k:{hb_bidder:[l],hb_size:[d]}};return s(),e.close(),!0},s=function(){this.name="m_confiant_write"};return s.prototype.write=function(s,l,d){var c=d.getTranslatedSizes(),h=e.createAdIframe(c);s.appendChild(h);var m=h.contentDocument;m.open(),"https:"!==t.topWindow.location.protocol||e.isIE||m.write('<head><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"></head>');var p=d.getID(),u={ad:l,bidder:p,size:c.width+"x"+c.height,cpm:0,adId:p};a(m,u,"clarium.global.ssl.fastly.net","Oc5G-Hspq4A8LRAWqm97FUqme_U",function(){var t=e.dataset(s,"elementId");o.setBlockedAdRequest(t,p,n.CONFIANT_BLOCK),i.info("Confiant found malware ad for tag id: "+p);var a=Cbola.Globals.AdsService.getTriggersManagerByElementId(t);if(a){var l=e.dataset(s,"apperance"),d=e.dataset(s,"spot"),c=e.dataset(s,"bannerId");a.malwareRefresh(l,d,c,r.REFRESH_CONFIANT_BLOCK)}})||(m.write(l),m.close())},new s}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.AdLightningIframeWriter=function(){var e=Cbola.Utils,t=Cbola.Templates,i=Cbola._,o="carambola_ADL_",n=o.length,r=Cbola.Logger.getInstance(),a=Cbola.Common.AnalyticsService,s=Cbola.Enums.BlockedAdTriggerTypes,l=Cbola.Enums.AdTriggerTypes,d="AdLightningIframeWriter",c=!1,h=function(){c||(c=!0,window.addEventListener("message",m))},m=function(e){var t="blockedAdMessageHandler";if(e.origin===window.location.origin&&"string"==typeof e.data&&e.data.startsWith(o)){var i={};try{i=JSON.parse(e.data.substr(n))}catch(i){return void r.errorM(d+"."+t,d+"."+t+" failed on message parsing - "+e.data+".",i)}var c=i,h=c.elemId,m=c.apperance,p=c.spot,u=c.bannerId,b=c.adId;a.setBlockedAdRequest(h,b,s.AD_LIGHTNING_BLOCK),r.info("Ad Lightning found malware ad for tag id: "+b);var f=Cbola.Globals.AdsService.getTriggersManagerByElementId(h);f&&f.malwareRefresh(m,p,u,l.REFRESH_AD_LIGHTNING_BLOCK)}},p=function(){this.name="ad_lightning_write"};return p.prototype.write=function(n,r,a){h();var s=a.getTranslatedSizes(),l=a.getID(),d={message:""+o+JSON.stringify({elemId:e.dataset(n,"elementId"),apperance:e.dataset(n,"apperance"),spot:e.dataset(n,"spot"),bannerId:e.dataset(n,"bannerId"),adId:l}),tag:r,adId:l};i.extend(d,s);var c=e.createAdIframe(s);n.appendChild(c);var m=t.getCompiledTemplate("ad_lightning_iframe.html"),p=c.contentDocument;p.open(),p.write(m(d)),p.close()},new p}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.DevConWriter=function(){var e=Cbola,t=e._,i=e.Utils,o=e.Templates;return new(function(){function e(){_classCallCheck(this,e),this.name="devcon_write"}return _createClass(e,[{key:"write",value:function(e,n,r){var a=r.getTranslatedSizes(),s={tag:n,adId:r.getID(),tagType:r.isHeaderBidding()?"HB":"WF",providerId:r.getProviderID()};t.extend(s,a);var l=i.createAdIframe(a);e.appendChild(l);var d=o.getCompiledTemplate("devcon_iframe.html"),c=l.contentDocument;c.open(),c.write(d(s)),c.close()}}]),e}())}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.SafeFrameWriter=function(){var e=Cbola,t=e._,i=e.Env,o=e.Utils,n=Cbola.Logger.getInstance(),r="SafeFrameWriter",a=function(){function e(){_classCallCheck(this,e),this.name="safe_frame_write",this.counter=0,this.hosts={},window.addEventListener("message",this.messageHandler.bind(this))}return _createClass(e,[{key:"messageHandler",value:function(e){var o=e.origin,a=e.data,s=void 0;try{if(o!==""+i.protocol+t.first(i.safeFramePath.match(/^\/\/.+?(?=\/)/)))return;s=JSON.parse(a)}catch(e){return}var l=void 0,d=s,c=d.cbolaSfId;if(void 0!==c&&this.hosts[c]){l=this.hosts[c];var h=s,m=h.method;"string"==typeof m&&"function"==typeof l[m]?l[m]():n.errorM(r+".messageHandler",r+".messageHandler failed to call method "+m)}}},{key:"write",value:function(e,t,i){var o=this.generateId();this.hosts[o]=new s(o,e,t,i)}},{key:"generateId",value:function(){return this.counter+=1,this.counter}}]),e}(),s=function(){function e(t,n,r,a){_classCallCheck(this,e);var s=a.getTranslatedSizes(),l=o.createAdIframe(s,!1),d=s.width,c=s.height;n.appendChild(l),l.src=""+i.protocol+i.safeFramePath+"sf/sf"+i.clientPathType+".html?sfid="+t+"&width="+d+"&height="+c,this.iframeWindow=l.contentWindow,this.tag=r}return _createClass(e,[{key:"ready",value:function(){var e=JSON.stringify({method:"inject",params:{tag:this.tag}});this.iframeWindow.postMessage(e,"*"),this.injectTimeout=setTimeout(function(){n.errorM("SafeFrameManager.ready","SafeFrameManager.ready ad injection timeout")},1e3)}},{key:"adInjected",value:function(){clearTimeout(this.injectTimeout)}}]),e}();return new a}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.StandardSafeFrameWriter=function(){var e=Cbola,t=e._,i=e.Env,o=e.Common.RequestHandler,n=0,r=0,a=function(){return"cbola-sf-"+n++},s=function(){return"cbolaSafeFramePosition"+r++};return new(function(){function e(){_classCallCheck(this,e),this.createConfig=t.once(function(){this.config={renderFile:i.safeFramePath+"sf/stdsf"+i.clientPathType+".html",auto:!1}}),this.name="std_sf_writer";var o=window.$sf;this.host=o?o.host:null,this.loadSFresoucesPromise=this.host?Promise.resolve():null}return _createClass(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];this.createConfig(),this.loadSFResources().then(function(){e.renderAd.apply(e,i)})}},{key:"loadSFResources",value:function(){var e=this;return this.host?this.loadSFresoucesPromise=Promise.resolve():this.loadSFresoucesPromise||(this.loadSFresoucesPromise=o.getJsBundle("sf/base"+i.clientPathType+".js").then(function(){return o.getJsBundle("sf/host"+i.clientPathType+".js")}).then(function(){return e.host=window.$sf.host})),this.loadSFresoucesPromise}},{key:"renderAd",value:function(e,t,i){var o=document.createElement("div");e.appendChild(o),e=e.children[0];var n=s(),r=i.getTranslatedSizes(),l=r.width,d=r.height,c={id:n,w:l,h:d},h=a();e.id=h,new this.host.PosConfig(c,h,this.config);var m=new this.host.Position(n,t);this.host.render(m)}}]),e}())}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.Base=Cbola.Common.Ads.Tags.Base||function(){var e,t,i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=Cbola._,r="BaseTag";return t=e=function(){function e(t){_classCallCheck(this,e),n.extend(this,t),this.sizeName=e.getAdSizeName(t),this.usedCounter=0,this.unAvailabilityParams={timeoutDelay:!1}}return _createClass(e,null,[{key:"getAdSizeName",value:function(t){var o=t.AdWidth+"_"+t.AdHeight;return e.AD_SIZES["W"+t.AdWidth+"H"+t.AdHeight]||i.warnOnceM(r+".getAdsSizeName",r+".getAdsSizeName encountered unfamiliar ad size: "+o),o}}]),_createClass(e,[{key:"onSelection",value:function(){return this.updateUsedCounter(),135===this.ProviderId&&this.delayAvailabilityBySec(),this}},{key:"delayAvailabilityBySec",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;i.info(o,"Base ad tag ("+this.sizeName+", "+this.Id+"): disabling availability for 60 sec"),this.unAvailabilityParams.timeoutDelay=!0,setTimeout(function(){i.info(o,"Base ad tag ("+e.sizeName+", "+e.Id+"): re-enabling timeout delay availability"),e.unAvailabilityParams.timeoutDelay=!1},1e3*t)}},{key:"updateUsedCounter",value:function(){this.usedCounter+=1}},{key:"getSizeName",value:function(){return this.sizeName}},{key:"getPriority",value:function(){return n.result(this,"Priority")||0}},{key:"getWeight",value:function(){return n.result(this,"Weight")||1}},{key:"getTypeName",value:function(){return this.isVideo()?e.AD_TYPES.VIDEO.name:e.AD_TYPES.DISPLAY.name}},{key:"getID",value:function(){return this.Id||0}},{key:"getMaxCap",value:function(){return this.MaxCap||0}},{key:"getProviderID",value:function(){return this.ProviderId}},{key:"getTag",value:function(){return this.Tag}},{key:"getTranslatedSizes",value:function(){return e.translateSize(this.AdWidth,this.AdHeight)}},{key:"getTagExtractionType",value:function(){return this.TagExtractionType||Cbola.Config.extractTypeAds}},{key:"isPremium",value:function(){return this.Mode===e.AD_MODES.PREMIUM}},{key:"isVideo",value:function(){return this.AdType===e.AD_TYPES.VIDEO.num}},{key:"isDisplay",value:function(){return this.AdType===e.AD_TYPES.DISPLAY.num}},{key:"isMaxCaped",value:function(){return this.MaxCap>0&&this.MaxCap<=this.usedCounter}},{key:"isAvailable",value:function(){return!this.isMaxCaped()&&!n.some(this.unAvailabilityParams)}},{key:"isHeaderBidding",value:function(){return this.IsHb}},{key:"shouldShowX",value:function(){return this.ShowX}}]),e}(),e.translateSize=n.memoize(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{width:e,height:parseInt(10*Math.floor(t/10))}},function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+"_"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}),e.AD_TYPES={DISPLAY:{name:"DisplayAdTag",num:0},VIDEO:{name:"VideoAdTag",num:1}},e.AD_SIZES={W300H250:"300_250",W300H251:"300_251",W300H252:"300_252",W300H600:"300_600",W728H90:"728_90",W320H50:"320_50",W728H91:"728_91",W728H92:"728_92",W310H260:"310_260",W400H300:"400_300",W500H300:"500_300",W630H90:"630_90",W10hH0:"10_10"},e.AD_MODES={REGULAR:1,PREMIUM:3,CPI:9},t}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.Base=Cbola.Common.Ads.Stores.Base||function(){var e=Cbola._;return function(){function t(e){_classCallCheck(this,t),this.elemId=e.elemId,this.wid=e.wid,this.inventory={},this.store={}}return _createClass(t,[{key:"addToInventory",value:function(t){var i=t.getSizeName();e.isNil(this.inventory[i])&&(this.inventory[i]=[]),this.inventory[i].push(t)}},{key:"init",value:function(){return this}}]),t}()}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Tags.Waterfall=Cbola.Common.Ads.Tags.Waterfall||function(){var e=Cbola.Common.Ads.Tags.Base,t=Cbola.Logger.getInstance(),i=Cbola.Logger.Colors.ORANGE;return function(e){function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.inQueue=!1,t.psaCounter=0,t.unAvailabilityParams.maxPSA=!1,t}return _inherits(o,e),_createClass(o,[{key:"setInQueue",value:function(e){this.inQueue=e}},{key:"isInQueue",value:function(){return this.inQueue}},{key:"incrementPSACount",value:function(){this.psaCounter+=1,this.isMaxedPSA()&&(t.info(i,"WF Tag("+this.getID()+"): reached max PSA cap ("+this.PsaTagCap+") - removing from inventory."),this.unAvailabilityParams.maxPSA=!0)}},{key:"isMaxedPSA",value:function(){return this.PsaTagCap&&this.PsaTagCap===this.psaCounter}}]),o}(e)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.WaterfallQueue=Cbola.Common.Ads.WaterfallQueue||function(){var e=Cbola._,t=Cbola.Utils,i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=Cbola.Common.Ads.Tags.Base.AD_TYPES;return function(){function r(t){var i=this;_classCallCheck(this,r),this.sizeName=t,this.queues={},e.forEach(n,function(e){return i.queues[e.name]=[]})}return _createClass(r,[{key:"isEmpty",value:function(t){var i=e.result(this,"queues."+t);return e.isNil(i)||e.isEmpty(i)||!i.some(function(e){return e.isAvailable()})}},{key:"pushAdsByTypeName",value:function(n,r){e.forEach(n,function(e){return e.setInQueue(!0)}),t.push.apply(this.queues[r],n),i.info(o,"Waterfall ads queue ("+this.sizeName+" -> "+r+") pushed new ads.",this.queues[r])}},{key:"pullAdByTypeName",value:function(e){for(var t=this.queues[e],i=0;i<t.length;i++){var o=t[i];if(o.isAvailable())return o.setInQueue(!1),t.splice(i,1),o}return null}}]),r}()}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.WaterfallTags=Cbola.Common.Ads.Stores.WaterfallTags||function(){var e=Cbola._,t=Cbola.Common.Ads.Stores.Base,i=Cbola.Common.Ads.Tags.Base,o=Cbola.Common.Ads.WaterfallQueue,n=Cbola.Logger.getInstance(),r=Cbola.Logger.Colors.ORANGE;return function(t){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.psaCounter={},t.placementPSACap={},t.manager=e,t}return _inherits(a,t),_createClass(a,null,[{key:"shuffleAds",value:function(t){var i=0;return e.chain(t).sortBy("priority").reverse().reduce(function(e,t){var o=t.weights,n=t.ads,r=t.currentMaxWeight,a=t.priority;for(o=o.slice(0),n=n.slice(0);o.length>0&&a>=i;){for(var s=void 0,l=Math.ceil(Math.random()*r),d=-1,c=0,h=0;h<o.length;h++)o[h]>=l&&(-1===d?(d=h,s=n[h],c=s.getWeight()):o[h]-=c);o.splice(d,1),n.splice(d,1),r-=c,s&&!s.isInQueue()&&(s.getMaxCap()>0&&i<a&&s.isAvailable()&&(i=a),e.push(s))}return e},[]).value()}},{key:"getPathFromAd",value:function(e){return e.getSizeName()+"."+e.getTypeName()+"."+e.getPriority()}}]),_createClass(a,[{key:"addToInventory",value:function(t){var i=a.getPathFromAd(t),o={ads:[],weights:[],currentMaxWeight:0,priority:t.getPriority()},n=e.get(this.inventory,i,o);n.ads.push(t),n.currentMaxWeight+=t.getWeight(),n.weights.push(n.currentMaxWeight),e.setWith(this.inventory,i,n,Object)}},{key:"removeAdFromInventory",value:function(t){var i=a.getPathFromAd(t),o=e.get(this.inventory,i);if(!e.isNil(o)){for(var n=-1,r=t.getWeight(),s=t.getID(),l=0;l<o.ads.length;l++)-1===n?o.ads[l].getID()===s&&(n=l):o.weights[l]-=r;if(-1!==n&&(o.currentMaxWeight-=r,o.ads.splice(n,1),o.weights.splice(n,1)),e.isEmpty(o.ads)){var d=e.toPath(i);do{e.unset(this.inventory,d),d.pop()}while(d.length>0&&e.isEmpty(e.get(this.inventory,d)));0===d.length&&this.manager.resetHBSettingsTiersThresholdForSize(t.getSizeName())}}}},{key:"init",value:function(t){var n=this,r=e.result(t,"AdsForSize",{});e.forEach(r,function(t){var r=i.getAdSizeName(t),s=n.inventory[r];s&&(n.placementPSACap[r]=n.placementPSACap[r]||e.get(t,"PsaPlacementCap")||0,n.store[r]=n.store[r]||new o(r),n.psaCounter[r]=0,e.forEach(s,function(e,t){n.store[r].pushAdsByTypeName(a.shuffleAds(e),t)}))})}},{key:"getAd",value:function(t,i){var o=t.getPlaceholderSizeName(),s=this.store[o];if(!s)return null;if(s.isEmpty(i)){n.info(r,"WF store("+o+" -> "+i+"): is empty reshuffling ads.");var l=e.get(this.inventory,o+"."+i);l&&s.pushAdsByTypeName(a.shuffleAds(l),i)}var d=s.pullAdByTypeName(i);return e.isNil(d)?n.info(r,"WF store("+o+" -> "+i+"): failed getting waterfall ad."):(n.info(r,"WF store("+o+" -> "+i+"): selected waterfall ad: ",d),this.onSuccessfulAdSelection(d)),d}},{key:"onSuccessfulAdSelection",value:function(e){var t=e.getSizeName();e.onSelection(),e.isMaxCaped()&&(n.info(r,"WF store("+t+"): ad id "+e.getID()+" max caped - removing from inventory"),this.removeAdFromInventory(e))}},{key:"incrementPSACounter",value:function(e){this.psaCounter[e]+=1}},{key:"isMaxPlacementPSA",value:function(e){return this.placementPSACap[e]>0&&this.psaCounter[e]>=this.placementPSACap[e]}},{key:"removeAdsForSize",value:function(e){n.info(r,"WF store("+e+"): removing all ads"),delete this.inventory[e],delete this.store[e]}}]),a}(t)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.HeaderBiddingRequest=Cbola.Common.Ads.Tags.HeaderBiddingRequest||function(){var e=Cbola._;return function(){function t(i){_classCallCheck(this,t),this.request=e.clone(i.getTag()),this.id=i.getID(),this.hbFactor=i.HbFactor||1,this.manager=i,this.cpm=0,this.factoredCPM=0,this.translatedSizes=i.getTranslatedSizes()}return _createClass(t,[{key:"setCPM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.cpm=e,this.factoredCPM=this.cpm*this.hbFactor}},{key:"setTag",value:function(e){this.Tag=e}},{key:"setResponseTimestamp",value:function(e){this.responseTimestamp=e}},{key:"setTimeToRespond",value:function(e){this.timeToRespond=e}},{key:"getBidRequest",value:function(){return this.request}},{key:"getBidder",value:function(){return e.get(this.request,"bidder","")}},{key:"getID",value:function(){return this.id}},{key:"getCPM",value:function(){return this.cpm}},{key:"getFactoredCPM",value:function(){return this.factoredCPM}},{key:"getTag",value:function(){return this.Tag}},{key:"getTypeName",value:function(){return this.manager.getTypeName()}},{key:"shouldShowX",value:function(){return this.manager.shouldShowX()}},{key:"getResponseTimestamp",value:function(){return this.responseTimestamp||null}},{key:"getTimeToRespond",value:function(){return this.timeToRespond||null}},{key:"getTranslatedSizes",value:function(){return this.translatedSizes}},{key:"getTagExtractionType",value:function(){return this.manager.getTagExtractionType()}}]),t}()}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),_get=function e(t,i,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)};window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.HeaderBidding=Cbola.Common.Ads.Tags.HeaderBidding||function(){var e=Cbola.Common.Ads.Tags.Base,t="HeaderBiddingAdTag",i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=Cbola._,r={REGULAR:1,PENDING:2,SAMPLING:3},a={PRE_AUCTION:"preAuction",POST_AUCTION:"postAuction"},s={type:r.REGULAR,consecutiveInvalidBidsCount:0,skippedAuctionsCount:0},l=function(e,t){var i=e;return i.type!==r.PENDING||n.isEmpty(t)||(i=c(e),i.skippedAuctionsCount>=t.BidsToWait?(i.type=t.BidsToSample>0?r.SAMPLING:r.REGULAR,i.skippedAuctionsCount=0,i.consecutiveInvalidBidsCount=0):i.skippedAuctionsCount+=1),i},d=function(e,t,i){var o=e,a=e.type;if(a!==r.PENDING&&!n.isEmpty(t))if(i>0&&(e.type!==r.REGULAR||e.consecutiveInvalidBidsCount>0))o=c(s);else{o=c(e);var l=a===r.REGULAR?"BidsWithoutCPM":"BidsToSample";e.consecutiveInvalidBidsCount+1>=t[l]?(o.type=r.PENDING,o.skippedAuctionsCount=0,o.consecutiveInvalidBidsCount=0):o.consecutiveInvalidBidsCount+=1}return o},c=function(e){return{type:e.type,consecutiveInvalidBidsCount:e.consecutiveInvalidBidsCount,skippedAuctionsCount:e.skippedAuctionsCount}};return function(e){function c(e){_classCallCheck(this,c);var r="ctor",a=_possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));try{a.Tag=JSON.parse(a.Tag);var l=n.get(a,"Tag.bidder");l||i.errorM(t+"."+r,t+"."+r+" found ad tag without bidder name, Id: "+a.Id),a.unAvailabilityParams.bidParseFail=!l}catch(e){i.errorM(t+"."+r,t+"."+r+" failed to convert ad tag "+a.Id+" to json format"),a.unAvailabilityParams.bidParseFail=!0}return a.throttlingState=s,n.isNil(a.ThrottlingRules)||(n.some(a.ThrottlingRules,n.isNil)?(a.ThrottlingRules=null,i.info(o,"HB Tag Manager ("+a.sizeName+" , "+a.Id+"): failed initializing throttling rules")):i.info(o,"HB Tag Manager ("+a.sizeName+" , "+a.Id+"): throttling rules: ",a.ThrottlingRules)),a}return _inherits(c,e),_createClass(c,[{key:"getBidInstance",value:function(){return new Cbola.Common.Ads.Tags.HeaderBiddingRequest(this)}},{key:"onAuctionResponse",value:function(e){return this.throttlingStateReducer({name:a.POST_AUCTION,cpm:e}),this}},{key:"onPreAuction",value:function(){return this.throttlingStateReducer({name:a.PRE_AUCTION}),this}},{key:"isAvailable",value:function(){return this.throttlingState.type!==r.PENDING&&_get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"isAvailable",this).call(this)}},{key:"throttlingStateReducer",value:function(e){switch(e.name){case a.PRE_AUCTION:this.throttlingState=l(this.throttlingState,this.ThrottlingRules);break;case a.POST_AUCTION:this.throttlingState=d(this.throttlingState,this.ThrottlingRules,e.cpm)}}}]),c}(e)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.HeaderBiddingSettings=Cbola.Common.Ads.HeaderBiddingSettings||function(){var e=Cbola._;return function(){function t(i,o){_classCallCheck(this,t);var n=e.get(i,"UsePt");this.usePocket=e.isNil(n)||n;var r=e.get(i,"UseSW");this.useSandwich=this.usePocket&&(e.isNil(r)||r),this.pocketUsageThreshold=Math.max(Math.min(e.get(i,"PtThreshold")||.5,1),0),this.hbTimeout=e.get(i,"Timeout")||2e3,this.hbMaxTimeInPocket=e.get(i,"PtTimeout"),this.hbTiersThreshold=Math.max(e.get(i,"TiersThreshold")||e.get(o,"HbThreshold")||0,0)}return _createClass(t,[{key:"isHbPocketSupported",value:function(){return this.usePocket}},{key:"isHbLowTierSupported",value:function(){return this.useSandwich}},{key:"getHBPocketUsageThreshold",value:function(){return this.pocketUsageThreshold}},{key:"getHbTimeout",value:function(){return this.hbTimeout}},{key:"getHbMaxTimeInPocket",value:function(){return this.hbMaxTimeInPocket}},{key:"getHbTiersThreshold",value:function(){return this.hbTiersThreshold}},{key:"resetTiersThreshold",value:function(){this.hbTiersThreshold=0}}]),t}()}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.HeaderBiddingPocket=Cbola.Common.Ads.HeaderBiddingPocket||function(){var e=Cbola._,t=Cbola.Utils,i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=function(){function n(e,t){_classCallCheck(this,n),this.hbSettings=e,this.sizeName=t,this.highTier=[],this.hbSettings.isHbLowTierSupported()&&(this.lowTier=[]),this.batchesCounter=0}return _createClass(n,null,[{key:"mergeSortedBidsToPocket",value:function(e,i){for(var o=0,n=0,r=e.length,a=i.length;o<r&&n<a;){for(;e[o].getFactoredCPM()>i[n].getFactoredCPM();)o+=1;e.splice(o,0,i[n]),n+=1,o+=1}n<a&&t.push.apply(e,i.slice(n))}},{key:"removeFromPocketByDelay",value:function(t,i,o,n){n&&(e.forEach(i,function(e){return e.batchID=o}),setTimeout(function(){return e.remove(t,function(e){return e.batchID===o})},n))}}]),_createClass(n,[{key:"pushAds",value:function(t){var r=this.hbSettings.getHbTiersThreshold(),a=e.remove(t,function(e){return e.getFactoredCPM()>r}),s=this.hbSettings.getHbMaxTimeInPocket(),l=this.getBatchID();if(!e.isEmpty(a)){var d=e.result(a,"[0].getCPM",null),c=e.result(this.highTier,"[0].getCPM",null);e.forEach(a,function(e){e.pocketUsageType=n.PocketUsageTypes.FROM_AUCTION,e.pocketCPM=c}),e.forEach(this.highTier,function(e){e.pocketUsageType=n.PocketUsageTypes.FROM_HIGH_TIER,e.pocketCPM=null,e.auctionCPM=d}),n.mergeSortedBidsToPocket(this.highTier,a),this.updateHighTierBidsThreshold(),n.removeFromPocketByDelay(this.highTier,a,l,s),i.info(o,"HB Pocket ("+this.sizeName+"): added bids to high tier pocket: ",this.highTier)}this.hbSettings.isHbLowTierSupported()&&!e.isEmpty(t)&&(e.forEach(t,function(e){return e.pocketUsageType=n.PocketUsageTypes.FROM_LOW_TIER}),n.mergeSortedBidsToPocket(this.lowTier,t),n.removeFromPocketByDelay(this.lowTier,t,l,s),i.info(o,"HB Pocket ("+this.sizeName+"): added bids to low tier pocket: ",this.lowTier))}},{key:"updateHighTierBidsThreshold",value:function(){var t=this.hbSettings.getHBPocketUsageThreshold();e.forEach(this.highTier,function(e,i,o){return e.hasAllowedThreshold=0===i||(o[i-1].getFactoredCPM()-e.getFactoredCPM())/(o[i-1].getFactoredCPM()||1)<t})}},{key:"getBatchID",value:function(){return this.batchesCounter+=1,this.batchesCounter}},{key:"getHighTierAd",value:function(){return e.get(this.highTier,"[0].hasAllowedThreshold")?this.highTier.shift():null}},{key:"getLowTierAd",value:function(){return this.hbSettings.isHbLowTierSupported()?this.lowTier.shift():null}},{key:"mergeLowTierToHighTier",value:function(){e.isEmpty(this.lowTier)||(t.push.apply(this.highTier,this.lowTier),this.lowTier=[],this.updateHighTierBidsThreshold())}},{key:"extendAdWithTiersSizes",value:function(t){e.extend(t,{pocketSizeHT:this.highTier.length,pocketSizeLT:this.hbSettings.isHbLowTierSupported()?this.lowTier.length:null})}}]),n}();return n.PocketUsageTypes={FROM_AUCTION:1,FROM_HIGH_TIER:2,FROM_LOW_TIER:3},n}();var _get=function e(t,i,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.HeaderBiddingTags=Cbola.Common.Ads.Stores.HeaderBiddingTags||function(){var e=Cbola,t=e._,i=(e.Config,e.Common),o=i.PrebidAdaptor,n=i.Ads,r=n.HeaderBiddingPocket,a=n.HeaderBiddingSettings,s=n.Tags.Base,l=n.Stores.Base,d=Cbola.Logger.getInstance(),c=Cbola.Logger.Colors.ORANGE;return function(e){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.activeAuctions={},t.premiumPlusInventory={},t.tagIdPerSize={},t.HbSettings={},t}return _inherits(i,e),_createClass(i,null,[{key:"onAuctionResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.forEach(e,function(e){return e.manager.onAuctionResponse(e.cpm)}),e.filter(function(e){return e.getFactoredCPM()>i}).sort(function(e,t){return t.getFactoredCPM()-e.getFactoredCPM()})}}]),_createClass(i,[{key:"addToInventory",value:function(e){if(e.isAvailable()){var o=e.getSizeName();if(t.isNil(this.tagIdPerSize[o])&&(this.tagIdPerSize[o]=e.getID()),e.isPremium()){for(var n=e.getProviderID(),r=t.get(this.premiumPlusInventory,"["+o+"]["+n+"]",[]),a=0,s=e.getPriority();a<r.length&&r[a].getPriority()>s;a++);r.splice(a,0,e),t.setWith(this.premiumPlusInventory,"["+o+"]["+n+"]",r,Object)}else _get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"addToInventory",this).call(this,e)}}},{key:"removeAdFromInventory",value:function(e){var i=e.getSizeName(),o=e.getID();t.remove(this.inventory[i],function(e){return e.getID()===o})}},{key:"init",value:function(e){var i=this;t.forEach(e.AdsForSize,function(o){var n=s.getAdSizeName(o);t.isEmpty(i.inventory[n])&&t.isEmpty(i.premiumPlusInventory[n])||(t.isEmpty(i.HbSettings[n])&&(i.HbSettings[n]=new a(t.get(o,"HbSettings")||{},e),d.info(c,"HB store ("+n+"): created HB pocket and settings object: ",i.HbSettings[n])),i.HbSettings[n].isHbPocketSupported()&&t.isEmpty(i.store[n])&&(i.store[n]=new r(i.HbSettings[n],n)))})}},{key:"getAd",value:function(e){var n=this,a=e.getPlaceholderSizeName();if(t.isEmpty(this.inventory[a])&&t.isEmpty(this.premiumPlusInventory[a]))return d.info(c,"HB store ("+a+"): No HB ads"),Promise.reject("No HB ads");if(this.HbSettings[a].isHbPocketSupported()){var s=this.store[a].getHighTierAd();return s?(this.store[a].extendAdWithTiersSizes(s),d.info(c,"HB store ("+a+"): selected ad from high tier pocket: ",s),Promise.resolve(s)):this.createAuctionToPocketPromise(a).then(function(){var e=n.store[a].getHighTierAd();return e?(n.store[a].extendAdWithTiersSizes(e),d.info(c,"HB store ("+a+"): selected ad from high tier pocket after auction: ",e),Promise.resolve(e)):(d.info(c,"HB store ("+a+"): failed selecting ad from high tier pocket."),Promise.reject(new Error("Failed to find high tier ad")))})}var l=this.HbSettings[a].getHbTimeout(),h=this.getBidsForAuction(a);return t.isEmpty(h)?(d.info(c,"HB store ("+a+"): No pocket support and no bids for auction, terminating HB process"),Promise.reject(new Error("No available bids for size: "+a))):(d.info(c,"HB store ("+a+"): No pocket support auctioning (TO: "+l+") for highest bid: ",h),o.auction(h,l).then(function(e){var o=i.onAuctionResponse(e,n.HbSettings[a].getHbTiersThreshold()).shift();return o?(t.extend(o,{pocketUsageType:r.PocketUsageTypes.FROM_AUCTION,pocketSizeHT:null,PocketSizeLT:null}),d.info(c,"HB store ("+a+"): No pocket support, Selected highest bid : ",o),Promise.resolve(o)):(d.info(c,"HB store ("+a+"): No pocket support, failed selecting highest bid"),Promise.reject(new Error("Failed to get ad")))}))}},{key:"createAuctionToPocketPromise",value:function(e){var n=this;if(!this.activeAuctions[e]){var r=this.HbSettings[e].getHbTimeout(),a=this.getBidsForAuction(e);if(t.isEmpty(a))return d.info(c,"HB store ("+e+"): failed getting bids for auction, terminating hb ad selection"),Promise.reject(new Error("No available bids for size: "+e));d.info(c,"HB store ("+e+"): Performing auction (TO: "+r+") on the following bids: ",a),this.activeAuctions[e]=o.auction(a,r).then(function(t){return t=i.onAuctionResponse(t),n.store[e].pushAds(t),delete n.activeAuctions[e],Promise.resolve()},function(t){return delete n.activeAuctions[e],Promise.reject(t)})}return d.info(c,"HB store ("+e+"): Pending auction response"),this.activeAuctions[e]}},{key:"getBidsForAuction",value:function(e){var i=this,o=t.get(this.premiumPlusInventory,e),n=[];o&&(n=t.reduce(o,function(n,r,a){var s=-1,l=-1,d=0;t.forEach(r,function(e,t){e.onPreAuction(),s<0&&e.isAvailable()&&(s=t),!d&&e.getMaxCap()>0&&(d=e.getPriority()),s>=0&&d<=e.getPriority()&&(l=t)});var c=r.splice(s,1)[0];return t.isNil(c)||(c.onSelection(),n.push(c.getBidInstance()),c.isMaxCaped()||r.splice(l,0,c)),t.isEmpty(r)&&(delete o[a],t.isEmpty(o)&&delete i.premiumPlusInventory[e]),n},[]));var r=t.get(this.inventory,e),a=[];return r&&(a=r.reduce(function(e,t){return t.onPreAuction().isAvailable()&&(t.onSelection(),e.push(t.getBidInstance()),t.isMaxCaped()&&i.removeAdFromInventory(t)),e},[])),n.concat(a)}},{key:"getLowTierAd",value:function(e){var t=e.getPlaceholderSizeName();if(!this.HbSettings[t].isHbLowTierSupported())return d.info(c,"HB store ("+t+"): low tier pocket is not supported"),null;var i=this.store[t].getLowTierAd();return i?(this.store[t].extendAdWithTiersSizes(i),d.info(c,"HB store ("+t+"): Selected low tier ad: ",i),i):(d.info(c,"HB store ("+t+"): Failed selecting low tier ad."),null)}},{key:"getTagIdForSize",value:function(e){return this.tagIdPerSize[e]||0}},{key:"isLowTierSupportedForSize",value:function(e){return t.result(this,"HbSettings["+e+"].isHbLowTierSupported",!1)}},{key:"resetTiersThresholdForSize",value:function(e){t.isNil(this.HbSettings[e])||(this.HbSettings[e].resetTiersThreshold(),this.store[e].mergeLowTierToHighTier())}}]),i}(l)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.A9=Cbola.Common.Ads.Tags.A9||function(){var e=Cbola.Common.Ads.Tags.Base;return function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"getDFPSlotName",value:function(){return this.Tag}},{key:"getPrebidBidsForAuction",value:function(){return this.headerBiddingStore.getBidsForAuction(this.getSizeName())}},{key:"getAuctionTimeout",value:function(){return this.auctionTimeout}},{key:"setAuctionTimeout",value:function(e){this.auctionTimeout=e}},{key:"setHeaderBiddingStore",value:function(e){this.headerBiddingStore=e}}]),t}(e)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.A9Tags=Cbola.Common.Ads.Stores.A9Tags||function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=Cbola.Logger.Colors.ORANGE,o=Cbola.Common.Ads.HeaderBiddingSettings,n=Cbola.Common.Ads.Tags.Base,r=Cbola.Common.Ads.Stores.Base;return function(r){function a(e,t){_classCallCheck(this,a);var i=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return i.headerBiddingStore=t,i.HbSettings={},i}return _inherits(a,r),_createClass(a,[{key:"addToInventory",value:function(t){var i=t.getSizeName();e.isNil(this.inventory[i])&&(this.inventory[i]=t,t.setHeaderBiddingStore(this.headerBiddingStore))}},{key:"init",value:function(t){var i=this;e.forEach(t.AdsForSize,function(r){var a=n.getAdSizeName(r);e.isEmpty(i.inventory[a])||(i.HbSettings[a]=new o(e.get(r,"HbSettings")||{},t),i.inventory[a].setAuctionTimeout(i.HbSettings[a].getHbTimeout()))})}},{key:"getAd",value:function(o){var n=o.getPlaceholderSizeName();if(e.isNil(this.inventory[n]))t.info(i,"A9 store ("+n+"): no a9 tag");else{if(e.isNil(o.injectedWithA9Tag)){o.injectedWithA9Tag=!0;var r=this.inventory[n];return t.info(i,"A9 store ("+n+"): selected a9 tag.",r),r}t.info(i,"A9 store ("+n+"): already attempted a9 tag injection on placeholder: ",o)}return null}}]),a}(r)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.CPITags=Cbola.Common.Ads.Stores.CPITags||function(){var e=Cbola.Common.Ads.Stores.Base,t=(Cbola.Common.Ads.Tags.Base,Cbola.Logger.getInstance()),i=Cbola.Logger.Colors.ORANGE,o=Cbola._;return function(e){function n(e){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return _inherits(n,e),_createClass(n,[{key:"addToInventory",value:function(e){var t=e.getSizeName();o.isNil(this.inventory[t])&&(this.inventory[t]=e)}},{key:"getAd",value:function(e){var n=e.getPlaceholderSizeName(),r=o.get(this,"inventory."+n,null);return r?(t.info(i,"CPI store ("+n+"): selected CPI ad: ",r),delete this.inventory):t.info(i,"CPI store ("+n+"): failed selecting CPI ad"),r}}]),n}(e)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.PSATags=Cbola.Common.Ads.Stores.PSATags||function(){var e=Cbola.Common.Ads.Stores.Base,t=Cbola.Common.Ads.Tags.Base,i=Cbola._,o=Cbola.Enums,n=Cbola.Env,r=Cbola.Utils,a={FilteringRules:null,Id:0,IsHb:!1,MaxCap:0,Mode:1,Priority:10,ProviderId:0,PsaTagCap:0,ShowX:!0,TagExtractionType:o.TagExtractionTypes.WRITE_IFRAME,ThrottlingRules:null,Weight:1};return function(e){function o(e){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e))}return _inherits(o,e),_createClass(o,[{key:"init",value:function(e){var o=this,s=i.get(e,"AdsForSize");i.forEach(s,function(e){var s=t.getAdSizeName(e),l=e.AdHeight,d=e.AdWidth,c=t.translateSize(d,l),h=c.width,m=c.height;o.inventory[s]=new t(i.defaults({Tag:"<div id='cbola_psa'></div><script src='//psa.carambo.la/getPsa?width="+h+"&height="+m+"&did="+n.domainId+"&pid="+n.activePid+"&isMobile="+(r.isMobile?1:0)+"'><\/script>",AdHeight:l,AdWidth:d},a))})}},{key:"getAd",value:function(e){var t=e.getPlaceholderSizeName();return i.get(this.inventory,t,null)}}]),o}(e)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.Manager=Cbola.Common.Ads.Stores.Manager||function(){var e=Cbola,t=e._,i=e.Env,o=e.EventBus,n=e.Utils,r=e.Common,a=r.UserService,s=r.Ads,l=s.Stores,d=s.Tags,c=e.Enums.AdTriggerTypes,h=e.Logger.Colors.ORANGE,m=d.Base,p=m.AD_TYPES,u=m.AD_MODES,b=Cbola.Logger.getInstance(),f="AdsStoresManager",y=204,g=[{toFind:"[\\[{]CLIENTCB[\\]}]",replaceWith:t.random(1e7,9e7)},{toFind:"[\\[{]CACHEBUSTER[\\]}]",replaceWith:n.generateViewId()},{toFind:"\\[USER_AGENT\\]",replaceWith:navigator.userAgent}],w=t.once(function(){n.push.apply(g,[{toFind:"{google_page_url}",replaceWith:i.PageProperties.originalPathNameHost},{toFind:"\\[PAGE_URL\\]",replaceWith:i.PageProperties.originalPathNameHost}])}),v=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments[2];_classCallCheck(this,e),this.wid=i,this.elemId=t,this.shouldIncludePromises=[],w(),Cbola.Common.RequestHandler.getAds(i,t,o).then(this.init.bind(this)).catch(n.noOp)}return _createClass(e,null,[{key:"replaceTagParams",value:function(e){var i=g.concat([{toFind:"\\[ID\\]",replaceWith:t.get(e,"Id",0)}]),o=t.get(e,"Tag","");t.forEach(i,function(e){var t=e.toFind,i=e.replaceWith;o=n.replaceAll(t,i,o)}),e.Tag=o}}]),_createClass(e,[{key:"init",value:function(){var i=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.get(n,"AdsForSize",[]);if(t.isEmpty(r))return b.errorM(f+".init",f+".init failed no ads data exist. Widget id: "+this.wid),this;this.adsData=n,this.displayBeforeVideo=n.NumDisplayBeforeVideo||0,this.maxVideoAds=n.MaxVideos||0,this.maxDisplayAds=n.MaxDisplayAds,this.stores={psa:new l.PSATags(this),headerBidding:new l.HeaderBiddingTags(this),waterfall:new l.WaterfallTags(this),cpi:new l.CPITags(this)},this.stores.a9=new l.A9Tags(this,this.stores.headerBidding),this.storesToInit={headerBidding:!1,waterfall:!1,cpi:!1,a9:!1,psa:!0},this.storeSizes={},t.forEach(r,function(o){t.forEach(p,function(n){var r=o[n.name];t.isEmpty(r)||t.forEach(r,function(t){var o=e.filtersManager.shouldInclude(t);o instanceof Promise?i.shouldIncludePromises.push(o):o&&i.addToStoreInventoryByTagType(t)})})}),this.initStores(),o.fire(""+o.Events.ADS_STORES_MANAGER_READY+this.wid,this),this.shouldIncludePromises.length>0&&Promise.all(this.shouldIncludePromises).then(function(e){var n=Object.keys(i.storeSizes).length;t.forEach(e,function(e){t.isNil(e)||i.addToStoreInventoryByTagType(e)}),i.initStores(),n<Object.keys(i.storeSizes).length&&o.fire(""+o.Events.ADS_STORES_MANGER_ADDED_SIZES+i.wid)})}},{key:"addToStoreInventoryByTagType",value:function(t){if(t.IsHb){var i={};t.ProviderId===y?(i=new d.A9(t),this.stores.a9.addToInventory(i),this.storesToInit.a9=!0):(i=new d.HeaderBidding(t),this.stores.headerBidding.addToInventory(i),this.storesToInit.headerBidding=!0),this.storeSizes[i.getSizeName()]=!0}else if(t.Mode===u.CPI)this.stores.cpi.addToInventory(new d.Base(t)),this.storesToInit.cpi=!0;else{e.replaceTagParams(t);var o=new d.Waterfall(t);this.stores.waterfall.addToInventory(o),this.storesToInit.waterfall=!0,this.storeSizes[o.getSizeName()]=!0}}},{key:"initStores",value:function(){var e=this;t.forEach(this.stores,function(t,i){e.storesToInit[i]&&(t.init(e.adsData),e.storesToInit[i]=!1)})}},{key:"getAd",value:function(e){var t=this;if(this.maxDisplayAds>0){var i=this.stores.a9.getAd(e);return i?(this.onAdSelectionSuccess(e,i),Promise.resolve(i)):this.stores.headerBidding.getAd(e).then(function(i){return t.onAdSelectionSuccess(e,i),Promise.resolve(i)}).catch(function(){return t.getWaterfallAd(e)})}return this.getWaterfallAd(e)}},{key:"getWaterfallAd",value:function(e){var i="getWaterfallAd",o=null;if(this.displayBeforeVideo<=0&&this.maxVideoAds>0?o=this.stores.waterfall.getAd(e,p.VIDEO.name):b.info(h,f+"."+i+" - skipped attempting to set video ad, displayBeforeVideo: "+this.displayBeforeVideo+" maxVideoAds: "+this.maxVideoAds+". Element ID: "+this.elemId+", widgetId: "+this.wid+"."),!o&&this.maxDisplayAds>0)o=this.stores.waterfall.getAd(e,p.DISPLAY.name);else if(this.maxDisplayAds<=0)return b.info(h,f+"."+i+" - reached max display ads. Element ID: "+this.elemId+", widget ID: "+this.wid),Promise.reject(!0);return t.isNil(o)?Promise.reject(!1):(this.onAdSelectionSuccess(e,o),Promise.resolve(o))}},{key:"onAdSelectionSuccess",value:function(e,i){var o=t.result(e,"getInjectionType");if(o===c.REFRESH_PSA||o===c.REFRESH_CONFIANT_BLOCK||o===c.REFRESH_AD_LIGHTNING_BLOCK)return this;var n=i.getTypeName();return n===p.VIDEO.name?this.maxVideoAds-=1:n===p.DISPLAY.name&&(this.displayBeforeVideo=Math.max(this.displayBeforeVideo-1,0),this.maxDisplayAds-=1),this}},{key:"getAdsData",value:function(){return this.adsData}},{key:"getLowTierFallbackAd",value:function(e){return this.stores.headerBidding.getLowTierAd(e)}},{key:"getRandomHbTagId",value:function(e){var t=e.getPlaceholderSizeName();this.stores.headerBidding.getTagIdForSize(t)}},{key:"getCPIFallbackAd",value:function(e){return this.stores.cpi.getAd(e)}},{key:"getPSA",value:function(e){return this.stores.psa.getAd(e)}},{key:"isLowTierSupported",value:function(e){var t=e.getPlaceholderSizeName();return this.stores.headerBidding.isLowTierSupportedForSize(t)}},{key:"hasAvailableAdsForSize",value:function(e){return this.storeSizes[e]}},{key:"updateWaterfallPSACounter",value:function(e){var t=e.getPlaceholderSizeName();this.stores.waterfall.incrementPSACounter(t)}},{key:"isWaterfallMaxPlacementPSA",value:function(e){var t=e.getPlaceholderSizeName();return this.stores.waterfall.isMaxPlacementPSA(t)}},{key:"removeWaterfallAdsForSize",value:function(e){var t=e.getPlaceholderSizeName();this.stores.waterfall.removeAdsForSize(t),this.resetHBSettingsTiersThresholdForSize(t),b.trace(f+".removeWaterfallAdsForSize: Removing all WF ads due to placement PSA cap, size: "+t+".")}},{key:"removeWaterfallAd",value:function(e){this.stores.waterfall.removeAdFromInventory(e),b.trace(f+".removeWaterfallAd: Removing WF ad due to PSA tag cap. tag ID: "+e.getID()+", size: "+e.getSizeName()+".")}},{key:"resetHBSettingsTiersThresholdForSize",value:function(e){b.info(h,f+"("+e+") - resetting low tier threshold"),this.stores.headerBidding.resetTiersThresholdForSize(e)}}]),e}();return v.filtersManager={IN:{id:1,isAsync:!1,shouldTestURL:!0,onMatch:function(){return!0},onMismatch:function(){return!1}},OUT:{id:2,isAsync:!1,shouldTestURL:!0,onMatch:function(){return!1},onMismatch:function(){return!0}},DFP_COMPLIANCE:{id:3,isAsync:!1,shouldTestURL:!1,onRule:function(e){return e.Tag=n.replaceAll('"compliance": \\["yes"\\]','"compliance": ["no"]',e.Tag),!0}},REMOVE_ON_IE:{id:4,isAsync:!1,shouldTestURL:!1,onRule:function(){return!n.isIE}},REMOVE_ON_EU_USER:{id:5,isAsync:!0,shouldTestURL:!1,onRule:function(){return a.isEUUserAsync().then(function(e){var t=!e;return Promise.resolve(t)})}},REMOVE_EU_USER_WO_CMP:{id:6,isAsync:!0,shouldTestURL:!1,onRule:function(){return a.isEUUserAsync().then(function(e){var t=!0;return e?Cbola.Common.ConsentProviders.Manager.consentProviderFound().then(function(){return Promise.resolve(t)}).catch(function(){return Promise.resolve(!t)}):Promise.resolve(t)})}},getRuleByType:t.memoize(function(e){return t.find(this,function(t){return t.id===e})}),shouldInclude:function(e){var o=this,n=e.Id,r=t.get(e,"FilteringRules");if(t.isObject(r)&&r.hasOwnProperty("FilterType")&&r.hasOwnProperty("ExplicitURL")&&(r=[r]),r&&t.isArray(r)&&!t.isEmpty(r)){var a=r.reduce(function(e,r){var a=t.get(r,"FilterType"),s=o.getRuleByType(parseInt(a,10));return s?e[s.isAsync?"push":"unshift"](t.extend({ExplicitURL:r.ExplicitURL},s)):b.errorM(f+".shouldInclude","Unknown ad filtering rule type: "+a+". Including tag "+n+" for URL: "+i.PageProperties.originalPathNameHost),e},[]).reduce(function(o,r){if(!o)return o;var a="";if(r.shouldTestURL){a=(t.isArray(r.ExplicitURL)?r.ExplicitURL:["^.*"]).some(function(e){return new RegExp(e,"i").test(i.PageProperties.hostname)})?"onMatch":"onMismatch"}else a="onRule";if(a.length>0){var s=r.id,l=t.get(r,a);if(!t.isFunction(l))return b.errorM(f+".shouldInclude","Filters manager rule type "+s+" is not supporting action "+a),o;b.info(h,"AdStoresManager::FilterManager (tag ID: "+n+"): Activated filter type "+s+" action: "+a);var d=r.isAsync;!t.isArray(o)&&d&&(o=[]);var c=l(e);d?o.push(c):o=c}return o},!0);return t.isArray(a)?Promise.all(a).then(function(t){return Promise.resolve(t.every(Boolean)?e:null)}):a}return!0}},v}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdPlaceHolder=function(){var e=Cbola,t=e._,i=e.Utils,o=e.Enums,n=o.HeaderBiddingRequestStatus,r=o.AdTriggerTypes,a=e.Common,s=a.AnalyticsService,l=a.Ads,d=l.Writers,c=l.Tags.Base,h=Cbola.Logger.getInstance(),m=Cbola.Logger.Colors,p=function(e,i,o){this.banner=o,this.bannerTags=[],this.bannerCount=0,this.id=t.random(0,1e4),this.elemId=i,this.tagSizeHeight=t.get(e,"TagSizeHeight",0),this.tagSizeWidth=t.get(e,"TagSizeWidth",0),this.placeholderSizeName=c.getAdSizeName({AdWidth:this.tagSizeWidth,AdHeight:this.tagSizeHeight}),this.originalAdHeight=this.adHeight=c.translateSize(this.tagSizeWidth,this.tagSizeHeight).height,this.originalAdWidth=this.adWidth=c.translateSize(this.tagSizeWidth,this.tagSizeHeight).width,this.refreshOnMalwareCounter=0,this.displayCloseButton=!1,this.stopAllRefreshes=!1,this.adInjectionTriggerType=r.APPERANCE,this.banner.style["height"]=this.adHeight+"px",this.banner.style["width"]=this.adWidth+"px"};p.prototype.injectAd=function(e){if(t.isEmpty(e))return this;if(t.isNil(this.banner)&&(h.warnM("AdPlaceHolder.injectAd","AdPlaceHolder.injectAd error, failed banner initialization"),this.stopAllRefreshes=!0),this.stopAllRefreshes)return this;this.displayCloseButton=e.shouldShowX();var o=e instanceof Cbola.Common.Ads.Tags.A9?b:u,n=new o(this.elemId,e,this.bannerCount,this.Apperance,this.spot).init();return n.setDatasetObj({bannerId:this.bannerCount,elementId:this.elemId,apperance:this.Apperance}),t.isNil(this.spot)||n.setDatasetObj({spot:this.spot}),this.bannerCount+=1,t.isEmpty(this.bannerTags)?n.setAsFront():n.toFrontTimeOut=setTimeout(this.bringToFront.bind(this),8e3),this.bannerTags.push(n),n.attach(this.banner),n.injectTag(this.adInjectionTriggerType),this.bannerTagStyle(n),i.dataset(this.banner,"stamp",Date.now()),this},p.prototype.injectAdToExistingBanner=function(e,i){var o=t.find(this.bannerTags,function(e){return e.getId()===i});return void 0!==o&&o.injectFallbackAd(e,this.adInjectionTriggerType),this},p.prototype.bannerTagStyle=function(e){return e.setStyle({"background-color":"transparent",height:this.adHeight+"px",width:this.adWidth+"px"}),this},p.prototype.preventBannerReplacement=function(e){var i=t.remove(this.bannerTags,function(t){return t.getId()===e}).shift();return!!i&&(i.isFront()?(this.bannerTags.unshift(i),!1):(clearTimeout(i.toFrontTimeOut),i.detach(),!0))},p.prototype.bringToFront=function(){if(this.bannerTags.length>=2){var e=this.bannerTags.shift();this.banner&&(e instanceof b&&t.isFunction(e.onRemoval)&&e.onRemoval(),e.detach()),this.bannerTags[0].setAsFront()}return this},p.prototype.getInjectionType=function(){return this.adInjectionTriggerType},p.prototype.setAdInjectionType=function(e){return this.adInjectionTriggerType=e,this},p.prototype.isRefreshable=function(){return!this.stopAllRefreshes},p.prototype.stopRefresh=function(){this.stopAllRefreshes=!0},p.prototype.getAdObjByBannerId=function(e){var i=t.find(this.bannerTags,function(t){return t.getId()===e});return i?i.getAdObj():null},p.prototype.incrementMalwareRefresh=function(){return this.refreshOnMalwareCounter+=1,this},p.prototype.resetMalwareRefresh=function(){return this.refreshOnMalwareCounter=0,this},p.prototype.getMalwareRefreshCount=function(){return this.refreshOnMalwareCounter},p.prototype.getPlaceholderSizeName=function(){return this.placeholderSizeName};var u=function(){function e(t,i,o){_classCallCheck(this,e),this.elemId=t,this.adObj=i,this.id=o.toString(),this.attached=!1}return _createClass(e,[{key:"init",value:function(){return this.buildBannerTag()}},{key:"buildBannerTag",value:function(){var e=document.createElement("div");e.className="cbola-banner__tag cbola-banner__tag--back";var i=t.result(this.adObj,"getTranslatedSizes",{width:0,height:0}),o=i.width,n=i.height;return e.style["width"]=o+"px",e.style["height"]=n+"px",this.bannerTag=e,this}},{key:"attach",value:function(e){return e&&this.bannerTag&&!this.attached&&(e.appendChild(this.bannerTag),this.attached=!0,this.container=e),this}},{key:"detach",value:function(){return this.container&&this.bannerTag&&this.attached&&(this.container.removeChild(this.bannerTag),this.attached=!1,delete this.container),this}},{key:"injectTag",value:function(e){var o=this,a=this.adObj,l=a.getID();return d.Factory.getAsync(a.getTagExtractionType()).then(function(i){var d=i.name;try{i.write(o.bannerTag,t.result(a,"getTag",""),a);var c=t.result(a,"getCPM",null),m=null;e===r.WF_FALLBACK?m=n.LOW_TIER_FILLED:e!==r.INJECT_PSA&&(s.setAdsRequest(o.elemId,l,e,c),t.isNil(c)||(m=n.HIGH_TIER_FILLED)),t.isNil(m)||s.setHbBidRequestProto([{TagId:l,Cpm:c,Status:m,TimeInPocket:a.getResponseTimestamp()?Date.now()-a.getResponseTimestamp():0,TimeToRespond:a.getTimeToRespond(),AuctionCpm:a.auctionCPM||null,PocketCpm:a.pocketCPM||null,PocketUsageType:a.pocketUsageType,PocketSizeHT:a.pocketSizeHT,PocketSizeLT:a.pocketSizeLT}]),o.setDatasetObj({adId:l,cbolaTagId:l,cbolaMethod:d}),h.info(Cbola.Logger.Colors.PALE_YELLOW,"elementId: "+o.elemId+". adId: "+l+". Ad extraction type: "+a.getTagExtractionType()+", selected Extraction type: "+d)}catch(e){h.warnM("AdBannerTag.injectTag","AdBannerTag.injectTag error, extraction method: "+d),h.info(e)}}).catch(i.noOp),this}},{key:"setDatasetObj",value:function(e){var o=this;return t.forEach(e,function(e,n){t.isNil(e)||i.dataset(o.bannerTag,n,e)}),this}},{key:"injectFallbackAd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.WF_FALLBACK;this.adObj=e,this.bannerTag.innerHTML="",this.injectTag(t)}},{key:"setAsFront",value:function(){this.bannerTag.classList.remove("cbola-banner__tag--back"),this.bannerTag.classList.add("cbola-banner__tag--front")}},{key:"setStyle",value:function(e){t.extend(this.bannerTag.style,e)}},{key:"getElement",value:function(){return this.bannerTag}},{key:"getId",value:function(){return this.id}},{key:"getAdObj",value:function(){return this.adObj}},{key:"isFront",value:function(){return this.bannerTag.classList.contains("cbola-banner__tag--front")}}]),e}(),b=function(e){function o(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;_classCallCheck(this,o);var a=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t,i));return a.slotID="div-gpt-ad"+a.elemId+"-"+n+"-"+r,a.slotName=t.getDFPSlotName(),a.bidsToReport=[],a}return _inherits(o,e),_createClass(o,[{key:"injectTag",value:function(e){var t=this;h.info(m.GREEN,"A9("+this.slotID+"): start injecting a9 tag"),this.initDFPInIframe().then(function(){return h.info(m.GREEN,"A9("+t.slotID+"): iframe loaded successfully, start bidding"),t.performAuction()}).then(function(e){return h.info(m.GREEN,"A9("+t.slotID+"): performed bidding to the following bidders: "+e.join(",")),t.injectBidsToGoogleTag(e)}).then(function(){h.info(m.GREEN,"A9("+t.slotID+"): bids injected to google tag manager and the following data sent as SetHbBidRequest: ",t.bidsToReport),t.reportToAnalytics(e)}).catch(function(e){return h.errorM("DFPBannerTag.injectTag","A9: DFPBannerTag.injectTag failed, error: ",e)})}},{key:"initDFPInIframe",value:function(){var e=this;return new Promise(function(o){var n=i.createAdIframe(t.result(e,"adObj.getTranslatedSizes",{})),r=Cbola.Templates.getCompiledTemplate("a9_dfp_banner.html"),a=e.adObj.getTranslatedSizes(),s=r({clientPath:Cbola.Env.clientPath,width:a.width,height:a.height,slotName:e.slotName,slotID:e.slotID});n.onload=o,e.bannerTag.appendChild(n);var l=n.contentDocument;l.open(),l.write(s),l.close(),e.iframeWindow=n.contentWindow})}},{key:"performAuction",value:function(){var e=[this.getA9AuctionPromise()],i=this.adObj.getPrebidBidsForAuction();return t.isEmpty(i)||e.push(this.getPrebidAuctionPromise(i)),Promise.all(e)}},{key:"getA9AuctionPromise",value:function(){var e=this;return new Promise(function(t){var i=e.adObj.getTranslatedSizes();e.iframeWindow.apstag.fetchBids({slots:[{slotID:e.slotID,slotName:e.slotName,sizes:[new e.iframeWindow.Array(i.width,i.height)]}],timeout:e.adObj.getAuctionTimeout()},function(){e.bidsToReport.push({TagId:e.adObj.getID(),Cpm:0,Status:n.SUCCESS}),t("a9")})})}},{key:"getPrebidAuctionPromise",value:function(e){var i=this;return new Promise(function(o){var r=e.map(function(e){return t.extend(e.getBidRequest(),{cbolaTagID:e.getID()})}),a=i.iframeWindow,s=a.Cbola_pbjs,l=i.adObj.getTranslatedSizes();s.que.push(function(){s.addAdUnits([{code:i.slotID,bids:r,sizes:[new a.Array(l.width,l.height)]}]),s.requestBids({timeout:i.adObj.getAuctionTimeout(),bidsBackHandler:function(r){for(var a=t.get(r,i.slotID+".bids",[]),s=function(e,t,o){e.manager.onAuctionResponse(o||0),i.bidsToReport.push({TagId:e.getID(),Cpm:o||0,Status:t})};a.length>0;)for(var l=a.shift(),d=l.cpm,c=l.bidder,h=0;h<e.length;h++){var m=e[h];if(c===m.getBidder()){s(m,n.SUCCESS,d),e.splice(h,1);break}}t.forEach(e,function(e){return s(e,n.TIMEOUT,0)}),o("prebid")}})})})}},{key:"injectBidsToGoogleTag",value:function(e){var t=this;return new Promise(function(i){t.iframeWindow.googletag.cmd.push(function(){this.apstag.setDisplayBids(),e.some(function(e){return"prebid"===e})&&this.Cbola_pbjs.setTargetingForGPTAsync(),this.googletag.pubads().refresh(),i()}.bind(t.iframeWindow))})}},{key:"reportToAnalytics",value:function(e){this.bidsToReport.length>0&&(this.bidsToReport.push({TagId:this.bidsToReport[0].TagId,Status:n.REQUEST_MADE}),s.setHbBidRequestProto(this.bidsToReport),s.setAdsRequest(this.elemId,this.adObj.getID(),e))}},{key:"onRemoval",value:function(){this.iframeWindow.googletag.destroySlots()}}]),o}(u);return p}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdTriggerBase=function(){var e=Cbola,t=e._,i=e.Utils,o=e.Env,n=e.EventBus,r=e.Templates,a=e.Common,s=a._AdPlaceHolder,l=a.HasViewability,d=a.UserService,c=Cbola.Logger.getInstance(),h=function(e,i){this.elemId=i.elementId,this.Apperance=e.Apperance,this.closeBehaviors=t.get(e,"CloseBehaviors")||[],this.openBehaviors=t.get(e,"OpenBehaviors")||[],this.refreshInterval=t.get(e,"RefreshInterval"),this.layerType=i.layerType,this.adStructureNode=r.createElementFromTemplate("ad_banner_structure.html",{elemId:this.elemId,apperance:this.Apperance,advertisement:d.vocabulary("advertisement"),showAdvertisementTitle:i.showAdvertisementTitle}),this.closeTriggerButton=this.adStructureNode.querySelector(".hide-ad-button"),this.banner=this.adStructureNode.querySelector(".cbola-banner"),this.containerWrapper=i.containerWrapperNode,this.appendTo=this.containerWrapper,this.triggerStructureAppended=!1,this.initialWrapperHeight=this.wrapperHeight=i.initialWrapperHeight,s.call(this,e,this.elemId,this.banner),this.styleProperties={},this.styleClassName="cbolaApperanceStyle_"+this.elemId+"_"+e.Apperance,this.styleElements=[],this.open=!1,this.animationEnabled=i.animationEnabled,this.viewable=!1,this.hasScaled=!1};return h.prototype=Object.create(Cbola.Common._AdPlaceHolder.prototype),t.extend(h.prototype,l.prototype),h.constructor=h,h.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(this.appendTo.appendChild(this.adStructureNode),this.triggerStructureAppended=!0),this},h.prototype.appendTriggerStyle=function(){var e="cbolaApperanceStyle_"+this.Apperance+"_"+this.elemId,n=t.reduce(this.styleProperties,function(e,t,i){return""+e+i+": "+t+";"},"");n="."+e+"{"+n+"}";var r=i.injectStyle(document,n);if(r.className=this.styleClassName,this.styleElements.push(r),o.topWindow!==window){var a=i.injectStyle(o.topWindow.document,n);a.className=this.styleClassName,this.styleElements.push(a)}return this.adStructureNode&&this.adStructureNode.classList.add(e),this},h.prototype.closeAnimation=function(){return this.open?(this.adStructureNode.style["margin"]="0",this.setClose(),this):this},h.prototype.removeStyle=function(){var e=this;return setTimeout(function(){try{e.styleElements.forEach(function(e,t,i){e.parentNode.removeChild(e),delete i[t]}),e.styleElements=[]}catch(t){c.info("Failed to remove style for apperance: "+e.Apperance)}},1e3),this},h.prototype.removeStructure=function(){var e=this;return setTimeout(function(){try{e.adStructureNode.parentNode.removeChild(e.adStructureNode),delete e.adStructureNode,delete e.banner,delete e.closeTriggerButton,delete e.containerWrapper,e.triggerStructureAppended=!1}catch(t){c.info("Failed to delete DOM nodes pointers for apperance: "+e.Apperance)}},1e3),this},h.prototype.toggleXButton=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.displayCloseButton;return t.isNil(this.closeTriggerButton)?this:(!0===e&&this.closeTriggerButton.classList.contains("cbola-fade-out")?this.closeTriggerButton.classList.remove("cbola-fade-out"):!1!==e||this.closeTriggerButton.classList.contains("cbola-fade-out")||this.closeTriggerButton.classList.add("cbola-fade-out"),this)},h.prototype.triggerElementsStyle=function(){return this},h.prototype.adScale=function(e){var o=e/this.adWidth,n=this.adHeight;return t.isNil(e)||0===e?this:o>=1?(this.hasScaled&&(i.transform(this.banner,"scale(1)"),this.hasScaled=!1,this.adStructureNode&&(this.adStructureNode.style["width"]=this.originalAdWidth+"px",this.adStructureNode.style["height"]=this.originalAdHeight+"px")),this):(t.extend(this.banner.style,{"-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","-o-transform-origin":"0 0","transform-origin":"0 0"}),i.transform(this.banner,"scale("+o+")"),this.hasScaled=!0,this.adHeight=this.originalAdHeight*o,this.adStructureNode&&(this.adStructureNode.style["width"]=this.originalAdWidth*o+"px",this.adStructureNode.style["height"]=this.adHeight+"px"),n-=this.adHeight,c.info("Trigger with apperance: "+this.Apperance+" for element ID: "+this.elemId+" in scale: "+o),this.containerWrapper&&(this.wrapperHeight-=n,this.containerWrapper.style["height"]=this.wrapperHeight+"px"),this)},h.prototype.isOpen=function(){return this.open},h.prototype.isClose=function(){return!this.open},h.prototype.setOpen=function(){return this.open=!0,this},h.prototype.setClose=function(){return this.open=!1,this},h.prototype.isAppended=function(){return this.triggerStructureAppended},h.prototype.init=function(){return l.prototype.init.call(this),this.elementId=this.elemId+"_"+this.Apperance+(t.isNil(this.spot)?"":"_"+this.spot),this.viewableEvent=""+n.Events.TRIGGER_IS_VIEWABLE+this.elementId,this.element=this.adStructureNode,this},h}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAboveMobile=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),this.layer?this.appendTo=this.layer.topAdPlaceHolder:Cbola.Logger.getInstance().errorM("AboveMobile.constructor","AdTriggerAboveMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return e.extend(this.banner.style,{float:"none","background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!1),e.extend(t.adStructureNode.style,{"margin-top":"0","margin-bottom":"2px",height:t.adHeight,opacity:"1"}),t.layer.fixAllItemsHeight()},0),this},t.prototype.bannerTagStyle=function(t){return this.open?(t.setStyle({"background-color":e.result(t,"adObj.AdType",0)===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight+"px",width:this.adWidth+"px"}),this.setClose(),this):this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t.prototype.removeStyle=function(){return this},t.prototype.removeStructure=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAbovePushContent=function(){var e=Cbola._,t=Cbola.Config,i=Cbola.InContent.Layers.Base.prototype,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.appendTo=this.containerWrapper.children[0],this.styleProperties={display:"block!important",width:"100%",opacity:"0","background-color":"transparent",position:"relative",margin:"0 auto -"+this.adHeight+"px","margin-left":"auto","margin-right":"auto","z-index":"-1","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none"}};return o.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(Cbola.Utils.before(this.appendTo,this.adStructureNode),this.triggerStructureAppended=!0),this},o.prototype.triggerElementsStyle=function(){var o=this,n=i.isInContent.call({type:this.layerType})?t.adBelowInContentExtraMargin:i.isSidebarSlideshow.call({type:this.layerType})?t.adBelowSlideShowMargin:t.adBelowSideBarMargin;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+n,e.extend(this.banner.style,{float:"none","background-color":"transparent"}),setTimeout(function(){o.toggleXButton(!1),e.extend(o.adStructureNode.style,{"margin-bottom":n+"px",height:o.adHeight,opacity:"1"}),setTimeout(function(){o.adStructureNode.style["z-index"]=10},600)},0),this},o.prototype.closeAnimation=function(){return this.isClose()||(this.adStructureNode.style["z-index"]="-1",this.adStructureNode.style["margin-bottom"]="-"+this.adHeight+"px",this.setClose()),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowCoverContent=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*(this.initialWrapperHeight-1)+"px",display:"block!important",opacity:"0","-webkit-transition":"margin 0.6s ease,height 0.6s ease",transition:"margin 0.6s ease,height 0.6s ease","z-index":"-1","background-color":"transparent",width:this.adWidth+"px","max-height":this.initialWrapperHeight+"px",position:"relative","margin-left":"auto","margin-right":"auto",height:this.adHeight+"px"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!0),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{"margin-top":t.initialWrapperHeight+"px",opacity:"1"})},0),this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowMobile=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),this.layer?this.appendTo=this.layer.bottomAdPlaceHolder:Cbola.Logger.getInstance().errorM("AdTriggerBelowMobile.constructor","AdTriggerBelowMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return e.extend(this.banner.style,{"background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!1),e.extend(t.adStructureNode.style,{"margin-top":"0","margin-bottom":"auto",height:t.adHeight,opacity:"1"}),t.layer.fixAllItemsHeight()},0),this},t.prototype.bannerTagStyle=function(t){return t.setStyle({"background-color":e.result(t,"adObj.AdType",0)===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight+"px",width:this.adWidth+"px"}),this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t.prototype.removeStyle=function(){return this},t.prototype.removeStructure=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowPushContent=function(){var e=Cbola._,t=Cbola.Config,i=Cbola.InContent.Layers.Base.prototype,o=function(t,i){var o=this;Cbola.Common._AdTriggerBase.call(this,t,i),this.topStartingPoint=20,this.styleProperties={display:"block!important",width:"100%",height:this.adHeight+"px",opacity:"0","background-color":"transparent",position:"absolute",top:this.topStartingPoint+"px",left:"0","z-index":"-1","-webkit-transition":this.animationEnabled?"margin 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease":"none"},window.addEventListener("resize",e.debounce(function(){!e.isNil(o.containerWrapper)&&o.isOpen()&&o.adScale(o.containerWrapper.offsetWidth)},150,{leading:!1,maxWait:500,trailing:!0}))};return o.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),o.constructor=o,o.prototype.triggerElementsStyle=function(){var e=this,o=i.isInContent.call({type:this.layerType})?t.adBelowInContentExtraMargin:i.isSidebarSlideshow.call({type:this.layerType})||i.isStoriesSlideshow.call({type:this.layerType})?t.adBelowSlideShowMargin:t.adBelowSideBarMargin;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+o,this.banner.style["float"]="none",this.banner.style["background-color"]="transparent",this.toggleXButton(i.isInContent.call({type:this.layerType})&&this.displayCloseButton),setTimeout(function(){e.adStructureNode.style["margin-top"]=o+e.initialWrapperHeight-e.topStartingPoint+"px",e.adStructureNode.style["opacity"]="1"},0),setTimeout(function(){e.adStructureNode.style["z-index"]=10},1e3),this},o.prototype.closeAnimation=function(){return this.isClose()||(this.adStructureNode.style["z-index"]="-1",this.adStructureNode.style["margin"]=this.topStartingPoint+"px",this.setClose()),this},o.prototype.injectAd=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return Cbola.Common._AdPlaceHolder.prototype.injectAd.apply(this,t),this.toggleXButton(i.isInContent.call({type:this.layerType})&&this.displayCloseButton),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerCenterInsideUnit=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*this.adHeight+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none","z-index":"6","background-color":"rgba(255, 255, 255, 0.9)",width:"100%"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return this.triggerHeight=this.adHeight,e.extend(this.banner.style,{float:"none","background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!0),e.extend(t.adStructureNode.style,{margin:"auto",height:t.initialWrapperHeight,"margin-top":t.initialWrapperHeight+"px"})},0),this},t.prototype.bannerTagStyle=function(e){return e.setStyle({"background-color":"black",height:this.adHeight+"px",width:this.adWidth+"px"}),this},t.prototype.adScale=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerFixedFooter=function(){var e=Cbola._,t=Cbola.Env,i=function(i,o){Cbola.Common._AdTriggerBase.call(this,i,o),this.appendTo=t.topWindow.document.body,this.adStructureNode.id="cbola-footer-banner",this.styleProperties={position:"fixed",display:"block",top:"auto",left:"0",bottom:-1*this.adHeight+"px","z-index":"2147483647",height:this.adHeight+"px","-webkit-transition":this.animationEnabled?"bottom 0.9s ease":"none",transition:this.animationEnabled?"bottom 0.9s ease":"none"},e.isEmpty(o.footerBackground)?(this.styleProperties["width"]=this.adWidth+"px",this.styleProperties["margin"]="0 auto",this.styleProperties["left"]="0",this.styleProperties["right"]="0"):(this.styleProperties["width"]="100%",this.styleProperties["background-color"]=o.footerBackground)};return i.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),i.constructor=i,i.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(this.appendTo.appendChild(this.adStructureNode),this.triggerStructureAppended=!0),this},i.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!0),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{opacity:"1",height:t.adHeight,bottom:"0"})},0),this},i.prototype.adScale=function(){return this},i.prototype.closeAnimation=function(){return this.adStructureNode.style["bottom"]=-1*this.adHeight+"px",this.setClose(),this},i.prototype.isViewable=function(){return!0},i.prototype.init=function(){return this},i.prototype.updateViewability=function(){return this},i}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),_get=function e(t,i,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)};window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItem=function(){var e=Cbola,t=e._,i=e.Utils,o=e.Common._AdTriggerBase,n=Cbola.InContent.Layers.Base.prototype;return function(e){function o(e,t){_classCallCheck(this,o);var i=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));return i.element=i.adStructureNode=i.adStructureNode=i.banner=i.closeTriggerButton=i.title=i.containerWrapper=null,i.layer=Cbola.InContent.Manager.getLayerByElementId(i.elemId),i.spot=e.currentSpot,i.isCoveringAd=!1,i.hideButtons=!1,i.inItemDuration=0,i}return _inherits(o,e),_createClass(o,[{key:"appendTriggerStructure",value:function(){return this.banner=this.layer.injectAdAfterItem({adSpot:this.spot,isCover:this.isCoveringAd,hideButtons:this.hideButtons,inItemDuration:this.inItemDuration}),this.banner&&(this.triggerStructureAppended=!0,this.element=this.banner.parentElement),this}},{key:"injectAd",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"injectAd",this)).call.apply(e,[this].concat(n)),i.dataset(this.banner,"adWidth",this.adWidth),i.dataset(this.banner,"adHeight",this.adHeight),this.banner.style["width"]=this.adWidth+"px",this.banner.style["height"]=this.adHeight+"px",this}},{key:"triggerElementsStyle",value:function(){return this}},{key:"bannerTagStyle",value:function(){return this}},{key:"adScale",value:function(e){return t.isFunction(this.layer.scaleInItemAd)?this.layer.scaleInItemAd(this.spot):n.isPlaybox.call({type:this.layerType})||_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"adScale",this).call(this,e),this}},{key:"closeAnimation",value:function(){return this}},{key:"removeStyle",value:function(){return this}},{key:"removeStructure",value:function(){return t.isFunction(this.layer.removeInItemAd)&&this.layer.removeInItemAd(this.spot),this}}]),o}(o)}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdTriggerInItemCover=function(){var e=Cbola._,t=Cbola.Common.AdTriggerInItem,i=function(i,o){t.call(this,i,o),this.isCoveringAd=!0,this.inItemDuration=e.get(i,"SpotsInterval",10)};return i.prototype=Object.create(t.prototype),i.constructor=i,i}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItemMobile=function(){var e=Cbola.TaskManager,t=Cbola._,i=function(e,t){Cbola.Common.AdTriggerInItem.call(this,e,t)};return i.prototype=Object.create(Cbola.Common.AdTriggerInItem.prototype),i.constructor=i,i.prototype.injectAd=function(){for(var i=arguments.length,o=Array(i),n=0;n<i;n++)o[n]=arguments[n];return Cbola.Common.AdTriggerInItem.prototype.injectAd.apply(this,o),t.isFunction(this.layer.fixAllAdItemsStyle)&&e.addExpBackoffTask({fn:this.layer.fixAllAdItemsStyle.bind(this.layer)}),this},i.prototype.adScale=function(){return this},i}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdTriggerInItemNoButtons=function(){var e=Cbola._,t=Cbola.Common.AdTriggerInItem,i=function(i,o){t.call(this,i,o),this.hideButtons=!0,this.inItemDuration=e.get(i,"SpotsInterval")||30};return i.prototype=Object.create(t.prototype),i.constructor=i,i}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdTriggerInItemWithDuration=function(){var e=Cbola,t=e._,i=Cbola.Common.AdTriggerInItem;return function(e){function i(e,o){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,o));return n.inItemDuration=t.get(e,"SpotsInterval")||10,n}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInnerBanner=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layerType=t.layerType;var i=Cbola.InContent.Manager.getLayerByElementId(this.elemId);this.appendTo=i.boxElem.querySelector(".cbola-slider-ad-placeholder"),Cbola.Config.layouts.sideBars.teaserBanner.indexOf(this.layerType)>-1?this.styleProperties={"box-sizing":"border-box","border-right":"1px solid rgba(171, 171, 171, 0.25)","border-left":"1px solid rgba(171, 171, 171, 0.25)",height:"250px",top:"0px",opacity:"0","margin-left":"-1px",width:"300px"}:this.styleProperties={width:"300px",opacity:"0","box-sizing":"content-box","padding-top":"0px","padding-left":"0px"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!1),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{opacity:"1",height:t.adHeight})},0),this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftInsideUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=Cbola.InContent.Layers.Base.prototype,o=function(t,o){e.call(this,t,o),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),i.isPlaybox.call({type:this.layerType})&&(this.appendTo=this.layer.boxElem,this.inSlideShow=!0),this.styleProperties={top:"0",left:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return o.prototype=Object.create(e.prototype),o.constructor=o,o.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.inSlideShow?setTimeout(function(){return e.toggleXButton(!0)},2500):e.toggleXButton(!1),e.adStructureNode.style["margin"]="auto",e.adStructureNode.style["margin-left"]=e.adWidth+"px",e.adStructureNode.style["height"]=e.initialWrapperHeight+"px"},0),t.fire(""+t.Events.COVERING_TRIGGER_ON+this.elemId),this},o.prototype.closeAnimation=function(i){return e.prototype.closeAnimation.call(this),t.fire(""+t.Events.COVERING_TRIGGER_OFF+this.elemId,{byClick:i}),this},o.prototype.adScale=function(){return this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftOfUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=Cbola._,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",left:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",right:"auto",display:"block!important","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return o.prototype=Object.create(e.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return e.prototype.appendTriggerStructure.call(this),t.fire(t.Events.RESIZE_ON_AD+this.elemId),this},o.prototype.triggerElementsStyle=function(){var e=this;return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginLeft=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){e.toggleXButton(),e.banner.style.backgroundColor="transparent",i.extend(e.adStructureNode.style,{margin:"auto",height:e.adHeight})},0),this},o.prototype.adScale=function(){return this},o.prototype.removeStructure=function(){return e.prototype.removeStructure.call(this),t.fire(t.Events.RESIZE_ON_AD+this.elemId),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftPopOnUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=Cbola.InContent.Layers.Base.prototype,o=function(t,o){e.call(this,t,o),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),i.isPlaybox.call({type:this.layerType})&&(this.appendTo=this.layer.view.itemsBoxElem,this.inSlideShow=!0),this.styleProperties={top:"0",left:"0",display:"none","z-index":"6","background-color":this.inSlideShow?"#fff":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return o.prototype=Object.create(e.prototype),o.constructor=o,o.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.toggleXButton(!0)},2500),this.adStructureNode.style["display"]="block",t.fire(t.Events.COVERING_TRIGGER_ON+this.elemId),this},o.prototype.closeAnimation=function(){return this.isClose()?this:(this.adStructureNode.style["display"]="none",this.setClose(),this)},o.prototype.removeStructure=function(){return e.prototype.removeStructure.call(this),this.inSlideShow&&t.fire(t.Events.COVERING_TRIGGER_OFF+this.elemId),this},o.prototype.adScale=function(){return this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerRightInsideUnit=function(){var e=function(e,t){Cbola.Common.AdTriggerLeftInsideUnit.call(this,e,t),this.styleProperties={top:"0",right:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return e.prototype=Object.create(Cbola.Common.AdTriggerLeftInsideUnit.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.inSlideShow?setTimeout(function(){e.toggleXButton(!0)},2500):e.toggleXButton(!1),e.banner.style["background-color"]="transparent",e.adStructureNode.style["transform"]="translateX(-"+e.adWidth+"px)",e.adStructureNode.style["height"]=e.initialWrapperHeight+"px"},0),this},e.prototype.closeAnimation=function(){return this.isClose()?this:(this.adStructureNode.style["transform"]="translateX(0)",this.setClose(),this)},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerRightOfUnit=function(){var e=Cbola._,t=Cbola.Common._AdTriggerBase,i=Cbola.EventBus,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",right:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",display:"block",left:"inherit","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return o.prototype=Object.create(t.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return t.prototype.appendTriggerStructure.call(this),i.fire(i.Events.RESIZE_ON_AD+this.elemId),this},o.prototype.triggerElementsStyle=function(){var t=this;return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginRight=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){t.toggleXButton(),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{margin:"auto",height:t.adHeight+"px"})},0),this},o.prototype.adScale=function(){return this},o.prototype.removeStructure=function(){return t.prototype.removeStructure.call(this),i.fire(i.Events.RESIZE_ON_AD+this.elemId),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggersManager=function(){var t=Cbola,i=t._,o=t.Config,n=t.Env,r=t.EventBus,a=t.TaskManager,s=t.Utils,l=t.Common,d=l.AnalyticsService,c=l.UserService,h=l.ConsentProviders.Manager,m=t.Enums,p=m.AbTests,u=m.AdCloseBehaviors,b=m.AdOpenBehaviors,f=m.AdTriggerTypes,y=m.HeaderBiddingRequestStatus,g=m.RefreshTypes,w=m.SetClickTypes,v=r.Events,C=Cbola.Logger.getInstance(),_=Cbola.Logger.Colors.PALE_YELLOW,I=function(e,t){return e.Apperance+(e instanceof Cbola.Common.AdTriggerInItem?"_"+e.spot:"")+(t?"."+t:"")},x="AdTriggersManager",E={1:{TriggerConstructor:Cbola.Common.AdTriggerLeftInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[2,5,12]},2:{TriggerConstructor:Cbola.Common.AdTriggerCenterInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[1,3,5,12]},3:{TriggerConstructor:Cbola.Common.AdTriggerBelowCoverContent,requiredContainerOverflow:"visible",collidesWith:[2]},4:{TriggerConstructor:Cbola.Common.AdTriggerBelowPushContent,collidesWith:[9]},5:{TriggerConstructor:Cbola.Common.AdTriggerRightInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[1,2,12]},6:{TriggerConstructor:Cbola.Common.AdTriggerRightOfUnit,requiredContainerOverflow:"visible",collidesWith:[7]},7:{TriggerConstructor:Cbola.Common.AdTriggerLeftOfUnit,requiredContainerOverflow:"visible",collidesWith:[6]},8:{TriggerConstructor:Cbola.Common.AdTriggerInnerBanner},9:{TriggerConstructor:Cbola.Common.AdTriggerAbovePushContent,requiredContainerOverflow:"hidden",collidesWith:[4]},12:{TriggerConstructor:Cbola.Common.AdTriggerLeftPopOnUnit,requiredContainerOverflow:"hidden",collidesWith:[1,2,5]},20:{TriggerConstructor:Cbola.Common.AdTriggerInItem},21:{TriggerConstructor:Cbola.Common.AdTriggerInItemCover,requiredContainerOverflow:"hidden"},22:{TriggerConstructor:Cbola.Common.AdTriggerInItemNoButtons},23:{TriggerConstructor:Cbola.Common.AdTriggerInItemWithDuration},200:{TriggerConstructor:Cbola.Common.AdTriggerInItemMobile},204:{TriggerConstructor:Cbola.Common.AdTriggerBelowMobile},209:{TriggerConstructor:Cbola.Common.AdTriggerAboveMobile},300:{TriggerConstructor:Cbola.Common.AdTriggerFixedFooter}},S={OPEN:"open",CLOSE:"close",REFRESH_CLICK:"refresh_on_click",REFRESH_VIEWABILITY:"refresh_on_viewability",REMOVE:"remove"},T=function(e){var t=this;this.layerType=e.layerType,this.wid=e.widgetId,this.elemId=e.elementId,this.FREEZE=!1,this.delayFromLastScroll=0,this.isReady=!1,this.resolvers=[],this.pendingTriggers=[],this.activeTriggers=[],this.finishedTriggers=[],this.footerBackground=e.footerBackground,this.handlers={};var a=""+v.ADS_STORES_MANAGER_READY+this.wid,s={adsStoreReadyEventFired:!1,layerReadyEventFired:!1,pageLoaded:o.abTestId!==p.ADS_ON_PAGE_LOAD||n.topWindow!==window.top||"complete"===n.topWindow.document.readyState},l=function(){i.some(s,function(e){return!e})||t.start()},d=function(e){e.type===t.layerType&&e.elementId===t.elemId&&(r.removeEventListener("LayerReadyEvent",t,!1),s.layerReadyEventFired=!0,t.layer=e,l())},c=function(e){r.removeEventListener(a,t,!1),s.adsStoreReadyEventFired=!0,t.adsStore=e,t.adsData=e.getAdsData(),l()},h=function(){n.topWindow.removeEventListener("load",t,!1),s.pageLoaded=!0,l()};this.handleEvent=function(e){switch(e.type){case a:c(e.detail);break;case v.LAYER_READY:d(e.detail);break;case"load":h()}},r.addEventListener(a,this,!1),r.addEventListener(v.LAYER_READY,this,!1),s.pageLoaded||n.topWindow.addEventListener("load",this,!1)};return T.prototype.start=function(){var e=this;this.containerBox=this.layer.boxElem,this.containerWrapper=this.layer.container,this.initialWrapperHeight=this.layer.options.layerHeight||this.containerBox.getBoundingClientRect().height,this.initialWrapperMarginLeft=this.containerWrapper.style["margin-left"],this.initialWrapperMarginRight=this.containerWrapper.style["margin-right"],this.initTriggers().initConditionedRefreshData(),i.isEmpty(this.pendingTriggers)||112842!==n.domainId?i.isEmpty(this.pendingTriggers)?C.errorM(x+".start",x+" failed to start, no triggers initialized."):(h.hasConsent().then(s.noOp).catch(this.endAdsProcess.bind(this)),this.startPendingTriggers(!0)):c.isEUUserAsync().then(function(e){return e?h.hasConsent():Promise.resolve()}).then(function(){e.startPendingTriggers(!0)}).catch(this.endAdsProcess.bind(this))},T.prototype.initTriggers=function(){var e=this,t=i.get(this.adsData,"TriggerSettings",[]);return i.forEach(t,function(t){var o=i.extend({},t);!i.isEmpty(o.OpenBehaviors)&&e.translateApperance(o)&&(300!==o.Apperance||n.topWindow===window.top&&!n.topWindow.document.querySelector("#cbola-footer-banner"))&&(200===o.Apperance||20===o.Apperance||21===o.Apperance||22===o.Apperance||23===o.Apperance?i.isEmpty(o.Spots)||(o.Spots.sort(function(e,t){return e-t}).filter(function(e,t,i){return t===i.indexOf(e)}),o.OpenBehaviors.splice(1,o.OpenBehaviors.length-1),i.forEach(o.Spots,function(t){var n={currentSpot:t};i.extend(n,o),n.OpenBehaviors=o.OpenBehaviors.slice(0),n.CloseBehaviors=[],e.pushToPendingTriggers(n)})):e.pushToPendingTriggers(o))}),this},T.prototype.translateApperance=function(e){var t=this,n=i.get(o.triggersDictionary,""+e.Apperance);return n&&n.supportedLayers&&n.supportedLayers.some(function(e){return e===t.layerType})?(e.Apperance=i.get(n,"translatedTo",e.Apperance),!0):(C.info(_,x+".translateApperance could not translate appropriate trigger apperance #"+e.Apperance+" for element Id: "+this.elemId),!1)},T.prototype.pushToPendingTriggers=function(e){if(void 0!==E[e.Apperance]){var t=E[e.Apperance].TriggerConstructor;if(!t)return this;var i=new t(e,{elementId:this.elemId,containerWrapperNode:this.containerWrapper,initialWrapperHeight:this.initialWrapperHeight,layerType:this.layerType,footerBackground:this.footerBackground,animationEnabled:this.layer.options.ShowAdAnimation,showAdvertisementTitle:this.layer.options.ShowAdvertisementTitleOnAds}).init();i.refreshFixedTime=this.getRefreshFixedTime(),i.triggerOverflow=E[e.Apperance].requiredContainerOverflow,this.pendingTriggers.push(i)}return this},T.prototype.initConditionedRefreshData=function(){var e=this.getDelayLastScroll();return(s.isWindowTopSupported()||!s.isInIframe()&&e>0)&&(this.prevWindowScroll=n.topWindow.scrollY||n.topWindow.pageYOffset,this.testConditionedRefreshData(Date.now()-e)),this},T.prototype.testConditionedRefreshData=function(e){var t=this,i=this.getDelayLastScroll(),o=n.topWindow.scrollY||n.topWindow.pageYOffset;return Math.abs(o-this.prevWindowScroll)>50?(this.delayFromLastScroll=i,this.prevWindowScroll=o,requestAnimationFrame(function(){return t.testConditionedRefreshData(Date.now())})):(this.delayFromLastScroll=i-(Date.now()-e),requestAnimationFrame(function(){return t.testConditionedRefreshData(e)})),this},T.prototype.startPendingTriggers=function(){var e=this;if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var t=""+v.ADS_STORES_MANGER_ADDED_SIZES+this.wid,o=function(){r.removeEventListener(t,o),this.startPendingTriggers(!1)}.bind(this);r.addEventListener(t,o)}var n=this.pendingTriggers.slice(0);return n.sort(function(e,t){return e.Apperance!==t.Apperance?e.Apperance-t.Apperance:i.isNil(e.spot)||i.isNil(t.spot)?0:e.spot-t.spot}),i.forEach(n,function(t){e.beforeActivationValidation(t)&&e.pullTriggerFromArray(e.pendingTriggers,t,"Apperance").pushTriggerOnce(e.activeTriggers,t,"Apperance").initTriggerOpening(t)}),this.isReady||this.testReadiness(),this},T.prototype.testReadiness=function(){for(var e=0;e<this.activeTriggers.length;e++)if(void 0===this.activeTriggers[e].currentOpenBehavior||!this.activeTriggers[e].isAppended()&&this.activeTriggers[e].currentOpenBehavior.Type===b.TIMER&&0===this.activeTriggers[e].currentOpenBehavior.Delay)return void a.addTask(this.testReadiness,[],this,"AdTriggersManager.testReadiness");this.isReady=!0,i.forEach(this.resolvers,function(e){i.isFunction(e)&&e()})},T.prototype.beforeActivationValidation=function(e){return!this.isActive(e,"Apperance")&&!this.isOverflowCollision(e.Apperance)&&!this.isApperanceCollision(e.Apperance)&&this.adsStore.hasAvailableAdsForSize(e.getPlaceholderSizeName())},T.prototype.initTriggerOpening=function(e){var t=e.openBehaviors.shift();if(i.isNil(t))return C.info(_,x+".initTriggerOpening haven't found openBehavior - closing apperance: "+e.Apperance),this.removeTrigger(e);if(e.isOpen())return this;if(e.setOpen(),e.currentOpenBehavior=t,t.Type===b.TIMER||t.Type===b.VIEWABLE&&this.layer.isViewable()||t.Type===b.PAGE_LOAD&&s.isPageReady())return C.info(x+".initTriggerOpening sent apperance: "+e.Apperance+" to open by timer"),this.openTriggerByTimer(e);var o=void 0,a=void 0;switch(t.Type){case b.VIEWABLE:o=[r],a=this.layer.viewableEvent;break;case b.HOVER_ON_UNIT:o=[this.containerBox],a="hover";break;case b.ENGAGEMENT:o=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),a="click";break;case b.PAGE_LOAD:o=[n.topWindow],a="load";break;default:return this.removeTrigger(e)}return o?(C.info(_,x+".initTriggerOpening attached event: "+a+" for Apperance: "+e.Apperance),this.setOpenTriggerEventHandler(o,a,e)):(C.errorM(x+".initTriggerOpening",x+".initTriggerOpening failed to find element to attach event "+a+" for apperance: "+e.Apperance),this)},T.prototype.setOpenTriggerEventHandler=function(e,t,o){var n=this,a=i.map(e,function(e){var i={attachedOn:e,fn:function(){this.onEventOpenTrigger(o)}.bind(n),eventName:t};return e.addEventListener(t,i.fn),i});if("load"===t){var l=i.get(o.currentOpenBehavior,"Duration",0);if(l>0){var d=""+v.PAGE_LOAD_FALLBACK+I(o),c=function(){this.onEventOpenTrigger(o)}.bind(this);a.push({attachedOn:r,eventName:d,fn:c}),r.addEventListener(d,c),setTimeout(function(){return r.fire(d)},1e3*l)}}var h=i.get(this.handlers,I(o,S.OPEN),[]);return i.isEmpty(h)?i.set(this.handlers,I(o,S.OPEN),a):s.push.apply(h,a),this},T.prototype.onEventOpenTrigger=function(e){return this.unbindTriggersEventHandlers(e,S.OPEN),this.openTriggerByTimer(e),this},T.prototype.openTriggerByTimer=function(e){var t=this,i=e.currentOpenBehavior.Delay;return C.info(_,x+".openTriggerByTimer open apperance "+e.Apperance+" in "+i+" seconds"),setTimeout(function(){return t.openTrigger(e,i>0)},1e3*i),this},T.prototype.openTrigger=function(e,t){var i=this;if(e.isAppended()||this.isFinished(e))e.isAppended()&&this.openAppendedTrigger(e);else{if(this.delayFromLastScroll>200&&t)return C.info(_,"Postponing trigger appearance "+e.Apperance+" opening by "+this.delayFromLastScroll+"mil-seconds due to scrolling"),setTimeout(function(){return i.openTrigger(e,t)},this.delayFromLastScroll),this;this.appendTrigger(e)}return this},T.prototype.appendTrigger=function(e){var t=this;return this.adsStore.getAd(e).then(function(i){e.appendTriggerStructure(),e.isAppended()?(e.appendTriggerStyle().injectAd(i).resetMalwareRefresh(),t.attachClickEventHandlers(e).setNextRefreshTime(e),(e instanceof Cbola.Common.AdTriggerBelowPushContent||e instanceof Cbola.Common.AdTriggerAbovePushContent)&&t.layer.iframeBuster.checkIframeDimension(e.adHeight+o.adTitleStructureTriviaHeight),e.closeTriggerButton&&e.closeTriggerButton.addEventListener("click",function(){d.setClick(t.elemId,e instanceof Cbola.Common.AdTriggerFixedFooter?w.FOOTER_AD_BUTTON_CLOSE:w.AD_BUTTON_CLOSE),t.removeTrigger(e)}),t.isViewabilityRefreshEnabled()&&e.updateViewability(),t.openAppendedTrigger(e)):(C.warnM(x+".appendTrigger",x+".appendTrigger failed to append trigger: "+e.Apperance+" in element ID: "+t.elemId+" - removing apperance"),t.removeTrigger(e))}).catch(function(){C.warnM(x+".appendTrigger",x+".appendTrigger failed to load first ad for apperance: "+e.Apperance+" in element ID: "+t.elemId+" - removing apperance"),t.removeTrigger(e)}),this},T.prototype.attachClickEventHandlers=function(e){var t=this.layer.container.querySelectorAll(".cbola-refresh-click-trigger");if(i.isEmpty(t)||e instanceof Cbola.Common.AdTriggerInItem)return this;var o=function(o){return i.map(t,function(t){var i={attachedOn:t,eventName:"click",fn:function(){o(e)}};return t.addEventListener("click",i.fn),i})},n="",r=[];if(e instanceof Cbola.Common.AdTriggerLeftInsideUnit?(n=S.REMOVE,r=o(this.removeTrigger.bind(this))):this.isClickRefreshEnabled()&&(n=S.REFRESH_CLICK,r=o(this.refreshTriggerOnClick.bind(this))),n.length>0&&r.length>0){var a=i.get(this.handlers,I(e,n),[]);i.isEmpty(a)?i.set(this.handlers,I(e,n),r):s.push.apply(a,r)}else C.info(_,"No refreshes allowed on click for element Id:"+this.elemId);return this},T.prototype.openAppendedTrigger=function(e){e.triggerElementsStyle(),i.isNil(this.layer.boxElem)||e.adScale(this.layer.boxElem.getBoundingClientRect().width),this.setWrapperHeight().setContainerOverflow().setWrapperMargin().closeTrigger(e)},T.prototype.refreshTriggerAd=function(t){var i=this,o="refreshTriggerAd";return t.isRefreshable()?this.adsStore.getAd(t).then(function(e){t.injectAd(e).resetMalwareRefresh(),C.info(Cbola.Logger.Colors.PALE_GREEN,x+"."+o+" injected ad for apperance: "+t.Apperance)}).catch(function(n){n instanceof Error?C.warnM(x+"."+o,x+"."+o+" failed injecting ad for trigger apperance: "+t.Apperance+", element ID: "+i.elemId+". Error: ",e):!0===n&&(t.stopRefresh(),C.info(_,x+"."+o+" No ads left, stopping refreshes for trigger apperance: "+t.Apperance+", element ID: "+i.elemId))}):C.info(_,x+"."+o+" stopped refreshing apperance: "+t.Apperance+", element Id: "+this.elemId),this},T.prototype.setNextRefreshTime=function(e){var t=this,i="setNextRefreshTime",o=void 0;if(!e.isRefreshable())return C.info(_,x+"."+i+" stopped due to all refreshes stop for trigger Apperance: "+e.Apperance),this;if(this.isViewabilityRefreshEnabled()&&!e.isViewable())return C.info(_,x+"."+i+" adding event listener pending viewability to trigger refreshing for Apperance: "+e.Apperance),this.setRefreshOnViewability(e),this;if(!this.isTimeoutRefreshEnabled()&&!this.isViewabilityRefreshEnabled())return C.info(_,"Refresh by timeout is not allowed for elementId: "+this.elemId),this;if(e.refreshFixedTime.length>0){var n=e.refreshFixedTime.shift();if(e.refreshFixedTime.forEach(function(e,t,i){i[t]=e-n}),(o=1e3*n)&&o>0)return C.info(_,"Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" would try to refresh by timeout in : "+o+"mili-sec."),e.refreshTimeoutId=setTimeout(function(){return t.refreshOnTimeout(e)},o),this}else if((o=e.refreshInterval||this.getRefreshInterval())&&o>0)return C.info("Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" would try to refresh by timeout in: "+o+"mili-sec."),e.refreshTimeoutId=e.intervalRefreshTimeoutId=setTimeout(function(){return t.refreshOnTimeout(e)},o),this;return C.warnM(x+"."+i,x+"."+i+" stopped refreshing due to inability to set nextRefreshInterval for apperance "+e.Apperance+" in element Id: "+this.elemId),e.stopRefresh(),this},T.prototype.setRefreshOnViewability=function(e){var t={attachedOn:r,eventName:e.viewableEvent,fn:function(){C.info(_,x+".setRefreshOnViewability removed event listener pending viewability to trigger refreshing for Apperance: "+e.Apperance),this.unbindTriggersEventHandlers(e,S.REFRESH_VIEWABILITY),this.setNextRefreshTime(e)}.bind(this)};r.addEventListener(t.eventName,t.fn);var o=i.get(this.handlers,I(e,S.REFRESH_VIEWABILITY),[]);return i.isEmpty(o)?i.set(this.handlers,I(e,S.REFRESH_VIEWABILITY),[t]):o.push(t),this},T.prototype.refreshOnTimeout=function(e){var t=this;return e.setAdInjectionType(f.TIMEOUT),this.delayFromLastScroll>200?(C.info(_,"Delaying trigger apperance "+e.Apperance+" refresh by "+this.delayFromLastScroll+" mil-seconds due to scrolling"),setTimeout(function(){t.refreshOnTimeout(e)},this.delayFromLastScroll)):this.refreshTriggerAd(e).setNextRefreshTime(e),this},T.prototype.refreshTriggerOnClick=function(e){return e.isRefreshable()&&!this.isFinished(e)?(C.info(_,"Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" would try to refresh by click"),e.setAdInjectionType(f.CLICK),this.refreshTriggerAd(e),e.intervalRefreshTimeoutId&&(C.info(_,x+".refreshOnClick cleared timeout for apperance "+e.Apperance),clearTimeout(e.intervalRefreshTimeoutId),this.setNextRefreshTime(e))):(C.info(_,"Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" stops refresh by click"),this.unbindTriggersEventHandlers(e,S.REFRESH_CLICK)),this},T.prototype.closeTrigger=function(e){var t=e.closeBehaviors.shift();if(i.isNil(t))return C.info(_,"No closing behavior found for apperance: "+e.Apperance),this;if(e.isClose())return C.info(_,x+".closeTrigger trying to close already closed apperance: "+e.Apperance+" in element ID: "+this.elemId),this;if(e.currentCloseBehavior=t,t.Type===u.TIMER||t.Type===u.VIEWABLE&&this.layer.isViewable())return C.info(x+".closeTrigger sent apperance: "+e.Apperance+" to close by timer"),this.closeTriggerByTimer(e);var o=void 0,n=void 0;switch(t.Type){case u.VIEWABLE:o=[r],n=this.layer.viewableEvent;break;case u.HOVER_ON_UNIT:o=[this.containerBox],n="hover";break;case u.ENGAGEMENT:o=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),n="click";break;default:return this.removeTrigger(e)}return C.info(x+".closeTrigger attached event: "+n+" for Apperance: "+e.Apperance),this.setCloseTriggerEventHandler(o,n,e)},T.prototype.setCloseTriggerEventHandler=function(e,t,o){var n=this,r=i.map(e,function(e){var i={attachedOn:e,fn:function(){this.onEventCloseTrigger(o)}.bind(n),eventName:t};return e.addEventListener(t,i.fn),i}),a=i.get(this.handlers,I(o,S.CLOSE),[]);return i.isEmpty(a)?i.set(this.handlers,I(o,S.CLOSE),r):s.push.apply(a,r),this},T.prototype.onEventCloseTrigger=function(e){return this.unbindTriggersEventHandlers(e,S.CLOSE),this.closeTriggerByTimer(e),this},T.prototype.closeTriggerByTimer=function(e){var t=this,i=e.currentCloseBehavior.Duration;return this.FREEZE?this:(setTimeout(function(){t.FREEZE||t.isFinished(e)||(e.closeAnimation().setClose(),t.initTriggerOpening(e))},1e3*i),this)},T.prototype.removeTrigger=function(e){var t=this,i=void 0;return this.isFinished(e)?this:(this.pullTriggerFromArray(this.pendingTriggers,e).pullTriggerFromArray(this.activeTriggers,e).pushTriggerOnce(this.finishedTriggers,e).unbindTriggersEventHandlers(e),e.closeAnimation().setClose(),i=e instanceof Cbola.Common.AdTriggerLeftInsideUnit?5e3:0,C.info(_,x+".removeTrigger, removing trigger with apperance: "+e.Apperance+", in "+i+"mil-seconds"),setTimeout(function(){e.removeStyle().removeStructure(),clearTimeout(e.refreshTimeoutId),t.setWrapperHeight().setContainerOverflow().setWrapperMargin().startPendingTriggers(!1)},i),this)},T.prototype.setWrapperHeight=function(){var e=this.initialWrapperHeight,t=this.containerWrapper.style;return i.forEach(this.activeTriggers,function(t){e=e<t.wrapperHeight?t.wrapperHeight:e}),this.containerWrapper.offsetHeight!==e&&e>0&&!this.layer.isMobile()&&(t["height"]=e+"px"),this},T.prototype.setContainerOverflow=function(){for(var e="hidden",t=0;t<this.activeTriggers.length;t++){var i=this.activeTriggers[t];if(i.triggerOverflow){e=i.triggerOverflow;break}}return this.containerWrapper.style["overflow"]=e,this},T.prototype.setWrapperMargin=function(){for(var e=void 0,t=void 0,o=void 0,r=0;r<this.activeTriggers.length;r++){var a=this.activeTriggers[r];void 0!==a.wrapperMarginLeft&&"auto"!==a.wrapperMarginLeft&&(e=a.wrapperMarginLeft,t="left",o="right"),void 0!==a.wrapperMarginRight&&"auto"!==a.wrapperMarginRight&&(e=a.wrapperMarginRight,t="right",o="left")}return i.isNil(t)?(this.containerWrapper.style["margin-left"]=this.initialWrapperMarginLeft,this.containerWrapper.style["margin-right"]=this.initialWrapperMarginRight):(this.containerWrapper.style["margin-"+t]=e,"frbs61"===n.activePid&&(this.containerWrapper.style["margin-"+o]=0)),this},T.prototype.isActive=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Apperance",o=function(i){return i[t]===e[t]};return"Apperance"===t&&e instanceof Cbola.Common.AdTriggerInItem&&(o=function(t){return t.Apperance===e.Apperance&&t.spot===e.spot}),!i.isNil(i.find(this.activeTriggers,o))},T.prototype.isOverflowCollision=function(e){var t=E[e].overflow;if(void 0===t)return!1;for(var i=0;i<this.activeTriggers.length;i++){var o=this.activeTriggers[i].Apperance;if(E[o].overflow!==t)return!0}return!1},T.prototype.isApperanceCollision=function(e){var t=E[e].collidesWith;if(void 0===t)return!1;for(var i=0;i<this.activeTriggers.length;i++){var o=this.activeTriggers[i].Apperance;if(t.indexOf(o)>-1)return!0}return!1},T.prototype.isFinished=function(e){return!i.isNil(i.find(this.finishedTriggers,function(t){return t.id===e.id}))},T.prototype.pullTriggerFromArray=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return i.remove(e,function(e){return e[o]===t[o]}),this},T.prototype.pushTriggerOnce=function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",o=0;o<e.length;o++){var n=e[o];if(n[i]===t[i]){if("Apperance"===i&&t instanceof Cbola.Common.AdTriggerInItem&&t.spot!==n.spot)continue;return this}}return e.push(t),this},T.prototype.getActiveTrigger=function(e,t){return e=parseInt(e),t=parseInt(t),i.find(this.activeTriggers,function(o){return o.Apperance===e&&(i.isNil(o.spot)&&isNaN(t)||o.spot===t)})},T.prototype.noFillFallback=function(e,t,i){var o=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,a=this.getActiveTrigger(e,t);if(void 0===a)return!1;var s=a.getAdObjByBannerId(i),l=0;if(s&&(l=s.getID()),a instanceof Cbola.Common.AdTriggerInItemNoButtons&&setTimeout(function(){return r.fire(""+v.SKIP_SPOT+o.elemId+"_"+t)},5e3),s instanceof Cbola.Common.Ads.Tags.Waterfall&&a.getInjectionType()!==f.INJECT_PSA&&(this.adsStore.updateWaterfallPSACounter(a),this.adsStore.isWaterfallMaxPlacementPSA(a)?this.adsStore.removeWaterfallAdsForSize(a):(s.incrementPSACount(),s.isMaxedPSA()&&this.adsStore.removeWaterfallAd(s))),a.isRefreshable()){var c=null;if(4===n&&this.adsStore.isLowTierSupported(a)&&(d.setHbBidRequestProto([{TagId:this.adsStore.getRandomHbTagId(a),Status:y.REQUEST_LOW_TIER_MADE}]),c=this.adsStore.getLowTierFallbackAd(a)),c||(c=this.adsStore.getCPIFallbackAd(a)),c)return a.setAdInjectionType(f.WF_FALLBACK).injectAdToExistingBanner(c,i),d.setLastMile({tag_id:l}),!0}return!!a.preventBannerReplacement(i)&&(d.setLastMile({tag_id:l}),!0)},T.prototype.malwareRefresh=function(e,t,o,n){var r=this,a=this.getActiveTrigger(e,t);i.isNil(a)||(a.getMalwareRefreshCount()<this.getMaxMalwareBlockRefresh()?(a.setAdInjectionType(n),this.adsStore.getAd(a).then(function(e){a.injectAdToExistingBanner(e,o).incrementMalwareRefresh()}).catch(function(e){r.injectPSA(a,o,e)})):this.injectPSA(a,o))},T.prototype.injectPSA=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="injectPSA";e.setAdInjectionType(f.INJECT_PSA).injectAdToExistingBanner(this.adsStore.getPSA(e),t).resetMalwareRefresh(),i instanceof Error?C.warnM(x+"."+o,x+"."+o+" failed injecting ad for trigger apperance: "+e.Apperance+", element ID: "+this.elemId+". Error: ",i):!0===i&&e.stopRefresh()},T.prototype.freezeAdsState=function(){return this.FREEZE=!0,i.forEach(this.activeTriggers,function(e){return e.stopRefresh()}),C.warn("AdTriggersManager froze ads process"),this},T.prototype.endAdsProcess=function(){var e=void 0;for(this.FREEZE||this.freezeAdsState();this.pendingTriggers.length>0;)e=this.pendingTriggers[0],this.pullTriggerFromArray(this.pendingTriggers,e);for(this.unbindTriggersEventHandlers();this.activeTriggers.length>0;)e=this.activeTriggers[0],this.removeTrigger(e);return C.info(_,x+" ended"),this},T.prototype.unbindTriggersEventHandlers=function(){for(var e=this,t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];var r=o.length>0&&i.isString(o[o.length-1])?o.pop():null,a=function(e){i.isEmpty(e)||i.forEach(e,function(e){e.attachedOn.removeEventListener(e.eventName,e.fn)})},s=function(e){i.forEach(S,function(t){a(e[t])})};return i.isEmpty(o)?(i.forEach(this.handlers,s),delete this.handlers):i.forEach(o,function(t){var o=I(t,r),n=i.get(e.handlers,o);i.isEmpty(n)||(r?(a(n[r]),delete n[r]):(s(n),i.unset(e.handlers,o)))}),this},T.prototype.managerReady=function(){var e=this;return this.isReady?Promise.resolve():new Promise(function(t){return e.resolvers.push(t)})},T.prototype.getRefreshInterval=function(){return i.get(this.adsData,"RefreshInterval")},T.prototype.getRefreshFixedTime=function(){var e=i.get(this.adsData,"RefreshFixedTime",null);return i.isArray(e)?e.slice(0):[]},T.prototype.getDelayLastScroll=function(){return 1e3*(i.get(this.adsData,"DelayLastScroll",null)||0)},T.prototype.getMaxMalwareBlockRefresh=function(){return 1},T.prototype.isClickRefreshEnabled=function(){var e=i.isNil(this.adsData.RefreshType)?g.BOTH:this.adsData.RefreshType;return e===g.BOTH||e===g.CLICK},T.prototype.isViewabilityRefreshEnabled=function(){return i.get(this.adsData,"RefreshType")===g.VIEWABILITY},T.prototype.isTimeoutRefreshEnabled=function(){var e=i.isNil(this.adsData.RefreshType)?g.BOTH:this.adsData.RefreshType;return e===g.BOTH||e===g.TIMEOUT},T}(),window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Factory=Cbola.PageAnalytics.Factory||function(){var e=Cbola.PageAnalytics.Reporters,t=function(){};return t.prototype.create=function(t){var i=Cbola.PageAnalytics.Reporters.TYPES_TO_NAMES_MAP,o=i.hasOwnProperty(t)&&i[t];return void 0!==o&&o?e[o]:{}},new t}(),Cbola.PageAnalytics.Reporters.TYPES_TO_NAMES_MAP={scroll:"ScrollReporter",data:"Data",pageLoad:"PageLoadReporter"},window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.ReportersManager=Cbola.PageAnalytics.ReportersManager||function(){function e(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function t(){return{ClientVersion:Cbola.Env.clientVersion,PageViewId:r.PageProperties.cbola_pageViewId,PageId:r.PageId,WidgetId:c,DomainId:r.Domain,CategoryId:r.Category,PublisherId:r.activePid,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,AbTestId:n.abTestId,UserId:a.getUserId(),Second:o.getRunTimeInSecs(),IsMobile:r.PageProperties.isMobile,IsTablet:r.PageProperties.isTablet,isPortrait:r.PageProperties.isPortrait}}var i=Cbola._,o=Cbola.Utils,n=Cbola.Config,r=Cbola.Env,a=Cbola.Common.UserService,s=Cbola.Logger.getInstance(),l=Cbola.Logger.Colors,d=Cbola.PageAnalytics.Factory,c=0,h=[],m=function(){};return m.prototype={init:function(e,t){"string"==typeof e&&(c=t,e.replace(/\s/g,"").split(",").map(function(e){var t=d.create(e);i.isFunction(t.init)&&!h.some(function(t){return t.type===e})&&(h.push({type:e,reporter:t}),t.init(),s.info("Initialized reporter: "+e))}))},fireAnalytic:function(r){var a=r.analyticMethod,d=r.params,c=void 0===d?{}:d,h=r.onSuccess,m=void 0!==h&&h,p=r.onError,u=void 0!==p&&p;i.extend(c,t());var b={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:o.encodePayload(c)};fetch(""+n.Defaults.pageAnalyticsServer+a,b).then(e).then(function(e){s.info(l.PALE_PURPLE,"fired "+a+" page analytics to server."),m&&m(e)}).catch(function(e){s.trace(a+" failed."),u&&u(e)})},stopReporting:function(e){i.forEach(h,function(t){(i.isNil(e)||t.type===e)&&i.isFunction(t.reporter.stop)&&t.reporter.stop()})},isPrimary:function(){return!0}},o.isInIframe()&&!o.isWindowTopSupported()||i.get(window.top,"Cbola.Globals.ReportersManager",!1)?{isPrimary:function(){return!1}}:(window.top.Cbola=window.top.Cbola||{},window.top.Cbola.Globals=window.top.Cbola.Globals||{},window.top.Cbola.Globals.ReportersManager=window.top.Cbola.Globals.ReportersManager||new m,window.top.Cbola.Globals.ReportersManager)}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Reporters.Data=Cbola.PageAnalytics.Reporters.Data||function(){function e(){u.removeEventListener(u.Events.LAYER_READY,e),(y=t())&&o()}function t(){var e=window.top,t="pbjs";if(i(e[t]))return e[t];for(t in e)if(!/webkitStorageInfo|webkitIndexedDB/.test(t)&&e.hasOwnProperty(t)&&-1===t.indexOf("Cbola")&&i(e[t]))return e[t];return null}function i(e){return!d.isNil(e)&&"object"===(void 0===e?"undefined":_typeof(e))&&"function"==typeof e.getBidResponses&&"function"==typeof e.getHighestCpmBids}function o(){w=[];var e=y.getBidResponses();_=y.getHighestCpmBids().map(function(e){return e.adId}),d.forEach(e,function(e){d.forEach(e.bids,n)}),w.length>0&&c.fireAnalytic({analyticMethod:h,params:{data:w}}),f=setTimeout(o,m)}function n(e){var t=e.adId;if(!(g[t]||e.cpm<0)){g[t]=!0;var i=("function"==typeof e.getSize?e.getSize():"0x0").split("x");w.push({r:r(e.bidder),l:l(e),j:Math.trunc(e.cpm*p),b:a(e.adUnitCode),t:i[0]*p,m:i[1]*p})}}function r(e){return C[e]||(C[e]=s(e)),C[e]}function a(e){return v[e]||(v[e]=s(e)),v[e]}function s(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,i=0;i<e.length;i++)t+=e.charCodeAt(i);return t>0?Math.trunc(t*e.charCodeAt(e.length-1)/(10+e.charCodeAt(Math.round(e.length/2))%10)):0}function l(e){var t="function"==typeof e.getStatusCode?e.getStatusCode():b.ER.bStat;return t===b.SUC.bStat?_.indexOf(e.adId)>-1?b.HG.cStat:b.SUC.cStat:I(t)}var d=Cbola._,c=Cbola.PageAnalytics.ReportersManager,h="SetData",m=3e4,p=123450,u=Cbola.EventBus,b={PND:{bStat:0,cStat:21},HG:{bStat:1,cStat:64},SUC:{bStat:1,cStat:86},FL:{bStat:2,cStat:21},TO:{bStat:3,cStat:21},ER:{bStat:-1,cStat:99}},f=null,y=null,g={},w=[],v={},C={},_=[],I=d.memoize(function(e){var t=d.find(b,function(t){return t.bStat===e});return t?t.cStat:b.ER.cStat}),x=function(){};return x.prototype={init:function(){u.addEventListener(u.Events.LAYER_READY,e)},stop:function(){clearTimeout(f)}},new x}(),window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Reporters.PageLoadReporter=Cbola.PageAnalytics.Reporters.PageLoadReporter||function(){function e(){setTimeout(function(){var e=0,o=0;try{e=t.result(window.top,"performance.timing.fetchStart",0),o=t.result(window.top,"performance.timing.loadEventEnd",0)}catch(e){}e&&o&&i.fireAnalytic({analyticMethod:n,params:{EventId:Cbola.Enums.SetEventTypes.PAGE_LOAD_EVENT,SecondGlobal:Math.round(100*(o-e))/1e5}})},0)}var t=Cbola._,i=Cbola.PageAnalytics.ReportersManager,o=Cbola.Utils,n="SetEvent",r=function(){};return r.prototype={init:function(){o.pageReady(e)}},new r}(),window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Reporters.ScrollReporter=Cbola.PageAnalytics.Reporters.ScrollReporter||function(){function e(){try{return window.top.scrollY||window.top.pageYOffset}catch(e){return 0}}function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=e(),d={Order:s++,PixelsFromTop:o};o!==i&&n.fireAnalytic({analyticMethod:r,params:d}),a=setTimeout(function(){t(o)},1e3*l.next().value)}function i(){d.cancel();try{window.top.removeEventListener("scroll",d)}catch(e){}t()}var o=Cbola._,n=Cbola.PageAnalytics.ReportersManager,r="SetScroll",a=void 0,s=1,l=function(){var e=1;return{next:function(){var t=30;return e<=2?t=5:e<=4?t=10:e<=6&&(t=20),e++,{done:!1,value:t}}}}(),d=o.debounce(i,300,{leading:!1,maxWait:500,trailing:!0}),c=function(){};return c.prototype={init:function(){try{window.top.addEventListener("scroll",d)}catch(e){}},stop:function(){clearTimeout(a)}},new c}(),Cbola.isBrowserSupported&&(Cbola&&Cbola.bootstrapper?(Cbola.Common.TimelineService.mark("reinitialization of carambola.min.js"),Cbola.Logger.getInstance().info("Bootstrapper is already loaded")):(Cbola.Common.TimelineService.markStart("First time initialization carambola.min.js"),Cbola.bootstrapper=new Cbola.Bootstrapper,Cbola.taskManager=Cbola.TaskManager,Cbola.bootstrapper.init(),Cbola.Common.TimelineService.markEnd("First time initialization carambola.min.js")));
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["cbola_layer_121.css"]=function(t){var e,i="";return i+=".cbola-d-trivia-multi,.cbola-d-trivia-multi *{box-sizing:border-box}.cbola-d-trivia-multi{width:100%;height:250px;position:relative;margin:0 auto;z-index:5;border:1px solid #ededed;overflow:hidden}.cbola-d-trivia-multi__body{width:100%;height:100%;position:relative;background-color:#fff}.cbola-d-trivia-multi__game{width:53.2%;max-width:calc(638px * .532);min-width:calc(478px * .532);height:100%;float:left;position:relative;z-index:10;-webkit-transition:opacity .6s ease;transition:opacity .6s ease}h2.cbola-d-trivia-multi__game-header{color:#b7115e;background-color:#fff;font-size:18px!important;font-weight:400!important;line-height:25px;font-family:Oswald,\"Open Sans\",sans-serif!important;letter-spacing:0;text-transform:uppercase!important;height:62px!important;margin:0!important;padding:8px 10px 5px 8px;text-align:left!important;overflow:hidden;-webkit-transition:opacity .6s ease-in;transition:opacity .6s ease-in;border:0}.cbola-d-trivia-multi-md h2.cbola-d-trivia-multi__game-header{font-size:16px!important}.cbola-d-trivia-multi-sm h2.cbola-d-trivia-multi__game-header{font-size:15px!important}h2.cbola-d-trivia-multi__game-header-game-end{color:#7b7b7b;opacity:.3}.cbola-d-trivia-multi__item-container{margin-left:8px;text-align:left}.cbola-d-trivia-multi__question-wrapper{width:105%;height:60px;padding-left:10px;border-radius:2px;overflow:visible!important;text-align:left!important;background:-webkit-linear-gradient(left,#b7115e 0,#b8115e 73%,rgba(184,17,94,.5) 100%);background:-webkit-linear-gradient(left, #b7115e 0, #b8115e 73%, rgba(184,17,94,.5) 100%);background:linear-gradient(to right,#b7115e 0,#b8115e 73%,rgba(184,17,94,.5) 100%)}.cbola-d-trivia-multi__question-wrapper:after{content:' ';position:absolute;width:0;height:0;left:21px;top:60px;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #b7115e}.cbola-d-trivia-multi__question-container{width:calc(100% - 75px);height:100%;margin:0 5px 0 0!important;position:relative;overflow:hidden}.cbola-d-trivia-multi__answer-list-wrapper{width:95%;height:120px;padding-top:8px;position:relative;margin:0 5% 0 0;overflow:hidden}.cbola-d-trivia-multi__answer-list-container{width:100%;height:100%;overflow:hidden;margin:0;position:relative;text-align:left}.cbola-d-trivia-multi__next-game{position:absolute;top:8px;left:0;height:100%;width:100%;background-color:rgba(255,255,255,.3);opacity:1;-webkit-transition:opacity .6s ease;transition:opacity .6s ease}.cbola-d-trivia-multi__start-next-button{position:absolute;top:calc(36% - 9px);left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:19px;font-weight:700;font-family:Oswald,'Open Sans',sans-serif;color:#fff;background-color:#b7115e;width:66%;padding:4px 0;text-transform:uppercase;cursor:pointer;text-align:center}.cbola-d-trivia-multi__start-next-button:hover{box-shadow:0 0 1px 3px #fff,0 0 1px 5px rgba(183,17,94,.5)}.cbola-page-item{-webkit-transition:-webkit-transform .6s ease-in;transition:transform .6s ease-in}.cbola-page-item--prev{-webkit-transform:translateX(-500px);transform:translateX(-500px)}.cbola-page-item--active{-webkit-transform:translateX(0);transform:translateX(0)}.cbola-page-item--next{-webkit-transform:translateX(500px);transform:translateX(500px)}.cbola-d-trivia-multi__content-wrapper{width:46.8%;max-width:calc(638px * .468);min-width:calc(478px * .468);height:100%;z-index:1;float:right;position:relative}.cbola-d-trivia-multi__image-wrapper{width:100%;height:100%;overflow:hidden;position:relative;z-index:1}.cbola-d-trivia-multi__share{position:absolute;right:0;top:0;height:30px;width:80px;padding-top:6px;font-size:18px;z-index:100;background:-webkit-linear-gradient(left,rgba(0,0,0,0) 0,rgba(0,0,0,0) 1%,rgba(0,0,0,.35) 100%);background:-webkit-linear-gradient(left, rgba(0,0,0,0) 0, rgba(0,0,0,0) 1%, rgba(0,0,0,.35) 100%);background:linear-gradient(to right,rgba(0,0,0,0) 0,rgba(0,0,0,0) 1%,rgba(0,0,0,.35) 100%);-webkit-transition:opacity .3s ease;transition:opacity .3s ease}.cbola-d-trivia-multi__share .cbola-icon{color:#fff;float:right;margin-right:5px;cursor:pointer}.cbola-d-trivia-multi-share__fb:hover{color:#3b5998}.cbola-d-trivia-multi-share__tw:hover{color:#3cf}.cbola-d-trivia-multi_image-container{width:100%;height:100%;position:relative;overflow:hidden}.cbola-d-trivia-multi-game-end{width:100%;height:100%;position:absolute;background-color:transparent;top:-100%;-webkit-transition:-webkit-transform .55s ease;transition:transform .55s ease;z-index:100;color:#fff;box-shadow:inset 10px 10px 100px 24px rgba(0,0,0,.75)}.cbola-d-trivia-multi-game-end--active{-webkit-transform:translateY(100%);transform:translateY(100%)}.cbola-d-trivia-multi-game-end--active~.cbola-d-trivia-multi_image-container .cbola-d-trivia-multi__image--active .cbola-d-trivia-multi__image{-webkit-filter:blur(5px);filter:blur(5px)}.cbola-ua-ie .cbola-d-trivia-multi-game-end{background-color:rgba(62,62,66,.7)}.cbola-d-trivia-multi-game-end--active~.cbola-d-trivia-multi__share{opacity:0;pointer-events:none}div.cbola-d-trivia-multi-game-end__container{padding-left:8%;text-align:left}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__container,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__container{padding-left:7%}.cbola-d-trivia-multi-game-end__score-container{width:100%;height:63px;padding-top:8px}.cbola-d-trivia-multi-game-end__score-container>div{display:inline-block}.cbola-d-trivia-multi-game-end__text{font-family:'Open Sans',Oswald,sans-serif;font-size:17px;text-transform:capitalize;max-width:calc(96% - 62px);min-width:152px;line-height:1em}.cbola-d-trivia-multi-game-end__score{font-family:'Open Sans',sans-serif;font-size:22px;font-weight:700;height:62px;width:62px;line-height:63px;border-radius:50%;background-color:#b7115e;text-align:center;letter-spacing:-1px;margin-right:2%;margin-left:2%}.cbola-d-trivia-multi-game-end__challenge,.cbola-d-trivia-multi-game-end__your-friends{text-transform:uppercase;font-size:28px;line-height:28px;font-family:'Open Sans',sans-serif;font-weight:100}.cbola-d-trivia-multi-game-end__social-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.cbola-d-trivia-multi-game-end__share{overflow:hidden;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:auto;flex:auto;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-game-end-share__tw{width:25px;height:25px;border:1px solid #fff;border-radius:50%;margin-left:5%;cursor:pointer;box-sizing:content-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.cbola-d-trivia-multi-game-end-share__fb{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;background-color:#3a5081;font-size:20px}.cbola-d-trivia-multi-game-end-share__fb>.cbola-icon-facebook{-webkit-transform:translateY(1px);transform:translateY(1px)}.cbola-d-trivia-multi-game-end-share__fb:hover{background-color:#2b3c62}.cbola-d-trivia-multi-game-end-share__tw{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#41aae1;font-size:17px}.cbola-d-trivia-multi-game-end-share__tw>.cbola-icon-twitter{-webkit-transform:none;transform:none}.cbola-d-trivia-multi-game-end-share__tw:hover{background-color:#3389b6}.cbola-d-trivia-multi-game-end__teaser{width:100%;height:80px}p.cbola-d-trivia-multi-game-end__next-quiz{text-transform:uppercase;width:80px;font-family:\"Open Sans\",sans-serif!important;font-size:14px!important;font-weight:400!important;margin:0;text-align:left;color:#fff}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__text{font-size:15px;max-width:calc(96% - 55px)}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__score{font-size:18px;height:55px;width:55px;line-height:54px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__your-friends{letter-spacing:0;font-size:24px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__share{font-size:19px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__tw{width:24px;height:24px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__tw{font-size:16px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__text{font-size:14px;max-width:calc(96% - 46px)}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__score{font-size:18px;height:46px;width:46px;line-height:45px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__your-friends{letter-spacing:0;font-size:23px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__tw{width:22px;height:22px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__fb{font-size:18px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__tw{font-size:15px}.cbola-d-trivia-multi__content-footer{height:30px;width:100%;background-color:rgba(40,40,40,.8);font-size:0;text-align:left!important;z-index:10;position:absolute;bottom:0}.cbola-d-trivia-multi__logo-container,.cbola-d-trivia-multi__progress-wrapper{display:inline-block;vertical-align:middle;height:100%}.cbola-d-trivia-multi__progress-wrapper{width:192px;overflow:hidden}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__progress-wrapper{width:167px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__progress-wrapper{width:154px}.cbola-d-trivia-multi--pt .cbola-d-trivia-multi__progress-wrapper{letter-spacing:-.9px}.cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-footer__your-score{font-family:Roboto,Arial,sans-serif;font-size:14px;font-weight:400;color:#fff;text-transform:capitalize;padding-right:3px;padding-left:4px}.cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-footer__score{font-family:Roboto,Arial,sans-serif;font-size:14px;color:#de3885;font-weight:600}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__score,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__your-score{font-size:12px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__score,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__your-score{font-size:11px}.cbola-d-trivia-multi--pt .cbola-d-trivia-multi__progress-wrapper{padding-left:2px}.cbola-d-trivia-multi--pt.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__progress-wrapper{letter-spacing:-.7px;padding-left:1px}.cbola-d-trivia-multi__logo-container{width:calc(100% - 192px);float:right;position:relative;text-align:right}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__logo-container{width:calc(100% - 167px)}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__logo-container{width:calc(100% - 154px)}.cbola-d-trivia-multi__logo{height:100%;cursor:pointer;margin:0 auto;opacity:1;max-width:95%}.cbola-d-trivia-multi__carambola_logo{background:url('"+(null==(e=t.clientPath)?"":e)+"css/assets/cbolaSprite.png') -61px -47px no-repeat;width:63px;height:15px;margin-right:6px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__carambola_logo{margin-left:1px;margin-right:3px}.cbola-d-trivia-multi__logo-container:hover .cbola-d-trivia-multi__carambola_logo{opacity:.7}.cbola-d-trivia-multi__add-this{position:absolute;height:20px;padding:3px 5px;background-color:rgba(40,40,40,.8);color:#e6e6e6;text-transform:capitalize;font-size:12px;font-weight:300;top:-20px;right:0;width:166px;font-family:'Open Sans',sans;cursor:pointer;-webkit-transition:opacity .2s ease-in;transition:opacity .2s ease-in}ul.cbola-d-trivia-multi__answers-list{list-style-type:none;padding:2px 0 0!important;margin:0!important;width:100%;height:100%;-webkit-transition:-webkit-transform .6s ease-in;transition:transform .6s ease-in;position:absolute}ul.cbola-d-trivia-multi__answers-list li.cbola-d-trivia-multi__answer{width:98%;-webkit-transition:opacity .2s ease-in;transition:opacity .2s ease-in;padding:0}ul.cbola-d-trivia-multi__three-answers li.cbola-d-trivia-multi__answer{margin:0 0 8px 2px}ul.cbola-d-trivia-multi__four-answers li.cbola-d-trivia-multi__answer{margin:0 0 4px 2px}ul.cbola-d-trivia-multi__four-answers-pairs{font-size:0}ul.cbola-d-trivia-multi__four-answers-pairs li.cbola-d-trivia-multi__answer{display:inline-block;width:48%;height:56px;margin-left:0}ul.cbola-d-trivia-multi__four-answers-pairs li.cbola-d-trivia-multi__answer:nth-child(2n+1){margin-right:2.5%}.cbola-d-trivia-multi__answer:last-child{margin-bottom:0}.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{background-color:rgba(183,17,94,.5)}p.cbola-d-trivia-multi__answer-desc{margin:0!important;font-family:Roboto,Oswald,sans-serif;font-size:13px;color:#282828;background-color:#F4F4F4;vertical-align:middle;border-bottom-left-radius:2px;border-top-left-radius:2px;box-shadow:inset 0 1px 1px 0 rgba(0,0,0,.1),inset 0 -1px 1px 0 rgba(0,0,0,.1);cursor:pointer;overflow:hidden;padding:0;text-align:center}.cbola-d-trivia-multi__answers-letters p.cbola-d-trivia-multi__answer-desc{text-align:left}.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc{height:30px;line-height:30px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc{height:24px;line-height:24px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc,.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc{padding-left:6px;text-align:left}.cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc{height:46px;line-height:46px;border-radius:6px}.cbola-d-trivia-multi-md p.cbola-d-trivia-multi__answer-desc{font-size:12px}.cbola-d-trivia-multi-sm p.cbola-d-trivia-multi__answer-desc{font-size:11px}.cbola-d-trivia-multi__answers-letters p.cbola-d-trivia-multi__answer-desc:before{text-transform:uppercase;display:inline-block;color:#b7115e;font-family:'Open Sans',sans-serif;font-size:14px;font-weight:700;vertical-align:top;text-align:center;width:10%;max-width:20px;margin-right:4px;box-sizing:border-box;border-bottom-left-radius:2px;border-top-left-radius:2px;margin-left:2px}.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc:before{height:30px;line-height:30px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc:before{height:24px;line-height:24px}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(1) .cbola-d-trivia-multi__answer-desc:before{content:'a'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(2) .cbola-d-trivia-multi__answer-desc:before{content:'b'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(3) .cbola-d-trivia-multi__answer-desc:before{content:'c'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(4) .cbola-d-trivia-multi__answer-desc:before{content:'d'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__circle-answer .cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc:before{height:20px;width:20px;margin-top:13px;border:1px solid #b7115e;border-radius:50%;line-height:1.3em}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer p.cbola-d-trivia-multi__answer-desc:before{width:0;box-sizing:border-box;height:30px;margin-top:0;margin-left:0;padding-left:0;border-top-left-radius:0;border-bottom-left-radius:0;border-bottom:30px solid transparent;content:\" \"!important}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:before{position:absolute;color:#fff;text-transform:uppercase;font-family:'Open Sans',sans;font-size:14px;font-weight:600;line-height:1.1em;padding-left:4px}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(1):before{content:'a'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(2):before{content:'b'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(3):before{content:'c'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(4):before{content:'d'}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-correct p.cbola-d-trivia-multi__answer-desc{background-color:#33cf4d;color:#fff}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-wrong p.cbola-d-trivia-multi__answer-desc{background-color:#727272;color:#fff}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-fade{opacity:.3}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-fade:hover p.cbola-d-trivia-multi__answer-desc{background-color:#F4F4F4!important}.cbola-d-trivia-multi_image-loader{height:100%;width:100%;position:absolute;-webkit-transition:-webkit-transform .6s ease-in;transition:transform .6s ease-in;z-index:1}.cbola-d-trivia-multi__image{height:100%;width:100%;position:relative;background-position-x:50%;background-position-y:-1%;background-size:auto;background-repeat:no-repeat;background-color:transparent}.cbola-d-trivia-multi__image--prev{-webkit-transform:translateX(-101%);transform:translateX(-101%)}.cbola-d-trivia-multi__image--active{-webkit-transform:translateX(0);transform:translateX(0)}.cbola-d-trivia-multi__image--next{-webkit-transform:translateX(101%);transform:translateX(101%)}div.cbola-d-trivia-multi__question{position:absolute;overflow:hidden;height:100%;width:100%}.cbola-d-trivia-multi__question p{font-size:14px;color:#fff;font-family:\"Open Sans\",sans-serif!important;margin:-2px 0 0!important;padding:0!important;font-weight:400!important;line-height:normal;text-align:left}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__question p,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__question p{font-size:13px;margin:0!important;line-height:16px}"}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["cbola_layer_121_theme.css"]=function(t){var e,i="";Array.prototype.join;return i+=".cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer p.cbola-d-trivia-multi__answer-desc:before{color:"+(null==(e=t.InContentThemeColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{background-color:"+(null==(e=Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5))?"":e)+";color:"+(null==(e=t.DesktopMultiTriviaFontColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer-correct.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{color:#fff;background-color:#33cf4d}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer-correct.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc:before{color:#fff}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer-wrong.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{color:#fff;background-color:#727272}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer-wrong.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc:before,.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-correct p.cbola-d-trivia-multi__answer-desc:before,.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-wrong p.cbola-d-trivia-multi__answer-desc:before{color:#fff}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__circle-answer .cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc:before{border:1px solid}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer p.cbola-d-trivia-multi__answer-desc:before{border-left:30px solid ",t.InContentThemeColor?i+=" "+(null==(e=t.InContentThemeColor)?"":e)+" ":i+=" #b7115e ",i+="}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .in-content-container-coverage{padding-bottom:"+(null==(e=t.PaddingBottomCover)?"":e)+"px!important;margin-top:"+(null==(e=t.MarginTopCover)?"":e)+"px!important;margin-bottom:"+(null==(e=t.MarginBottomCover)?"":e)+"px!important;max-width:"+(null==(e=t.MaxInContentTriviaWidth)?"":e)+"px!important;min-width:"+(null==(e=t.DesktopInContentMinWidth)?"":e)+"px!important}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__body{border-color:"+(null==(e=t.DesktopMultiTriviaBorderColor)?"":e)+";background-color:"+(null==(e=t.DesktopMultiTriviaBackgroundColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer h2.cbola-d-trivia-multi__game-header{color:"+(null==(e=t.InContentThemeColor)?"":e)+";background-color:"+(null==(e=t.DesktopMultiTriviaBackgroundColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__question-wrapper{background:-moz-linear-gradient(left,"+(null==(e=t.InContentThemeColor)?"":e)+" 0,"+(null==(e=t.InContentThemeColor)?"":e)+" 73%,"+(null==(e=Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5))?"":e)+" 100%);background:-webkit-linear-gradient(left,"+(null==(e=t.InContentThemeColor)?"":e)+" 0,"+(null==(e=t.InContentThemeColor)?"":e)+" 73%,"+(null==(e=Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5))?"":e)+" 100%);background:linear-gradient(to right,"+(null==(e=t.InContentThemeColor)?"":e)+" 0,"+(null==(e=t.InContentThemeColor)?"":e)+" 73%,"+(null==(e=Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5))?"":e)+" 100%)}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi-game-end__score,.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__start-next-button{background-color:"+(null==(e=t.InContentThemeColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__question-wrapper:after{border-top-color:"+(null==(e=t.InContentThemeColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__start-next-button:hover{background-color:"+(null==(e=t.InContentThemeColor)?"":e)+";box-shadow:0 0 1px 3px ",t.DesktopMultiTriviaBackgroundColor?i+=" "+(null==(e=t.DesktopMultiTriviaBackgroundColor)?"":e)+" ":i+="#fff ",i+=",0 0 1px 5px ",Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5)?i+=" "+(null==(e=Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5))?"":e)+" ":i+="rgba(183,17,94,.5) ",i+="}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi-game-end{background-image:",t.DesktopMultiTriviaEndGameImg?i+=" url('"+(null==(e=t.DesktopMultiTriviaEndGameImg)?"":e)+"') ":i+="null",i+=";background-size:auto;background-position:0 50%;background-repeat:no-repeat;cursor:",t.DesktopMultiTriviaEndGameLink?i+="pointer":i+="default",i+="}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__next-game{background-color:"+(null==(e=Cbola.Utils.rgbToRgba(t.DesktopMultiTriviaBackgroundColor,.3))?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi-footer__progress,.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi-footer__score{color:"+(null==(e=t.MultiTriviaProgressFontColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__logo-container{display:",t.RemovePoweredByCarambola?i+=" none ":i+=" block",i+="}"}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["desktop_trivia_multi_answers.html"]=function(t){var e,i="";Array.prototype.join;return Cbola._.forEach(t.Items,function(t,o){i+='\r\n  <ul class="cbola-d-trivia-multi__answers-list cbola-page-item cbola-page-item-',i+=0===o?"-active":"-next",i+=" cbola-d-trivia-multi__",4===t.Answers.length?i+="four":i+="three",i+="-answers",t.Type===Cbola.InContent.Layers.Item.Types.TRIVIA_MULTI_PAIRS&&(i+="-pairs"),i+='">\r\n    ',Cbola._.forEach(t.Answers,function(t){i+='\r\n      <li class="cbola-d-trivia-multi__answer" data-answer-id="'+(null==(e=t.Id)?"":e)+'">\r\n        <p class="cbola-d-trivia-multi__answer-desc">'+(null==(e=t.Title)?"":e)+"</p>\r\n      </li>\r\n    "}),i+="\r\n  </ul>\r\n"}),i}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["desktop_trivia_multi_image.html"]=function(t){var e="";Array.prototype.join;return Cbola._.forEach(t.Items,function(t,i){e+='\r\n<div class="cbola-d-trivia-multi_image-loader cbola-d-trivia-multi__image--',e+=0===i?"active":"next",e+='" ',t.Link&&(e+=' style="cursor:pointer"'),e+='>\r\n  <div class="cbola-loader"></div>\r\n  <div class="cbola-d-trivia-multi__image"></div>\r\n</div>\r\n'}),e}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["desktop_trivia_multi_questions.html"]=function(t){var e,i="";Array.prototype.join;return Cbola._.forEach(t.Items,function(t,o){i+='\r\n  <div class="cbola-d-trivia-multi__question cbola-ghost-center-container cbola-page-item cbola-page-item--',i+=0===o?"active":"next",i+='" ',t.Link&&(i+='style="cursor:pointer"'),i+='>\r\n    <p class="cbola-ghost-center-inner">\r\n      '+(null==(e=t.Description)?"":e)+"\r\n    </p>\r\n  </div>\r\n"}),i}}(),Cbola.Templates["desktop_trivia_multi_view.html"]='<div class="cbola-d-trivia-multi unselectDrag">\n  <div class="cbola-d-trivia-multi__body">\n    <div class="cbola-d-trivia-multi__game">\n      <h2 class="cbola-d-trivia-multi__game-header"></h2>\n      <div class="cbola-d-trivia-multi__item-container">\n        <div class="cbola-d-trivia-multi__question-wrapper cbola-ghost-center-container">\n          <div class="cbola-d-trivia-multi__question-container cbola-ghost-center-inner">\n          </div>\n          <div class="cbola-d-trivia-multi__timer-placeholder cbola-ghost-center-inner">\n          </div>\n        </div>\n        <div class="cbola-d-trivia-multi__answer-list-wrapper">\n          <div class="cbola-d-trivia-multi__answer-list-container cbola-refresh-click-trigger"></div>\n          <div class="cbola-d-trivia-multi__next-game cbola-hidden">\n            <div class="cbola-d-trivia-multi__start-next-button"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="cbola-d-trivia-multi__content-wrapper">\n      <div class="cbola-d-trivia-multi__image-wrapper">\n        <div class="cbola-d-trivia-multi-game-end">\n          <div class="cbola-d-trivia-multi-game-end__container">\n            <div class="cbola-d-trivia-multi-game-end__score-container cbola-ghost-center-container">\n              <div class="cbola-d-trivia-multi-game-end__text cbola-ghost-center-inner">you scored a fair</div>\n              <div class="cbola-d-trivia-multi-game-end__score cbola-ghost-center-inner">5/10</div>\n            </div>\n            <div class="cbola-d-trivia-multi-game-end__challenge">challenge</div>\n            <div class="cbola-d-trivia-multi-game-end__social-container">\n              <div class="cbola-d-trivia-multi-game-end__your-friends">your friends</div>\n              <div class="cbola-d-trivia-multi-game-end__share">\n                <div class="cbola-d-trivia-multi-game-end-share__fb">\n                  <i class="cbola-icon cbola-icon-facebook"></i>\n                </div>\n                <div class="cbola-d-trivia-multi-game-end-share__tw">\n                  <i class="cbola-icon cbola-icon-twitter"></i>\n                </div>\n              </div>\n            </div>\n            <div class="cbola-d-trivia-multi-game-end__teaser cbola-ghost-center-container">\n              <p class="cbola-d-trivia-multi-game-end__next-quiz cbola-ghost-center-inner">next quiz starts in:</p>\n              <div class="cbola-d-trivia-multi-game-end__timer-placeholder cbola-ghost-center-inner">\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="cbola-d-trivia-multi__share">\n          <i class="cbola-icon cbola-icon-facebook cbola-d-trivia-multi-share__fb"></i>\n          <i class="cbola-icon cbola-icon-twitter cbola-d-trivia-multi-share__tw"></i>\n        </div>\n        <div class="cbola-d-trivia-multi_image-container">\n        </div>\n        <div class="cbola-d-trivia-multi__content-footer">\n          <div class="cbola-d-trivia-multi__progress-wrapper cbola-ghost-center-container">\n            <span class="cbola-d-trivia-multi-footer__your-score cbola-ghost-center-inner">your score</span>\n            <span class="cbola-d-trivia-multi-footer__score cbola-ghost-center-inner">0</span>\n            <span class="cbola-d-trivia-multi-footer__question cbola-ghost-center-inner">question</span>\n            <span class="cbola-d-trivia-multi-footer__progress cbola-ghost-center-inner">1/10</span>\n          </div>\n          <div class="cbola-d-trivia-multi__logo-container cbola-ghost-center-container">\n            <div class="cbola-d-trivia-multi__add-this cbola-fade-out">add this widget to your site</div>\n            <div class="cbola-d-trivia-multi__logo cbola-d-trivia-multi__carambola_logo cbola-ghost-center-inner"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>';var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.TimerBase=function(){var t=Cbola.EventBus,e=10;return function(){function i(){_classCallCheck(this,i),this.running=!1,this.startTime=0,this.lastUnfilledStrike=0,this.frameRequestId=null,this.enablementStatus=!0,this.timerEndedEvent=""+t.Events.TIMER_ENDED+Math.floor(1e3*Math.random())}return _createClass(i,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return this.setDuration(t),this}},{key:"setDuration",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return this.duration=t,this.reset(),this}},{key:"reset",value:function(){return this.stopTimer(),this.frameRequestId=null,this.startTime=0,this.running=!1,this}},{key:"startTimer",value:function(){return this.enablementStatus&&(this.reset(),this.running=!0,this.startTime=Date.now(),this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this))),this}},{key:"runTimer",value:function(){if(Date.now()-this.startTime>1e3*this.duration)return void this.timerEnded();this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this))}},{key:"stopTimer",value:function(){return cancelAnimationFrame(this.frameRequestId),this.running=!1,this}},{key:"timerEnded",value:function(){this.running=!1,t.fire(this.timerEndedEvent,{detail:this})}},{key:"getTimerEndedEvent",value:function(){return this.timerEndedEvent}},{key:"isRunning",value:function(){return this.running}},{key:"enable",value:function(){return this.enablementStatus=!0,this}},{key:"disable",value:function(){return this.enablementStatus=!1,this}},{key:"isEnabled",value:function(){return this.enablementStatus}}]),i}()}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["countdown_timer.html"]=function(t){var e,i="";return i+='<div class="cbola-countdown-timer-wrapper">\r\n  <div class="cbola-countdown-timer__time"></div>\r\n  <div class="cbola-countdown-timer__seconds">'+(null==(e=t.seconds)?"":e)+"</div>\r\n</div>\r\n"}}();var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),_get=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)};Cbola.InContent.Components.CountdownTimer=function(){var t=Cbola.Common.UserService,e=Cbola._,i=function(i){function o(){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return t.appended=!1,t.template=o.TEMPLATE+".html",t}return _inherits(o,i),_createClass(o,[{key:"init",value:function(t){return this.getElements(),_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"init",this).call(this,t),this}},{key:"getElements",value:function(){this.timerElemFragment=Cbola.Templates.createFragmentFromTemplate(this.template,{seconds:t.vocabulary("seconds")}),this.timerWrapper=this.timerElemFragment.querySelector(".cbola-countdown-timer-wrapper"),this.timerTimeElem=this.timerElemFragment.querySelector(".cbola-countdown-timer__time")}},{key:"getTimerWrapperElement",value:function(){return this.timerWrapper}},{key:"reset",value:function(){return _get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"reset",this).call(this),this.updateTimeDisplayElem(this.duration),this}},{key:"replacePlaceholder",value:function(t){var i=this,o=t.parentElement;return e.isNil(o)?"":(this.appended||(this.timerPlaceholder=o.replaceChild(this.timerElemFragment,t),e.forEach(t.classList,function(t){i.timerWrapper.classList.add(t)}),this.appended=!0),this)}},{key:"removeTimer",value:function(){this.appended&&(this.timerWrapper.parentElement.replaceChild(this.timerPlaceholder,this.timerWrapper),this.appended=!1)}},{key:"startTimer",value:function(){return this.appended&&_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"startTimer",this).call(this),this}},{key:"runTimer",value:function(){return Date.now()-this.startTime>1e3*this.duration?(this.timerEnded(),this):(this.updateTimeDisplayElem(),this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this)),this)}},{key:"updateTimeDisplayElem",value:function(t){return!((t=t||this.duration-Math.floor((Date.now()-this.startTime)/1e3))===this.prevDisplayedTime||!this.timerTimeElem)&&(this.timerTimeElem.textContent=t,this.prevDisplayedTime=t,!0)}},{key:"stopTimer",value:function(){return this.appended&&cancelAnimationFrame(this.frameRequestId),this}},{key:"timerEnded",value:function(){_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"timerEnded",this).call(this),this.updateTimeDisplayElem("0")}},{key:"isAppended",value:function(){return this.appended}}]),o}(Cbola.InContent.Components.TimerBase);return i.TEMPLATE="countdown_timer",i}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["spinner_timer.css"]=function(t){var e="";return e+=".cbola-spinner-timer__wrapper{height:44px;width:44px;position:relative;-webkit-transform:translateZ(0);transform:translateZ(0)}.cbola-spinner-timer__time{color:#fff;font-family:Oswald,sans-serif!important;font-size:20px!important;font-weight:400!important;position:absolute;top:48%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.cbola-spinner-timer__strikes{position:absolute;top:1px;left:31px}.cbola-spinner-timer__section{position:absolute;top:0;left:0;opacity:0;width:11px;max-width:11px;height:6px}.cbola-spinner-timer__section path{stroke:#fff;stroke-width:3}.cbola-spinner-timer__section:nth-of-type(1){-webkit-transform:translate(-12px,-2px) rotate(7deg);transform:translate(-12px,-2px) rotate(7deg)}.cbola-spinner-timer__section:nth-of-type(2){-webkit-transform:translate(-3px,2px) rotate(37deg);transform:translate(-3px,2px) rotate(37deg)}.cbola-spinner-timer__section:nth-of-type(3){-webkit-transform:translate(3px,10px) rotate(68deg);transform:translate(3px,10px) rotate(68deg)}.cbola-spinner-timer__section:nth-of-type(4){-webkit-transform:translate(4px,20px) rotate(96deg);transform:translate(4px,20px) rotate(96deg)}.cbola-spinner-timer__section:nth-of-type(5){-webkit-transform:translate(0,29px) rotate(126deg);transform:translate(0,29px) rotate(126deg)}.cbola-spinner-timer__section:nth-of-type(6){-webkit-transform:translate(-8px,35px) rotate(158deg);transform:translate(-8px,35px) rotate(158deg)}.cbola-spinner-timer__section:nth-of-type(7){-webkit-transform:translate(-18px,36px) rotate(188deg);transform:translate(-18px,36px) rotate(188deg)}.cbola-spinner-timer__section:nth-of-type(8){-webkit-transform:translate(-27px,32px) rotate(218deg);transform:translate(-27px,32px) rotate(218deg)}.cbola-spinner-timer__section:nth-of-type(9){-webkit-transform:translate(-33px,24px) rotate(245deg);transform:translate(-33px,24px) rotate(245deg)}.cbola-spinner-timer__section:nth-of-type(10){-webkit-transform:translate(-34px,14px) rotate(279deg);transform:translate(-34px,14px) rotate(279deg)}.cbola-spinner-timer__section:nth-of-type(11){-webkit-transform:translate(-30px,5px) rotate(307deg);transform:translate(-30px,5px) rotate(307deg)}.cbola-spinner-timer__section:nth-of-type(12){-webkit-transform:translate(-22px,-1px) rotate(340deg);transform:translate(-22px,-1px) rotate(340deg)}"}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["spinner_timer.html"]=function(t){var e="";Array.prototype.join;e+='<div class="cbola-spinner-timer__wrapper">\r\n  <div class="cbola-spinner-timer__time"></div>\r\n  <div class="cbola-spinner-timer__strikes">\r\n    ';for(var i=0;i<t.curvesNum;i++)e+='\r\n    <svg class="cbola-spinner-timer__section">\r\n      <path d="M 1,4 C4.5,3.2 6.5,3.2 10,4"/>\r\n    </svg>\r\n    ';return e+="\r\n  </div>\r\n</div>\r\n"}}();var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),_get=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)};window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.SpinnerTimer=function(){var t=Cbola.Common.FontsManager,e=12,i=(Cbola.Utils,Cbola._),o=function(o){function n(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var o=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return o.template="spinner_timer.html",o.type=i.type||n.RUN,o.tailLength=i.tailLength&&i.tailLength<e?i.tailLength:Math.round(.66*e),o.lastUnfilledStrike=0,t.getOswald(),o}return _inherits(n,o),_createClass(n,[{key:"init",value:function(t){return _get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"init",this).call(this,t),this.strikeOpacityIncrement=parseFloat((Math.floor(1/this.tailLength*100)/100).toFixed(2)),this}},{key:"setDuration",value:function(t){this.timerTimeElem.textContent=t,this.prevDisplayedTime=t,this.strikeUnFillPerSec=this.strikes.length/t,_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setDuration",this).call(this,t)}},{key:"getElements",value:function(){this.timerElemFragment=Cbola.Templates.createFragmentFromTemplate(this.template,{curvesNum:e}),this.timerWrapper=this.timerElemFragment.querySelector(".cbola-spinner-timer__wrapper"),this.strikes=this.timerElemFragment.querySelectorAll(".cbola-spinner-timer__section"),this.timerTimeElem=this.timerElemFragment.querySelector(".cbola-spinner-timer__time")}},{key:"reset",value:function(){this.stopTimer(),this.frameRequestId=null,this.lastUnfilledStrike=0,this.startTime=0;for(var t=this.type===n.UNFILL?1:0,e=0;e<this.strikes.length;e++)this.strikes[e].style["opacity"]=t;return this.updateTimeDisplayElem(this.duration),this}},{key:"replacePlaceholder",value:function(t){return i.isUndefined(this.styleElem)&&(this.styleElem=Cbola.Styles.injectMainStyle(document,"spinner_timer.css")),_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"replacePlaceholder",this).call(this,t)}},{key:"startTimer",value:function(){if(!this.appended)return this;this.reset(),this.startTime=(new Date).getTime();var t=this.type===n.UNFILL?this.unFillTimer:this.runTimer;return this.frameRequestId=requestAnimationFrame(t.bind(this)),this}},{key:"unFillTimer",value:function(){var t=Date.now()-this.startTime;if(t>=1e3*this.duration){for(var e=this.lastUnfilledStrike;e<this.strikes.length;e++)this.strikes[e].style["opacity"]=0;return void this.timerEnded()}var i=Math.floor(t*this.strikeUnFillPerSec/1e3);if(this.updateTimeDisplayElem()){for(var o=this.lastUnfilledStrike;i>=0&&o<i;o++)this.strikes[o].style["opacity"]=0;this.lastUnfilledStrike=i}this.updateTimeDisplayElem(),this.frameRequestId=requestAnimationFrame(this.unFillTimer.bind(this))}},{key:"runTimer",value:function(){var t=Date.now()-this.startTime,e=0;if(t>1e3*this.duration)return void this.timerEnded();var i=Math.floor(t%1e3/1e3*this.strikes.length),o=void 0;o=t<1e3?i>=this.tailLength?i-this.tailLength:0:i>=this.tailLength?i-this.tailLength:this.strikes.length-(this.tailLength-i);for(var n=o;n!==i;)this.strikes[n].style["opacity"]=e,e+=this.strikeOpacityIncrement,++n===this.strikes.length&&(n=0);this.strikes[i].style["opacity"]=1,this.updateTimeDisplayElem(),this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this))}}]),n}(Cbola.InContent.Components.CountdownTimer);return o.Types={RUN:1,UNFILL:2},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.TriviaUtils=function(){var t=Cbola.Common.UserService,e=function(){},i="https://www.facebook.com";return e.prototype.getGameEndedText=function(e){var i=t.vocabulary("YouScoredaRidiculous");return e>.9?i=t.vocabulary("youScoredaPerfect"):e>.8?i=t.vocabulary("YouScoredanAwesome"):e>.6?i=t.vocabulary("YouScoredaMighty"):e>.4?i=t.vocabulary("YouScoredaFair"):e>.2&&(i=t.vocabulary("YouScoredaLame")),i},e.prototype.shareOnFacebook=function(t){var e=i+"/dialog/share?app_id=264749280348555&href="+encodeURIComponent(Cbola.Utils.checkIfQueryStingExist(t,!0))+"&quote="+encodeURIComponent(t.text)+"&redirect_uri="+encodeURIComponent(i);window.open(e,"_blank","width=560,height=380")},e.prototype.shareOnTwitter=function(t){Cbola.Utils.getBitlyUrlAsync(t,function(e){window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(t.title+" "+t.text)+"&url="+encodeURIComponent(e),"_blank","width=560,height=380")})},new e}(),Cbola.InContent.Layers.CommonTriviaLayer=function(){var t=Cbola.Logger.getInstance(),e=Cbola.InContent.Layers.Services.TriviaService,i=Cbola.Common.AnalyticsService,o=Cbola.InContent.Layers.TriviaUtils,n=Cbola.Common.UserService,r=Cbola.Enums.ItemViewTypes,a=Cbola._,s=e.triviaTypes.TRUE_FALSE,l=Cbola.EventBus,c="CommonTriviaLayer",d=function(){this.currItemIdx=0,this.items=[],this.itemsForAnalytics=[],this.itemsViewOrder=1,this.itemsDisplayOrder=1},m=Cbola.InContent.Layers.Base.prototype;return a.extend(d.prototype,m),d.prototype.init=function(){m.init.call(this)},d.prototype.setOptions=function(t){this.options=t},d.prototype.onBeforeLoad=function(){t.debug(c+"::onBeforeLoad"),this.boxElem=this.view.element,this.view.container=this.container,this.view.applyViewOptions(this.options),this.view.adjustLanguage(),this.view.reset()},d.prototype.onLoad=function(){var i=this;t.debug(c+"::onLoad"),e.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(t){i.game=t,i.game&&(i.view.setTitle(i.game.title),i.view.addItems(i.game.items),i.view.attach(i.container),i.view.gotoQuestion(0,i.game.getCurrentQuestionItem().Answers),i.view.onLoad(),l.fire(l.Events.LAYER_READY,i))})},d.prototype.onUserAnswered=function(t,e){this.setItemsViewability(!1,t,r.ON_NEXT_BTN);var i=this.game.answerCurrentQuestion(t);this.view.setScore(this.game.score),this.view.playFeedbackAnimation(this.game.getCurrentQuestionNumber()-2,e,i,this.afterAnswerFeedbackAnimation.bind(this))},d.prototype.afterAnswerFeedbackAnimation=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.game.isCompleted?(this.setGameViewability(!0,t).reportAndClearItems(),this.onGameEnded()):this.selectInGameAction(t)},d.prototype.selectInGameAction=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setItemsViewability(!0,0,t?r.ON_NEXT_AUTOPLAY:r.ON_NEXT_BTN),this.pageToNextQuestion(t)},d.prototype.pageToNextQuestion=function(){var t=this.game.getCurrentQuestionNumber();this.view.gotoQuestion(t-1,this.game.getCurrentQuestionItem().Answers),this.view.setProgress(t+"/10"),this.reportAndClearItems()},d.prototype.onGameEnded=function(){var i=this;e.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(e){null===e&&t.warnM(c+".onGameEnded",c+"::onGameEnded -> No new game available, doing nothing"),i.nextGame=e,i.view.applyGameEndedUI(),i.view.gameEndingScreen.setGameEndedText(o.getGameEndedText(i.game.score/i.game.items.length)).setNextGameUI(i.nextGame).toggleGameEndedAnimation(!0)})},d.prototype.startNextGame=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setGameViewability(!1,t),this.game=this.nextGame,this.view.reset(),this.nextGame=null,this.view.setTitle(this.game.title),this.view.addItems(this.game.items),this.view.gotoQuestion(0,this.game.getCurrentQuestionItem().Answers),this.view.removeGameEndedUI(),this.view.gameEndingScreen.toggleGameEndedAnimation(!1),this.game.setViewable(!0),this.setItemsViewability(!0,0,r.ON_NEXT_BTN),this.reportAndClearItems()},d.prototype.getGameScore=function(){return this.game.score},d.prototype.onBecameViewable=function(t){m.onBecameViewable.call(this),a.isNil(this.game)||this.setLayerViewability(!0,t).reportAndClearItems()},d.prototype.onBecameUnviewable=function(){m.onBecameUnviewable.call(this),a.isNil(this.game)||this.setLayerViewability(!1).reportAndClearItems()},d.prototype.onMouseEnter=function(){i.setPageElementView(this.elementId,r.ON_HOVER,r.NONE)},d.prototype.onShareInGame=function(t){var e=void 0,n=void 0;e=this.game.getCurrentQuestionItem(),n={text:e.Description,title:e.ChartTitle||this.game.shortTitle,image:0!==e.Image.indexOf("http")?"https:"+e.Image:e.Image,ParentId:e.ParentId},2===e.Answers.length&&(n.text+=". "+e.Answers[0].Title+" or "+e.Answers[1].Title),this.isFacebookShare(t)?(n.text="I've just played an interactive trivia widget within this article. Check it out",o.shareOnFacebook(n),i.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_FACEBOOK,e)):this.isTwitterShare(t)&&(o.shareOnTwitter(n),i.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_TWITTER,e))},d.prototype.onShareEndGame=function(t){var e=void 0,r=void 0;r=this.game.getQuestionItem(this.game.items.length-1);var a=this.game.title.replace(/<br\s*\/?>/gi,"");e={text:n.vocabulary("canYouBeatThat"),title:n.vocabulary("iScored")+" "+this.game.score+"/10 "+n.vocabulary("playingIn")+' "'+a+'"',image:0!==r.Image.indexOf("http")?"https:"+r.Image:r.Image,ParentId:r.ParentId},this.isFacebookShare(t)?(e.text="I scored "+this.game.score+'/10 in "'+a+'" when playing an interactive trivia widget within this article. Check it out.',o.shareOnFacebook(e),i.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_FACEBOOK,r)):this.isTwitterShare(t)&&(o.shareOnTwitter(e),i.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_TWITTER,r))},d.prototype.isFacebookShare=function(t){for(;t.parentNode&&!/__share/g.test(t.className);){if(/__fb/g.test(t.className))return!0;t=t.parentNode}return!1},d.prototype.isTwitterShare=function(t){for(;t.parentNode&&!/__share/g.test(t.className);){if(/__tw/g.test(t.className))return!0;t=t.parentNode}return!1},d.prototype.onPoweredBy=function(t){var e=this.options.BrandRedirect||Cbola.Config.brandRedirectTemplate({layerType:this.type});i.setClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),t&&i.setClickTracker(t),window.open(e)},d.prototype.setLayerViewability=function(e,i){var o=e?i:r.UNVIEWABILITY,n=null,s=this.game.getCurrentQuestionNumber()-1;return a.result(this,"adSpots["+s+"]",!1)&&(a.isNil(this.adSpots[s].closeType)||this.adSpots[s].closeType===r.NONE)?(n=this.adSpots[s],n.Id=parseInt(this.view.getInItemAdId(s))):a.isNil(this.game)?t.errorM(c+".setLayerViewability",c+".setLayerViewability found null game. url: "+Cbola.Env.PageProperties.hostname):n=this.game.getCurrentQuestionItem(),n&&(n.setViewOrder(this.itemsViewOrder),n.setDisplayOrder(this.itemsDisplayOrder),n.setViewable(e),n.setOpenType(o),n.setCloseType(r.NONE),this.itemsForAnalytics.push(n)),this},d.prototype.setItemsViewability=function(e,i,o){var n=e?o:r.NONE,s=e?r.NONE:o,l=void 0;return a.isNil(this.game)?t.errorM(c+".setItemsViewability",c+".setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):l=this.game.getCurrentQuestionItem(),this.updateItemsForAnalytics(l,e,n,s,i),this},d.prototype.setGameViewability=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=i?r.ENDING_SCREEN_AUTOPLAY:r.ENDING_SCREEN,n=e?o:r.NONE,s=e?r.NONE:o,l=void 0;return a.isNil(this.game)?t.errorM(c+".setItemsViewability",c+".setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):l=this.game,this.updateItemsForAnalytics(l,e,n,s),this},d.prototype.updateItemsForAnalytics=function(e,i,o,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(a.isNil(e))return void t.warnM(c+".updateItemsForAnalytics",c+".updateItemsForAnalytics failed to report empty item");e.setViewable(i),e.isViewable&&(this.itemsViewOrder+=1,e.setViewOrder(this.itemsViewOrder),this.itemsDisplayOrder+=1,e.setDisplayOrder(this.itemsDisplayOrder)),e.setUserAnswerId(r),e.setOpenType(o),e.setCloseType(n),this.itemsForAnalytics.push(e)},d.prototype.reportAndClearItems=function(){return i.setItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[],this},d.prototype.endGameClickTracking=function(){i.setClick(this.elementId,Cbola.Enums.SetClickTypes.ENDING_SCREEN_OUT)},d.prototype.getTriviaType=function(){return s},d}(),Cbola.InContent.Layers.DesktopTriviaMultiLayer=function(){var t=Cbola._,e=Cbola.Logger.getInstance(),i=Cbola.Common.AnalyticsService,o=Cbola.InContent.Layers.Services.TriviaService,n=o.triviaTypes.MULTI_ANSWER,r=Cbola.Config,a=Cbola.Enums.ItemViewTypes,s=Cbola.EventBus,l=function(){Cbola.InContent.Layers.CommonTriviaLayer.call(this),this.view=new Cbola.InContent.Layers.DesktopTriviaMultiView(this),this.firstTimeLoad=!0},c=Cbola.InContent.Layers.CommonTriviaLayer.prototype;return t.extend(l.prototype,c),l.prototype.getTriviaType=function(){return n},l.prototype.onLoad=function(){var t=this;e.debug("DesktopTriviaMultiLayer::onLoad"),o.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(e){t.game=e,t.game&&(t.view.setTitle(t.game.title),t.view.addItems(t.game.items),t.view.attach(t.container),t.view.onLoad(),s.fire(s.Events.LAYER_READY,t),t.view.loadImagesIfNeeded(0))})},l.prototype.onUserAnswered=function(e,i){var o=this,n=t.isNil(i);this.setItemsViewability(!1,e,n?a.ON_NEXT_AUTOPLAY:a.ON_NEXT_BTN);var r=this.game.getCurrentQuestionCorrectAnswerIdx(),s=this.game.getCurrentQuestionNumber();this.game.answerCurrentQuestion(e),this.view.playFeedbackAnimation(s-1,i,r,function(){o.afterAnswerFeedbackAnimation(n)})},l.prototype.pageToNextQuestion=function(){this.view.setScore(this.game.score),this.view.gotoQuestion(this.game.getCurrentQuestionNumber()-1),this.reportAndClearItems()},l.prototype.startNextGame=function(i){var o=this;if(!this.pendingNextGameToStart){if(this.pendingNextGameToStart=!0,t.isNil(this.nextGame))return e.errorM("DesktopTriviaMultiLayer.startNextGame","DesktopTriviaMultiLayer.startNextGame encountered null game stopping game restart. url: "+Cbola.Env.PageProperties.hostname),void e.info(this.game);this.setGameViewability(!1,i),this.view.removeGameEndedUI(),this.view.gameEndingScreen.toggleGameEndedAnimation(!1),this.game=this.nextGame,this.nextGame=null,this.view.reset().setTitle(this.game.title).addItems(this.game.items).loadImagesIfNeeded(0),this.game.setViewable(!0),this.setItemsViewability(!0,0,i?a.ON_NEXT_AUTOPLAY:a.ON_NEXT_BTN).reportAndClearItems(),setTimeout(function(){o.view.startGame(),o.pendingNextGameToStart=!1},400)}},l.prototype.openCurrentQuestionLink=function(){if(!t.isNil(this.game)){var e=this.game.getCurrentQuestionItem();e&&e.Link&&window.open(e.Link)}},l.prototype.onPoweredBy=function(t){var e=r.brandRedirectTemplate({layerType:this.type}),o=t?this.options.BrandRedirect||e:e;i.setClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),window.open(o)},l.prototype.onBecameViewable=function(e){c.onBecameViewable.call(this,e),this.firstTimeLoad?(this.firstTimeLoad=!1,this.view.startGame()):t.isNil(this.game)||this.view.resumeTimer(this.game.hasEnded())},l.prototype.onBecameUnviewable=function(){c.onBecameUnviewable.call(this),t.isNil(this.game)||this.view.pauseTimer(this.game.hasEnded())},l}();var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.DesktopTriviaMultiView=Cbola.InContent.Layers.DesktopTriviaMultiView||function(){var t=Cbola.Utils,e=Cbola.EventBus,i=Cbola.Common.FontsManager,o=Cbola.Common.UserService,n=Cbola._,r=Cbola.Logger.getInstance(),a=Cbola.InContent.Components.SpinnerTimer,s=Cbola.Styles,l=function(t){var e=t.className,i=void 0===e?"cbola-page-item":e,o=t.toActive,n=void 0===o?null:o,r=t.toPrev,a=void 0===r?null:r,s=t.toNext,l=void 0===s?null:s;a&&(a.classList.remove(i+"--active"),a.classList.add(i+"--prev")),n&&(n.classList.remove(i+"--next"),n.classList.add(i+"--active")),l&&(l.classList.remove(i+"--active"),l.classList.remove(i+"--prev"),l.classList.add(i+"--next"))},c=function(t){var e=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_questions.html",{Items:[{Description:t}]}).querySelector(".cbola-d-trivia-multi__question");return l({toNext:e}),e},d=function(t){this.ignoreUserInput=!0,this.isAttached=!1,this.presenter=t,this.container=this.presenter.container,this.element=Cbola.Templates.createElement("desktop_trivia_multi_view.html"),this.lastImageIdx=0,this.uiItems=[],this.pausedTimer=null,this.bind()};d.prototype={bind:function(){this.answersContainer=this.element.querySelector(".cbola-d-trivia-multi__answer-list-container"),this.imageContainer=this.element.querySelector(".cbola-d-trivia-multi_image-container"),this.questionsContainer=this.element.querySelector(".cbola-d-trivia-multi__question-container"),this.gameEndingScreen=new m({view:this,presenter:this.presenter}),this.shareInGame=this.element.querySelector(".cbola-d-trivia-multi__share"),this.titleElem=this.element.querySelector(".cbola-d-trivia-multi__game-header"),this.footer=this.element.querySelector(".cbola-d-trivia-multi__content-footer"),this.logoContainer=this.element.querySelector(".cbola-d-trivia-multi__logo-container"),this.poweredBy=this.element.querySelector(".cbola-d-trivia-multi__logo"),this.addThisWidgetContact=this.logoContainer.querySelector(".cbola-d-trivia-multi__add-this"),this.addThisWidgetContact.textContent=o.vocabulary("addThisWidgetToYourSite"),this.scoreElem=this.element.querySelector(".cbola-d-trivia-multi-footer__score"),this.progressElem=this.element.querySelector(".cbola-d-trivia-multi-footer__progress");var t=this.element.querySelector(".cbola-d-trivia-multi__timer-placeholder");this.inGameTimer=new a({type:a.Types.UNFILL}).init(),this.inGameTimerWrapper=this.inGameTimer.getTimerWrapperElement(),this.inGameTimerEndedEvent=this.inGameTimer.replacePlaceholder(t).getTimerEndedEvent(),this.addEventListeners()},addEventListeners:function(){var t=this;window.addEventListener("resize",n.debounce(this.onResize.bind(this),150,{leading:!1,trailing:!0})),e.addEventListener(e.Events.RESIZE_ON_AD+this.presenter.elementId,function(){setTimeout(t.onResize.bind(t),10)}),this.answersContainer.addEventListener("click",function(e){t.ignoreUserInput||t.onUserAnswered(e)}),this.shareInGame.addEventListener("click",function(e){t.ignoreUserInput||t.presenter.onShareInGame(e.target)}),e.addEventListener(this.inGameTimerEndedEvent,function(){t.presenter.onUserAnswered(0,null)}),this.logoContainer.addEventListener("click",function(e){t.presenter.onPoweredBy(e.target===t.poweredBy)}),n.forEach([this.questionsContainer,this.imageContainer],function(e){e.addEventListener("click",function(){t.ignoreUserInput||t.presenter.openCurrentQuestionLink()})})},onResize:function(){var t=this.element.clientWidth;this.element.classList.remove("cbola-d-trivia-multi-sm"),this.element.classList.remove("cbola-d-trivia-multi-md"),t<500?this.element.classList.add("cbola-d-trivia-multi-sm"):t<575&&this.element.classList.add("cbola-d-trivia-multi-md")},onUserAnswered:function(e){for(var i=e.target;i!==e.currentTarget&&i;){if(i.classList.contains("cbola-d-trivia-multi__answer")){var o=t.dataset(i,"answerId");if(o)return this.presenter.onUserAnswered(o,i),this}i=i.parentElement}},reset:function(){return this.uiItems=[],this.uiItemsLength=0,this.lastImageIdx=0,this.answersContainer.innerHTML="",this.imageContainer.innerHTML="",this.questionsContainer.innerHTML="",this.setScore("0"),this},applyViewOptions:function(t){var e=this;if(this.options=t,this.options.wid=this.presenter.widgetId,this.options.elementId=this.presenter.elementId,s.injectThemeStyle(document,"cbola_layer_121_theme.css",this.options),this.inGameTimer.setDuration(t.DesktopMultiTriviaInGameTimerDuration),t.BrandImg?(this.poweredBy.style["background"]="url('"+t.BrandImg+"') no-repeat 0 50% / contain",this.poweredBy.style["width"]="95%",this.poweredBy.style["margin-right"]="5%",this.poweredBy.classList.remove("cbola-d-trivia-multi__carambola_logo")):Cbola.Env.PageProperties.isTablet||Cbola.Env.PageProperties.isMobile||(this.logoContainer.addEventListener("mouseenter",function(){clearTimeout(e.logoInVisibleTimeout),e.logoVisibleTimeout=setTimeout(function(){e.addThisWidgetContact.classList.remove("cbola-fade-out")},750)}),this.logoContainer.addEventListener("mouseleave",function(){clearTimeout(e.logoVisibleTimeout),e.logoInVisibleTimeout=setTimeout(function(){e.addThisWidgetContact.classList.add("cbola-fade-out")},500)})),t.DesktopMultiTriviaDisplayAnswerLetters&&43!==Cbola.Config.abTestId)switch(this.answersContainer.classList.add("cbola-d-trivia-multi__answers-letters"),Cbola.Config.abTestId){case 41:this.answersContainer.classList.add("cbola-d-trivia-multi__tabbed-answer");break;case 42:this.answersContainer.classList.add("cbola-d-trivia-multi__circle-answer")}if(t.DesktopMultiTriviaAdvertisementTitle){var i=Cbola.Templates.createElement("advertisement_title.html");this.presenter.topContainer.insertBefore(i,this.container)}this.gameEndingScreen.applyViewOptions(t)},adjustLanguage:function(){this.element.querySelector(".cbola-d-trivia-multi-footer__your-score").textContent=o.vocabulary("yourScore"),this.element.querySelector(".cbola-d-trivia-multi-footer__question").textContent=o.vocabulary("question"),this.element.classList.add("cbola-d-trivia-multi--"+o.getLanguage()),this.gameEndingScreen.adjustLanguage()},addItems:function(t){for(var e=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_image.html",{Items:t}),i=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_questions.html",{Items:t}),o=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_answers.html",{Items:t}),n=e.querySelectorAll(".cbola-d-trivia-multi_image-loader"),r=e.querySelectorAll(".cbola-loader"),a=i.querySelectorAll(".cbola-d-trivia-multi__question"),s=o.querySelectorAll(".cbola-d-trivia-multi__answers-list"),l=0;l<t.length;l++)this.uiItems.push({answerElem:s.item(l),descElem:a.item(l),imgElem:n.item(l),imgCover:n.item(l).querySelector(".cbola-d-trivia-multi__image"),imgUrl:t[l].Image,loaderElem:r.item(l)});return this.uiItemsLength=this.uiItems.length,this.setProgress("1"),this.answersContainer.appendChild(o),this.questionsContainer.appendChild(i),this.imageContainer.appendChild(e),this},attach:function(t){i.getOpenSans(),i.getOswald(),i.getRoboto(),this.isAttached||(this.isAttached=!0,n.isUndefined(this.styleElem)&&(this.styleElem=s.injectMainStyle(window.document,"cbola_layer_121.css")),t.appendChild(this.element),this.container=t,this.onResize())},detach:function(){this.isAttached&&(this.isAttached=!1,this.container.removeChild(this.element),window.document.head.removeChild(this.styleElem),this.styleElem=void 0)},onLoad:function(){var t=function(){this.container.removeEventListener("mouseenter",t),this.presenter.onMouseEnter()}.bind(this);this.container.addEventListener("mouseenter",t)},gotoQuestion:function(t){var e=void 0,i=void 0;!this.ignoreUserInput&&t&&(this.disableUserInput(600),e=this.uiItems[t-1],i=this.uiItems[t],l({toPrev:e.descElem,toActive:i.descElem}),l({toPrev:e.imgElem,toActive:i.imgElem,className:"cbola-d-trivia-multi__image"}),l({toPrev:e.answerElem,toActive:i.answerElem}),this.inGameTimer.setDuration(this.options.DesktopMultiTriviaInGameTimerDuration),setTimeout(this.inGameTimer.startTimer.bind(this.inGameTimer),600),this.loadImagesIfNeeded(t),this.setProgress(t+1))},loadImagesIfNeeded:function(t){return this.lastImageIdx<t+2&&this.loadNextImages(2),this},loadNextImages:function(t){for(var e=this.lastImageIdx+t,i=this.lastImageIdx;i<Math.min(e,this.uiItemsLength);i++,this.lastImageIdx++){var o=new Image;o.itemImage=this.uiItems[i].imgElem,o.itemImageCover=this.uiItems[i].imgCover,o.loaderElem=this.uiItems[i].loaderElem,o.onload=function(){this.itemImage.removeChild(this.loaderElem),this.itemImageCover.style["background-image"]='url("'+this.src+'")'},o.src=this.uiItems[i].imgUrl}},disableUserInput:function(t){var e=this;this.ignoreUserInput=!0,setTimeout(function(){e.presenter.isViewable&&(e.ignoreUserInput=!1)},t)},setTitle:function(t){return this.titleElem.innerHTML=t,this},setScore:function(t){this.scoreElem.textContent=t},setProgress:function(t){this.progressElem.textContent=t+"/"+this.uiItemsLength},startGame:function(){this.ignoreUserInput=!1,this.inGameTimer.startTimer()},playFeedbackAnimation:function(t,e,i,o){var r=this.uiItems[t],a=r.answerElem.querySelectorAll(".cbola-d-trivia-multi__answer"),s=void 0,l=void 0,c=void 0,d=void 0,m=void 0;this.inGameTimer.stopTimer(),n.isNil(i)||(m=a[i]),s=!n.isNil(e)&&e===m,l=s?"correct":"wrong",c=!s&&e?1100:600,d=!s&&e?400:0,this.disableUserInput(c),n.isNil(e)||e.classList.add("cbola-d-trivia-multi__answer-"+l),m&&!s&&setTimeout(function(){m.classList.add("cbola-d-trivia-multi__answer-correct")},400),m&&setTimeout(function(){n.forEach(a,function(t){t!==m&&t!==e&&t.classList.add("cbola-d-trivia-multi__answer-fade")})},Math.max(d-300,0)),setTimeout(function(){o&&o()},c)},applyGameEndedUI:function(){var t=this;this.uiItems[this.uiItemsLength-1].answerElem.style["pointer-events"]="none",this.footer.classList.add("cbola-fade-out"),this.options.DesktopMultiTriviaEndGameImg&&(this.titleElem.style["opacity"]=.3,this.answersContainer.style["opacity"]=.3),setTimeout(function(){t.inGameTimerWrapper.classList.add("cbola-fade-out")},600)},removeGameEndedUI:function(){this.footer.classList.remove("cbola-fade-out"),this.inGameTimerWrapper.classList.remove("cbola-fade-out")},resumeTimer:function(t){var e=this;this.pausedTimer=this.pausedTimer||(t?this.gameEndingScreen.endGameTimer:this.inGameTimer),this.pausedTimer&&(this.pausedTimer.startTimer(),r.info("MultiTriviaView resumed timer: ",this.pausedTimer),this.pausedTimer=null,requestAnimationFrame(function(){e.ignoreUserInput=!1}))},pauseTimer:function(t){this.ignoreUserInput=!0,this.pausedTimer=t?this.gameEndingScreen.getTimer():this.inGameTimer,this.pausedTimer&&(r.info("MultiTriviaView paused timer: ",this.pausedTimer),this.pausedTimer.stopTimer().reset())}};var m=function(){function t(e){_classCallCheck(this,t),this.hostingView=e.view,this.presenter=e.presenter,this.containingElement=e.view.element,this.bind()}return _createClass(t,[{key:"bind",value:function(){this.element=this.containingElement.querySelector(".cbola-d-trivia-multi-game-end"),this.shareEndGame=this.element.querySelector(".cbola-d-trivia-multi-game-end__share");var t=this.element.querySelector(".cbola-d-trivia-multi-game-end__timer-placeholder");this.endGameTimer=new a({type:a.Types.RUN}).init(),this.endGameTimerEndedEvent=this.endGameTimer.replacePlaceholder(t).getTimerEndedEvent(),this.startNextOverlay=this.containingElement.querySelector(".cbola-d-trivia-multi__next-game"),this.startNextQuizButton=this.startNextOverlay.querySelector(".cbola-d-trivia-multi__start-next-button"),this.addEventHandlers()}},{key:"addEventHandlers",value:function(){var t=this;this.shareEndGame.addEventListener("click",function(e){t.presenter.onShareEndGame(e.target),e.stopPropagation()}),e.addEventListener(this.endGameTimerEndedEvent,function(){r.info("MultiTriviaView started next game by timerEnd"),t.presenter.startNextGame(!0)}),this.startNextQuizButton.addEventListener("click",function(){t.endGameTimer.stopTimer(),r.info("MultiTriviaView started next game by click"),t.presenter.startNextGame(!1)})}},{key:"applyViewOptions",value:function(t){var e=this;this.options=t,t.DesktopMultiTriviaEndGameLink&&this.element.addEventListener("click",function(){e.presenter.endGameClickTracking(),window.open(t.DesktopMultiTriviaEndGameLink)})}},{key:"adjustLanguage",value:function(){this.element.querySelector(".cbola-d-trivia-multi-game-end__challenge").textContent=o.vocabulary("challenge"),this.element.querySelector(".cbola-d-trivia-multi-game-end__your-friends").textContent=o.vocabulary("yourFriends"),this.element.querySelector(".cbola-d-trivia-multi-game-end__next-quiz").textContent=o.vocabulary("nextQuiz","startsIn"),this.startNextQuizButton.textContent=o.vocabulary("start","nextQuiz")}},{key:"setGameEndedText",value:function(t){return this.element.querySelector(".cbola-d-trivia-multi-game-end__text").textContent=t,this.element.querySelector(".cbola-d-trivia-multi-game-end__score").textContent=this.presenter.getGameScore()+"/"+this.hostingView.uiItemsLength,this}},{key:"setNextGameUI",value:function(t){return t&&!this.options.DesktopMultiTriviaEndGameImg?this.nextGameTeaser(t):this.freezeEndingScreen(),this}},{key:"nextGameTeaser",value:function(t){var e=this,i=c(o.vocabulary("upNext")+": "+t.shortTitle);this.hostingView.questionsContainer.appendChild(i),setTimeout(function(){var t=e.hostingView.uiItems[e.hostingView.uiItemsLength-1].answerElem.querySelector(".cbola-d-trivia-multi__answer-wrong");t&&(t.classList.remove("cbola-d-trivia-multi__answer-wrong"),t.classList.add("cbola-d-trivia-multi__answer-fade"));var o=e.hostingView.uiItems[e.hostingView.uiItemsLength-1].answerElem.querySelector(".cbola-d-trivia-multi__answer-correct");o&&(o.classList.remove("cbola-d-trivia-multi__answer-correct"),o.classList.add("cbola-d-trivia-multi__answer-fade")),l({toPrev:e.hostingView.uiItems[e.hostingView.uiItemsLength-1].descElem,toActive:i}),e.endGameTimer.setDuration(e.options.DesktopMultiTriviaEndGameTimerDuration),e.startNextOverlay.classList.remove("cbola-hidden")},600)}},{key:"freezeEndingScreen",value:function(){var t=this;if(this.element.querySelector(".cbola-d-trivia-multi-game-end__teaser").classList.add("cbola-fade-out"),this.options.DesktopMultiTriviaEndGameImg){var e=c(o.vocabulary("thankYouForPlaying"));this.hostingView.questionsContainer.appendChild(e),setTimeout(function(){l({toPrev:t.hostingView.uiItems[t.hostingView.uiItems.length-1].descElem,toActive:e})},600),this.endGameTimer=null}else this.element.querySelector(".cbola-d-trivia-multi__game").style["opacity"]=.3}},{key:"toggleGameEndedAnimation",value:function(t){return t?this.openEndingScreen():this.closeEndingScreen(),this}},{key:"openEndingScreen",value:function(){var t=this;this.element.classList.add("cbola-d-trivia-multi-game-end--active"),setTimeout(function(){t.endGameTimer&&t.endGameTimer.startTimer()},600)}},{key:"closeEndingScreen",value:function(){this.startNextOverlay.classList.add("cbola-hidden"),this.element.classList.remove("cbola-d-trivia-multi-game-end--active")}},{key:"getTimer",value:function(){return this.endGameTimer}}]),t}();return d}();